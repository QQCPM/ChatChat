(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Nf(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var zu={exports:{}},D={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kn=Symbol.for("react.element"),Cf=Symbol.for("react.portal"),Tf=Symbol.for("react.fragment"),Pf=Symbol.for("react.strict_mode"),jf=Symbol.for("react.profiler"),Of=Symbol.for("react.provider"),Lf=Symbol.for("react.context"),Af=Symbol.for("react.forward_ref"),If=Symbol.for("react.suspense"),$f=Symbol.for("react.memo"),Rf=Symbol.for("react.lazy"),fl=Symbol.iterator;function Mf(e){return e===null||typeof e!="object"?null:(e=fl&&e[fl]||e["@@iterator"],typeof e=="function"?e:null)}var Bu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wu=Object.assign,Hu={};function qr(e,t,r){this.props=e,this.context=t,this.refs=Hu,this.updater=r||Bu}qr.prototype.isReactComponent={};qr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};qr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Vu(){}Vu.prototype=qr.prototype;function fa(e,t,r){this.props=e,this.context=t,this.refs=Hu,this.updater=r||Bu}var ha=fa.prototype=new Vu;ha.constructor=fa;Wu(ha,qr.prototype);ha.isPureReactComponent=!0;var hl=Array.isArray,Ku=Object.prototype.hasOwnProperty,ma={current:null},qu={key:!0,ref:!0,__self:!0,__source:!0};function Ju(e,t,r){var n,s={},o=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)Ku.call(t,n)&&!qu.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Kn,type:e,key:o,ref:i,props:s,_owner:ma.current}}function Df(e,t){return{$$typeof:Kn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function pa(e){return typeof e=="object"&&e!==null&&e.$$typeof===Kn}function Uf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var ml=/\/+/g;function Oo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Uf(""+e.key):t.toString(36)}function ks(e,t,r,n,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Kn:case Cf:i=!0}}if(i)return i=e,s=s(i),e=n===""?"."+Oo(i,0):n,hl(s)?(r="",e!=null&&(r=e.replace(ml,"$&/")+"/"),ks(s,t,r,"",function(c){return c})):s!=null&&(pa(s)&&(s=Df(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(ml,"$&/")+"/")+e)),t.push(s)),1;if(i=0,n=n===""?".":n+":",hl(e))for(var l=0;l<e.length;l++){o=e[l];var u=n+Oo(o,l);i+=ks(o,t,r,u,s)}else if(u=Mf(e),typeof u=="function")for(e=u.call(e),l=0;!(o=e.next()).done;)o=o.value,u=n+Oo(o,l++),i+=ks(o,t,r,u,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function ts(e,t,r){if(e==null)return e;var n=[],s=0;return ks(e,n,"","",function(o){return t.call(r,o,s++)}),n}function Ff(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ke={current:null},xs={transition:null},zf={ReactCurrentDispatcher:ke,ReactCurrentBatchConfig:xs,ReactCurrentOwner:ma};function Gu(){throw Error("act(...) is not supported in production builds of React.")}D.Children={map:ts,forEach:function(e,t,r){ts(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ts(e,function(){t++}),t},toArray:function(e){return ts(e,function(t){return t})||[]},only:function(e){if(!pa(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};D.Component=qr;D.Fragment=Tf;D.Profiler=jf;D.PureComponent=fa;D.StrictMode=Pf;D.Suspense=If;D.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zf;D.act=Gu;D.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Wu({},e.props),s=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=ma.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)Ku.call(t,u)&&!qu.hasOwnProperty(u)&&(n[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];n.children=l}return{$$typeof:Kn,type:e.type,key:s,ref:o,props:n,_owner:i}};D.createContext=function(e){return e={$$typeof:Lf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Of,_context:e},e.Consumer=e};D.createElement=Ju;D.createFactory=function(e){var t=Ju.bind(null,e);return t.type=e,t};D.createRef=function(){return{current:null}};D.forwardRef=function(e){return{$$typeof:Af,render:e}};D.isValidElement=pa;D.lazy=function(e){return{$$typeof:Rf,_payload:{_status:-1,_result:e},_init:Ff}};D.memo=function(e,t){return{$$typeof:$f,type:e,compare:t===void 0?null:t}};D.startTransition=function(e){var t=xs.transition;xs.transition={};try{e()}finally{xs.transition=t}};D.unstable_act=Gu;D.useCallback=function(e,t){return ke.current.useCallback(e,t)};D.useContext=function(e){return ke.current.useContext(e)};D.useDebugValue=function(){};D.useDeferredValue=function(e){return ke.current.useDeferredValue(e)};D.useEffect=function(e,t){return ke.current.useEffect(e,t)};D.useId=function(){return ke.current.useId()};D.useImperativeHandle=function(e,t,r){return ke.current.useImperativeHandle(e,t,r)};D.useInsertionEffect=function(e,t){return ke.current.useInsertionEffect(e,t)};D.useLayoutEffect=function(e,t){return ke.current.useLayoutEffect(e,t)};D.useMemo=function(e,t){return ke.current.useMemo(e,t)};D.useReducer=function(e,t,r){return ke.current.useReducer(e,t,r)};D.useRef=function(e){return ke.current.useRef(e)};D.useState=function(e){return ke.current.useState(e)};D.useSyncExternalStore=function(e,t,r){return ke.current.useSyncExternalStore(e,t,r)};D.useTransition=function(){return ke.current.useTransition()};D.version="18.3.1";zu.exports=D;var C=zu.exports;const a=bf(C);var ci={},Qu={exports:{}},$e={},Yu={exports:{}},Xu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,I){var R=T.length;T.push(I);e:for(;0<R;){var q=R-1>>>1,re=T[q];if(0<s(re,I))T[q]=I,T[R]=re,R=q;else break e}}function r(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var I=T[0],R=T.pop();if(R!==I){T[0]=R;e:for(var q=0,re=T.length,fr=re>>>1;q<fr;){var ot=2*(q+1)-1,tn=T[ot],it=ot+1,Vt=T[it];if(0>s(tn,R))it<re&&0>s(Vt,tn)?(T[q]=Vt,T[it]=R,q=it):(T[q]=tn,T[ot]=R,q=ot);else if(it<re&&0>s(Vt,R))T[q]=Vt,T[it]=R,q=it;else break e}}return I}function s(T,I){var R=T.sortIndex-I.sortIndex;return R!==0?R:T.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var u=[],c=[],d=1,f=null,g=3,w=!1,y=!1,E=!1,_=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(T){for(var I=r(c);I!==null;){if(I.callback===null)n(c);else if(I.startTime<=T)n(c),I.sortIndex=I.expirationTime,t(u,I);else break;I=r(c)}}function v(T){if(E=!1,p(T),!y)if(r(u)!==null)y=!0,we(k);else{var I=r(c);I!==null&&en(v,I.startTime-T)}}function k(T,I){y=!1,E&&(E=!1,m(N),N=-1),w=!0;var R=g;try{for(p(I),f=r(u);f!==null&&(!(f.expirationTime>I)||T&&!A());){var q=f.callback;if(typeof q=="function"){f.callback=null,g=f.priorityLevel;var re=q(f.expirationTime<=I);I=e.unstable_now(),typeof re=="function"?f.callback=re:f===r(u)&&n(u),p(I)}else n(u);f=r(u)}if(f!==null)var fr=!0;else{var ot=r(c);ot!==null&&en(v,ot.startTime-I),fr=!1}return fr}finally{f=null,g=R,w=!1}}var x=!1,b=null,N=-1,O=5,j=-1;function A(){return!(e.unstable_now()-j<O)}function ue(){if(b!==null){var T=e.unstable_now();j=T;var I=!0;try{I=b(!0,T)}finally{I?He():(x=!1,b=null)}}else x=!1}var He;if(typeof h=="function")He=function(){h(ue)};else if(typeof MessageChannel<"u"){var es=new MessageChannel,Zr=es.port2;es.port1.onmessage=ue,He=function(){Zr.postMessage(null)}}else He=function(){_(ue,0)};function we(T){b=T,x||(x=!0,He())}function en(T,I){N=_(function(){T(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){y||w||(y=!0,we(k))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(T){switch(g){case 1:case 2:case 3:var I=3;break;default:I=g}var R=g;g=I;try{return T()}finally{g=R}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,I){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var R=g;g=T;try{return I()}finally{g=R}},e.unstable_scheduleCallback=function(T,I,R){var q=e.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?q+R:q):R=q,T){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=R+re,T={id:d++,callback:I,priorityLevel:T,startTime:R,expirationTime:re,sortIndex:-1},R>q?(T.sortIndex=R,t(c,T),r(u)===null&&T===r(c)&&(E?(m(N),N=-1):E=!0,en(v,R-q))):(T.sortIndex=re,t(u,T),y||w||(y=!0,we(k))),T},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(T){var I=g;return function(){var R=g;g=I;try{return T.apply(this,arguments)}finally{g=R}}}})(Xu);Yu.exports=Xu;var Bf=Yu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wf=C,Ie=Bf;function S(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zu=new Set,Tn={};function ur(e,t){Ur(e,t),Ur(e+"Capture",t)}function Ur(e,t){for(Tn[e]=t,e=0;e<t.length;e++)Zu.add(t[e])}var mt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),di=Object.prototype.hasOwnProperty,Hf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pl={},gl={};function Vf(e){return di.call(gl,e)?!0:di.call(pl,e)?!1:Hf.test(e)?gl[e]=!0:(pl[e]=!0,!1)}function Kf(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qf(e,t,r,n){if(t===null||typeof t>"u"||Kf(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function xe(e,t,r,n,s,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){fe[e]=new xe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];fe[t]=new xe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){fe[e]=new xe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){fe[e]=new xe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){fe[e]=new xe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){fe[e]=new xe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){fe[e]=new xe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){fe[e]=new xe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){fe[e]=new xe(e,5,!1,e.toLowerCase(),null,!1,!1)});var ga=/[\-:]([a-z])/g;function va(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ga,va);fe[t]=new xe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ga,va);fe[t]=new xe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ga,va);fe[t]=new xe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){fe[e]=new xe(e,1,!1,e.toLowerCase(),null,!1,!1)});fe.xlinkHref=new xe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){fe[e]=new xe(e,1,!1,e.toLowerCase(),null,!0,!0)});function ya(e,t,r,n){var s=fe.hasOwnProperty(t)?fe[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(qf(t,r,s,n)&&(r=null),n||s===null?Vf(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var yt=Wf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rs=Symbol.for("react.element"),_r=Symbol.for("react.portal"),kr=Symbol.for("react.fragment"),wa=Symbol.for("react.strict_mode"),fi=Symbol.for("react.profiler"),ec=Symbol.for("react.provider"),tc=Symbol.for("react.context"),Ea=Symbol.for("react.forward_ref"),hi=Symbol.for("react.suspense"),mi=Symbol.for("react.suspense_list"),_a=Symbol.for("react.memo"),xt=Symbol.for("react.lazy"),rc=Symbol.for("react.offscreen"),vl=Symbol.iterator;function rn(e){return e===null||typeof e!="object"?null:(e=vl&&e[vl]||e["@@iterator"],typeof e=="function"?e:null)}var X=Object.assign,Lo;function fn(e){if(Lo===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Lo=t&&t[1]||""}return`
`+Lo+e}var Ao=!1;function Io(e,t){if(!e||Ao)return"";Ao=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),o=n.stack.split(`
`),i=s.length-1,l=o.length-1;1<=i&&0<=l&&s[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==o[l]){var u=`
`+s[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=l);break}}}finally{Ao=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?fn(e):""}function Jf(e){switch(e.tag){case 5:return fn(e.type);case 16:return fn("Lazy");case 13:return fn("Suspense");case 19:return fn("SuspenseList");case 0:case 2:case 15:return e=Io(e.type,!1),e;case 11:return e=Io(e.type.render,!1),e;case 1:return e=Io(e.type,!0),e;default:return""}}function pi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case kr:return"Fragment";case _r:return"Portal";case fi:return"Profiler";case wa:return"StrictMode";case hi:return"Suspense";case mi:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case tc:return(e.displayName||"Context")+".Consumer";case ec:return(e._context.displayName||"Context")+".Provider";case Ea:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _a:return t=e.displayName||null,t!==null?t:pi(e.type)||"Memo";case xt:t=e._payload,e=e._init;try{return pi(e(t))}catch{}}return null}function Gf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pi(t);case 8:return t===wa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ut(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function nc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qf(e){var t=nc(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ns(e){e._valueTracker||(e._valueTracker=Qf(e))}function sc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=nc(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Is(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function gi(e,t){var r=t.checked;return X({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function yl(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ut(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function oc(e,t){t=t.checked,t!=null&&ya(e,"checked",t,!1)}function vi(e,t){oc(e,t);var r=Ut(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?yi(e,t.type,r):t.hasOwnProperty("defaultValue")&&yi(e,t.type,Ut(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function wl(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function yi(e,t,r){(t!=="number"||Is(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var hn=Array.isArray;function Ar(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ut(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function wi(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(S(91));return X({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function El(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(S(92));if(hn(r)){if(1<r.length)throw Error(S(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ut(r)}}function ic(e,t){var r=Ut(t.value),n=Ut(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function _l(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ac(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ei(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ac(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ss,lc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ss=ss||document.createElement("div"),ss.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ss.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Pn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var vn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yf=["Webkit","ms","Moz","O"];Object.keys(vn).forEach(function(e){Yf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),vn[t]=vn[e]})});function uc(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||vn.hasOwnProperty(e)&&vn[e]?(""+t).trim():t+"px"}function cc(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=uc(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Xf=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _i(e,t){if(t){if(Xf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(S(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(S(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(S(61))}if(t.style!=null&&typeof t.style!="object")throw Error(S(62))}}function ki(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xi=null;function ka(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Si=null,Ir=null,$r=null;function kl(e){if(e=Gn(e)){if(typeof Si!="function")throw Error(S(280));var t=e.stateNode;t&&(t=co(t),Si(e.stateNode,e.type,t))}}function dc(e){Ir?$r?$r.push(e):$r=[e]:Ir=e}function fc(){if(Ir){var e=Ir,t=$r;if($r=Ir=null,kl(e),t)for(e=0;e<t.length;e++)kl(t[e])}}function hc(e,t){return e(t)}function mc(){}var $o=!1;function pc(e,t,r){if($o)return e(t,r);$o=!0;try{return hc(e,t,r)}finally{$o=!1,(Ir!==null||$r!==null)&&(mc(),fc())}}function jn(e,t){var r=e.stateNode;if(r===null)return null;var n=co(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(S(231,t,typeof r));return r}var bi=!1;if(mt)try{var nn={};Object.defineProperty(nn,"passive",{get:function(){bi=!0}}),window.addEventListener("test",nn,nn),window.removeEventListener("test",nn,nn)}catch{bi=!1}function Zf(e,t,r,n,s,o,i,l,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var yn=!1,$s=null,Rs=!1,Ni=null,eh={onError:function(e){yn=!0,$s=e}};function th(e,t,r,n,s,o,i,l,u){yn=!1,$s=null,Zf.apply(eh,arguments)}function rh(e,t,r,n,s,o,i,l,u){if(th.apply(this,arguments),yn){if(yn){var c=$s;yn=!1,$s=null}else throw Error(S(198));Rs||(Rs=!0,Ni=c)}}function cr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function gc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function xl(e){if(cr(e)!==e)throw Error(S(188))}function nh(e){var t=e.alternate;if(!t){if(t=cr(e),t===null)throw Error(S(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return xl(s),e;if(o===n)return xl(s),t;o=o.sibling}throw Error(S(188))}if(r.return!==n.return)r=s,n=o;else{for(var i=!1,l=s.child;l;){if(l===r){i=!0,r=s,n=o;break}if(l===n){i=!0,n=s,r=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===r){i=!0,r=o,n=s;break}if(l===n){i=!0,n=o,r=s;break}l=l.sibling}if(!i)throw Error(S(189))}}if(r.alternate!==n)throw Error(S(190))}if(r.tag!==3)throw Error(S(188));return r.stateNode.current===r?e:t}function vc(e){return e=nh(e),e!==null?yc(e):null}function yc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=yc(e);if(t!==null)return t;e=e.sibling}return null}var wc=Ie.unstable_scheduleCallback,Sl=Ie.unstable_cancelCallback,sh=Ie.unstable_shouldYield,oh=Ie.unstable_requestPaint,ee=Ie.unstable_now,ih=Ie.unstable_getCurrentPriorityLevel,xa=Ie.unstable_ImmediatePriority,Ec=Ie.unstable_UserBlockingPriority,Ms=Ie.unstable_NormalPriority,ah=Ie.unstable_LowPriority,_c=Ie.unstable_IdlePriority,io=null,nt=null;function lh(e){if(nt&&typeof nt.onCommitFiberRoot=="function")try{nt.onCommitFiberRoot(io,e,void 0,(e.current.flags&128)===128)}catch{}}var Ye=Math.clz32?Math.clz32:dh,uh=Math.log,ch=Math.LN2;function dh(e){return e>>>=0,e===0?32:31-(uh(e)/ch|0)|0}var os=64,is=4194304;function mn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ds(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,o=e.pingedLanes,i=r&268435455;if(i!==0){var l=i&~s;l!==0?n=mn(l):(o&=i,o!==0&&(n=mn(o)))}else i=r&~s,i!==0?n=mn(i):o!==0&&(n=mn(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ye(t),s=1<<r,n|=e[r],t&=~s;return n}function fh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hh(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Ye(o),l=1<<i,u=s[i];u===-1?(!(l&r)||l&n)&&(s[i]=fh(l,t)):u<=t&&(e.expiredLanes|=l),o&=~l}}function Ci(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function kc(){var e=os;return os<<=1,!(os&4194240)&&(os=64),e}function Ro(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function qn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ye(t),e[t]=r}function mh(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Ye(r),o=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~o}}function Sa(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ye(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var F=0;function xc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Sc,ba,bc,Nc,Cc,Ti=!1,as=[],Ot=null,Lt=null,At=null,On=new Map,Ln=new Map,Nt=[],ph="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bl(e,t){switch(e){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":Lt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":On.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ln.delete(t.pointerId)}}function sn(e,t,r,n,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Gn(t),t!==null&&ba(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function gh(e,t,r,n,s){switch(t){case"focusin":return Ot=sn(Ot,e,t,r,n,s),!0;case"dragenter":return Lt=sn(Lt,e,t,r,n,s),!0;case"mouseover":return At=sn(At,e,t,r,n,s),!0;case"pointerover":var o=s.pointerId;return On.set(o,sn(On.get(o)||null,e,t,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,Ln.set(o,sn(Ln.get(o)||null,e,t,r,n,s)),!0}return!1}function Tc(e){var t=Xt(e.target);if(t!==null){var r=cr(t);if(r!==null){if(t=r.tag,t===13){if(t=gc(r),t!==null){e.blockedOn=t,Cc(e.priority,function(){bc(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ss(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Pi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);xi=n,r.target.dispatchEvent(n),xi=null}else return t=Gn(r),t!==null&&ba(t),e.blockedOn=r,!1;t.shift()}return!0}function Nl(e,t,r){Ss(e)&&r.delete(t)}function vh(){Ti=!1,Ot!==null&&Ss(Ot)&&(Ot=null),Lt!==null&&Ss(Lt)&&(Lt=null),At!==null&&Ss(At)&&(At=null),On.forEach(Nl),Ln.forEach(Nl)}function on(e,t){e.blockedOn===t&&(e.blockedOn=null,Ti||(Ti=!0,Ie.unstable_scheduleCallback(Ie.unstable_NormalPriority,vh)))}function An(e){function t(s){return on(s,e)}if(0<as.length){on(as[0],e);for(var r=1;r<as.length;r++){var n=as[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ot!==null&&on(Ot,e),Lt!==null&&on(Lt,e),At!==null&&on(At,e),On.forEach(t),Ln.forEach(t),r=0;r<Nt.length;r++)n=Nt[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Nt.length&&(r=Nt[0],r.blockedOn===null);)Tc(r),r.blockedOn===null&&Nt.shift()}var Rr=yt.ReactCurrentBatchConfig,Us=!0;function yh(e,t,r,n){var s=F,o=Rr.transition;Rr.transition=null;try{F=1,Na(e,t,r,n)}finally{F=s,Rr.transition=o}}function wh(e,t,r,n){var s=F,o=Rr.transition;Rr.transition=null;try{F=4,Na(e,t,r,n)}finally{F=s,Rr.transition=o}}function Na(e,t,r,n){if(Us){var s=Pi(e,t,r,n);if(s===null)Ko(e,t,n,Fs,r),bl(e,n);else if(gh(s,e,t,r,n))n.stopPropagation();else if(bl(e,n),t&4&&-1<ph.indexOf(e)){for(;s!==null;){var o=Gn(s);if(o!==null&&Sc(o),o=Pi(e,t,r,n),o===null&&Ko(e,t,n,Fs,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else Ko(e,t,n,null,r)}}var Fs=null;function Pi(e,t,r,n){if(Fs=null,e=ka(n),e=Xt(e),e!==null)if(t=cr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=gc(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fs=e,null}function Pc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ih()){case xa:return 1;case Ec:return 4;case Ms:case ah:return 16;case _c:return 536870912;default:return 16}default:return 16}}var Pt=null,Ca=null,bs=null;function jc(){if(bs)return bs;var e,t=Ca,r=t.length,n,s="value"in Pt?Pt.value:Pt.textContent,o=s.length;for(e=0;e<r&&t[e]===s[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===s[o-n];n++);return bs=s.slice(e,1<n?1-n:void 0)}function Ns(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ls(){return!0}function Cl(){return!1}function Re(e){function t(r,n,s,o,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ls:Cl,this.isPropagationStopped=Cl,this}return X(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ls)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ls)},persist:function(){},isPersistent:ls}),t}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ta=Re(Jr),Jn=X({},Jr,{view:0,detail:0}),Eh=Re(Jn),Mo,Do,an,ao=X({},Jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==an&&(an&&e.type==="mousemove"?(Mo=e.screenX-an.screenX,Do=e.screenY-an.screenY):Do=Mo=0,an=e),Mo)},movementY:function(e){return"movementY"in e?e.movementY:Do}}),Tl=Re(ao),_h=X({},ao,{dataTransfer:0}),kh=Re(_h),xh=X({},Jn,{relatedTarget:0}),Uo=Re(xh),Sh=X({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),bh=Re(Sh),Nh=X({},Jr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ch=Re(Nh),Th=X({},Jr,{data:0}),Pl=Re(Th),Ph={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Oh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Oh[e])?!!t[e]:!1}function Pa(){return Lh}var Ah=X({},Jn,{key:function(e){if(e.key){var t=Ph[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ns(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pa,charCode:function(e){return e.type==="keypress"?Ns(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ns(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ih=Re(Ah),$h=X({},ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jl=Re($h),Rh=X({},Jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pa}),Mh=Re(Rh),Dh=X({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uh=Re(Dh),Fh=X({},ao,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zh=Re(Fh),Bh=[9,13,27,32],ja=mt&&"CompositionEvent"in window,wn=null;mt&&"documentMode"in document&&(wn=document.documentMode);var Wh=mt&&"TextEvent"in window&&!wn,Oc=mt&&(!ja||wn&&8<wn&&11>=wn),Ol=" ",Ll=!1;function Lc(e,t){switch(e){case"keyup":return Bh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ac(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xr=!1;function Hh(e,t){switch(e){case"compositionend":return Ac(t);case"keypress":return t.which!==32?null:(Ll=!0,Ol);case"textInput":return e=t.data,e===Ol&&Ll?null:e;default:return null}}function Vh(e,t){if(xr)return e==="compositionend"||!ja&&Lc(e,t)?(e=jc(),bs=Ca=Pt=null,xr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Oc&&t.locale!=="ko"?null:t.data;default:return null}}var Kh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Al(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Kh[e.type]:t==="textarea"}function Ic(e,t,r,n){dc(n),t=zs(t,"onChange"),0<t.length&&(r=new Ta("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var En=null,In=null;function qh(e){Vc(e,0)}function lo(e){var t=Nr(e);if(sc(t))return e}function Jh(e,t){if(e==="change")return t}var $c=!1;if(mt){var Fo;if(mt){var zo="oninput"in document;if(!zo){var Il=document.createElement("div");Il.setAttribute("oninput","return;"),zo=typeof Il.oninput=="function"}Fo=zo}else Fo=!1;$c=Fo&&(!document.documentMode||9<document.documentMode)}function $l(){En&&(En.detachEvent("onpropertychange",Rc),In=En=null)}function Rc(e){if(e.propertyName==="value"&&lo(In)){var t=[];Ic(t,In,e,ka(e)),pc(qh,t)}}function Gh(e,t,r){e==="focusin"?($l(),En=t,In=r,En.attachEvent("onpropertychange",Rc)):e==="focusout"&&$l()}function Qh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return lo(In)}function Yh(e,t){if(e==="click")return lo(t)}function Xh(e,t){if(e==="input"||e==="change")return lo(t)}function Zh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ze=typeof Object.is=="function"?Object.is:Zh;function $n(e,t){if(Ze(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!di.call(t,s)||!Ze(e[s],t[s]))return!1}return!0}function Rl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ml(e,t){var r=Rl(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Rl(r)}}function Mc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Mc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Dc(){for(var e=window,t=Is();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Is(e.document)}return t}function Oa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function em(e){var t=Dc(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Mc(r.ownerDocument.documentElement,r)){if(n!==null&&Oa(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!e.extend&&o>n&&(s=n,n=o,o=s),s=Ml(r,o);var i=Ml(r,n);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tm=mt&&"documentMode"in document&&11>=document.documentMode,Sr=null,ji=null,_n=null,Oi=!1;function Dl(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Oi||Sr==null||Sr!==Is(n)||(n=Sr,"selectionStart"in n&&Oa(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),_n&&$n(_n,n)||(_n=n,n=zs(ji,"onSelect"),0<n.length&&(t=new Ta("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Sr)))}function us(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var br={animationend:us("Animation","AnimationEnd"),animationiteration:us("Animation","AnimationIteration"),animationstart:us("Animation","AnimationStart"),transitionend:us("Transition","TransitionEnd")},Bo={},Uc={};mt&&(Uc=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);function uo(e){if(Bo[e])return Bo[e];if(!br[e])return e;var t=br[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Uc)return Bo[e]=t[r];return e}var Fc=uo("animationend"),zc=uo("animationiteration"),Bc=uo("animationstart"),Wc=uo("transitionend"),Hc=new Map,Ul="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zt(e,t){Hc.set(e,t),ur(t,[e])}for(var Wo=0;Wo<Ul.length;Wo++){var Ho=Ul[Wo],rm=Ho.toLowerCase(),nm=Ho[0].toUpperCase()+Ho.slice(1);zt(rm,"on"+nm)}zt(Fc,"onAnimationEnd");zt(zc,"onAnimationIteration");zt(Bc,"onAnimationStart");zt("dblclick","onDoubleClick");zt("focusin","onFocus");zt("focusout","onBlur");zt(Wc,"onTransitionEnd");Ur("onMouseEnter",["mouseout","mouseover"]);Ur("onMouseLeave",["mouseout","mouseover"]);Ur("onPointerEnter",["pointerout","pointerover"]);Ur("onPointerLeave",["pointerout","pointerover"]);ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ur("onBeforeInput",["compositionend","keypress","textInput","paste"]);ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sm=new Set("cancel close invalid load scroll toggle".split(" ").concat(pn));function Fl(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,rh(n,t,void 0,e),e.currentTarget=null}function Vc(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var i=n.length-1;0<=i;i--){var l=n[i],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==o&&s.isPropagationStopped())break e;Fl(s,l,c),o=u}else for(i=0;i<n.length;i++){if(l=n[i],u=l.instance,c=l.currentTarget,l=l.listener,u!==o&&s.isPropagationStopped())break e;Fl(s,l,c),o=u}}}if(Rs)throw e=Ni,Rs=!1,Ni=null,e}function V(e,t){var r=t[Ri];r===void 0&&(r=t[Ri]=new Set);var n=e+"__bubble";r.has(n)||(Kc(t,e,2,!1),r.add(n))}function Vo(e,t,r){var n=0;t&&(n|=4),Kc(r,e,n,t)}var cs="_reactListening"+Math.random().toString(36).slice(2);function Rn(e){if(!e[cs]){e[cs]=!0,Zu.forEach(function(r){r!=="selectionchange"&&(sm.has(r)||Vo(r,!1,e),Vo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[cs]||(t[cs]=!0,Vo("selectionchange",!1,t))}}function Kc(e,t,r,n){switch(Pc(t)){case 1:var s=yh;break;case 4:s=wh;break;default:s=Na}r=s.bind(null,t,r,e),s=void 0,!bi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Ko(e,t,r,n,s){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;i=i.return}for(;l!==null;){if(i=Xt(l),i===null)return;if(u=i.tag,u===5||u===6){n=o=i;continue e}l=l.parentNode}}n=n.return}pc(function(){var c=o,d=ka(r),f=[];e:{var g=Hc.get(e);if(g!==void 0){var w=Ta,y=e;switch(e){case"keypress":if(Ns(r)===0)break e;case"keydown":case"keyup":w=Ih;break;case"focusin":y="focus",w=Uo;break;case"focusout":y="blur",w=Uo;break;case"beforeblur":case"afterblur":w=Uo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Tl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=kh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Mh;break;case Fc:case zc:case Bc:w=bh;break;case Wc:w=Uh;break;case"scroll":w=Eh;break;case"wheel":w=zh;break;case"copy":case"cut":case"paste":w=Ch;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=jl}var E=(t&4)!==0,_=!E&&e==="scroll",m=E?g!==null?g+"Capture":null:g;E=[];for(var h=c,p;h!==null;){p=h;var v=p.stateNode;if(p.tag===5&&v!==null&&(p=v,m!==null&&(v=jn(h,m),v!=null&&E.push(Mn(h,v,p)))),_)break;h=h.return}0<E.length&&(g=new w(g,y,null,r,d),f.push({event:g,listeners:E}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",g&&r!==xi&&(y=r.relatedTarget||r.fromElement)&&(Xt(y)||y[pt]))break e;if((w||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,w?(y=r.relatedTarget||r.toElement,w=c,y=y?Xt(y):null,y!==null&&(_=cr(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(w=null,y=c),w!==y)){if(E=Tl,v="onMouseLeave",m="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(E=jl,v="onPointerLeave",m="onPointerEnter",h="pointer"),_=w==null?g:Nr(w),p=y==null?g:Nr(y),g=new E(v,h+"leave",w,r,d),g.target=_,g.relatedTarget=p,v=null,Xt(d)===c&&(E=new E(m,h+"enter",y,r,d),E.target=p,E.relatedTarget=_,v=E),_=v,w&&y)t:{for(E=w,m=y,h=0,p=E;p;p=hr(p))h++;for(p=0,v=m;v;v=hr(v))p++;for(;0<h-p;)E=hr(E),h--;for(;0<p-h;)m=hr(m),p--;for(;h--;){if(E===m||m!==null&&E===m.alternate)break t;E=hr(E),m=hr(m)}E=null}else E=null;w!==null&&zl(f,g,w,E,!1),y!==null&&_!==null&&zl(f,_,y,E,!0)}}e:{if(g=c?Nr(c):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var k=Jh;else if(Al(g))if($c)k=Xh;else{k=Qh;var x=Gh}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(k=Yh);if(k&&(k=k(e,c))){Ic(f,k,r,d);break e}x&&x(e,g,c),e==="focusout"&&(x=g._wrapperState)&&x.controlled&&g.type==="number"&&yi(g,"number",g.value)}switch(x=c?Nr(c):window,e){case"focusin":(Al(x)||x.contentEditable==="true")&&(Sr=x,ji=c,_n=null);break;case"focusout":_n=ji=Sr=null;break;case"mousedown":Oi=!0;break;case"contextmenu":case"mouseup":case"dragend":Oi=!1,Dl(f,r,d);break;case"selectionchange":if(tm)break;case"keydown":case"keyup":Dl(f,r,d)}var b;if(ja)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else xr?Lc(e,r)&&(N="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(Oc&&r.locale!=="ko"&&(xr||N!=="onCompositionStart"?N==="onCompositionEnd"&&xr&&(b=jc()):(Pt=d,Ca="value"in Pt?Pt.value:Pt.textContent,xr=!0)),x=zs(c,N),0<x.length&&(N=new Pl(N,e,null,r,d),f.push({event:N,listeners:x}),b?N.data=b:(b=Ac(r),b!==null&&(N.data=b)))),(b=Wh?Hh(e,r):Vh(e,r))&&(c=zs(c,"onBeforeInput"),0<c.length&&(d=new Pl("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:c}),d.data=b))}Vc(f,t)})}function Mn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function zs(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=jn(e,r),o!=null&&n.unshift(Mn(e,o,s)),o=jn(e,t),o!=null&&n.push(Mn(e,o,s))),e=e.return}return n}function hr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function zl(e,t,r,n,s){for(var o=t._reactName,i=[];r!==null&&r!==n;){var l=r,u=l.alternate,c=l.stateNode;if(u!==null&&u===n)break;l.tag===5&&c!==null&&(l=c,s?(u=jn(r,o),u!=null&&i.unshift(Mn(r,u,l))):s||(u=jn(r,o),u!=null&&i.push(Mn(r,u,l)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var om=/\r\n?/g,im=/\u0000|\uFFFD/g;function Bl(e){return(typeof e=="string"?e:""+e).replace(om,`
`).replace(im,"")}function ds(e,t,r){if(t=Bl(t),Bl(e)!==t&&r)throw Error(S(425))}function Bs(){}var Li=null,Ai=null;function Ii(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $i=typeof setTimeout=="function"?setTimeout:void 0,am=typeof clearTimeout=="function"?clearTimeout:void 0,Wl=typeof Promise=="function"?Promise:void 0,lm=typeof queueMicrotask=="function"?queueMicrotask:typeof Wl<"u"?function(e){return Wl.resolve(null).then(e).catch(um)}:$i;function um(e){setTimeout(function(){throw e})}function qo(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),An(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);An(t)}function It(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Hl(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Gr=Math.random().toString(36).slice(2),rt="__reactFiber$"+Gr,Dn="__reactProps$"+Gr,pt="__reactContainer$"+Gr,Ri="__reactEvents$"+Gr,cm="__reactListeners$"+Gr,dm="__reactHandles$"+Gr;function Xt(e){var t=e[rt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pt]||r[rt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Hl(e);e!==null;){if(r=e[rt])return r;e=Hl(e)}return t}e=r,r=e.parentNode}return null}function Gn(e){return e=e[rt]||e[pt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Nr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(S(33))}function co(e){return e[Dn]||null}var Mi=[],Cr=-1;function Bt(e){return{current:e}}function K(e){0>Cr||(e.current=Mi[Cr],Mi[Cr]=null,Cr--)}function W(e,t){Cr++,Mi[Cr]=e.current,e.current=t}var Ft={},ye=Bt(Ft),Te=Bt(!1),nr=Ft;function Fr(e,t){var r=e.type.contextTypes;if(!r)return Ft;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pe(e){return e=e.childContextTypes,e!=null}function Ws(){K(Te),K(ye)}function Vl(e,t,r){if(ye.current!==Ft)throw Error(S(168));W(ye,t),W(Te,r)}function qc(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(S(108,Gf(e)||"Unknown",s));return X({},r,n)}function Hs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ft,nr=ye.current,W(ye,e),W(Te,Te.current),!0}function Kl(e,t,r){var n=e.stateNode;if(!n)throw Error(S(169));r?(e=qc(e,t,nr),n.__reactInternalMemoizedMergedChildContext=e,K(Te),K(ye),W(ye,e)):K(Te),W(Te,r)}var ct=null,fo=!1,Jo=!1;function Jc(e){ct===null?ct=[e]:ct.push(e)}function fm(e){fo=!0,Jc(e)}function Wt(){if(!Jo&&ct!==null){Jo=!0;var e=0,t=F;try{var r=ct;for(F=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ct=null,fo=!1}catch(s){throw ct!==null&&(ct=ct.slice(e+1)),wc(xa,Wt),s}finally{F=t,Jo=!1}}return null}var Tr=[],Pr=0,Vs=null,Ks=0,Me=[],De=0,sr=null,dt=1,ft="";function Jt(e,t){Tr[Pr++]=Ks,Tr[Pr++]=Vs,Vs=e,Ks=t}function Gc(e,t,r){Me[De++]=dt,Me[De++]=ft,Me[De++]=sr,sr=e;var n=dt;e=ft;var s=32-Ye(n)-1;n&=~(1<<s),r+=1;var o=32-Ye(t)+s;if(30<o){var i=s-s%5;o=(n&(1<<i)-1).toString(32),n>>=i,s-=i,dt=1<<32-Ye(t)+s|r<<s|n,ft=o+e}else dt=1<<o|r<<s|n,ft=e}function La(e){e.return!==null&&(Jt(e,1),Gc(e,1,0))}function Aa(e){for(;e===Vs;)Vs=Tr[--Pr],Tr[Pr]=null,Ks=Tr[--Pr],Tr[Pr]=null;for(;e===sr;)sr=Me[--De],Me[De]=null,ft=Me[--De],Me[De]=null,dt=Me[--De],Me[De]=null}var Ae=null,Le=null,J=!1,Qe=null;function Qc(e,t){var r=Ue(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function ql(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ae=e,Le=It(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ae=e,Le=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=sr!==null?{id:dt,overflow:ft}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ue(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ae=e,Le=null,!0):!1;default:return!1}}function Di(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ui(e){if(J){var t=Le;if(t){var r=t;if(!ql(e,t)){if(Di(e))throw Error(S(418));t=It(r.nextSibling);var n=Ae;t&&ql(e,t)?Qc(n,r):(e.flags=e.flags&-4097|2,J=!1,Ae=e)}}else{if(Di(e))throw Error(S(418));e.flags=e.flags&-4097|2,J=!1,Ae=e}}}function Jl(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ae=e}function fs(e){if(e!==Ae)return!1;if(!J)return Jl(e),J=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ii(e.type,e.memoizedProps)),t&&(t=Le)){if(Di(e))throw Yc(),Error(S(418));for(;t;)Qc(e,t),t=It(t.nextSibling)}if(Jl(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(S(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Le=It(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Le=null}}else Le=Ae?It(e.stateNode.nextSibling):null;return!0}function Yc(){for(var e=Le;e;)e=It(e.nextSibling)}function zr(){Le=Ae=null,J=!1}function Ia(e){Qe===null?Qe=[e]:Qe.push(e)}var hm=yt.ReactCurrentBatchConfig;function ln(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(S(309));var n=r.stateNode}if(!n)throw Error(S(147,e));var s=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var l=s.refs;i===null?delete l[o]:l[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(S(284));if(!r._owner)throw Error(S(290,e))}return e}function hs(e,t){throw e=Object.prototype.toString.call(t),Error(S(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gl(e){var t=e._init;return t(e._payload)}function Xc(e){function t(m,h){if(e){var p=m.deletions;p===null?(m.deletions=[h],m.flags|=16):p.push(h)}}function r(m,h){if(!e)return null;for(;h!==null;)t(m,h),h=h.sibling;return null}function n(m,h){for(m=new Map;h!==null;)h.key!==null?m.set(h.key,h):m.set(h.index,h),h=h.sibling;return m}function s(m,h){return m=Dt(m,h),m.index=0,m.sibling=null,m}function o(m,h,p){return m.index=p,e?(p=m.alternate,p!==null?(p=p.index,p<h?(m.flags|=2,h):p):(m.flags|=2,h)):(m.flags|=1048576,h)}function i(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,h,p,v){return h===null||h.tag!==6?(h=ti(p,m.mode,v),h.return=m,h):(h=s(h,p),h.return=m,h)}function u(m,h,p,v){var k=p.type;return k===kr?d(m,h,p.props.children,v,p.key):h!==null&&(h.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===xt&&Gl(k)===h.type)?(v=s(h,p.props),v.ref=ln(m,h,p),v.return=m,v):(v=As(p.type,p.key,p.props,null,m.mode,v),v.ref=ln(m,h,p),v.return=m,v)}function c(m,h,p,v){return h===null||h.tag!==4||h.stateNode.containerInfo!==p.containerInfo||h.stateNode.implementation!==p.implementation?(h=ri(p,m.mode,v),h.return=m,h):(h=s(h,p.children||[]),h.return=m,h)}function d(m,h,p,v,k){return h===null||h.tag!==7?(h=rr(p,m.mode,v,k),h.return=m,h):(h=s(h,p),h.return=m,h)}function f(m,h,p){if(typeof h=="string"&&h!==""||typeof h=="number")return h=ti(""+h,m.mode,p),h.return=m,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case rs:return p=As(h.type,h.key,h.props,null,m.mode,p),p.ref=ln(m,null,h),p.return=m,p;case _r:return h=ri(h,m.mode,p),h.return=m,h;case xt:var v=h._init;return f(m,v(h._payload),p)}if(hn(h)||rn(h))return h=rr(h,m.mode,p,null),h.return=m,h;hs(m,h)}return null}function g(m,h,p,v){var k=h!==null?h.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return k!==null?null:l(m,h,""+p,v);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case rs:return p.key===k?u(m,h,p,v):null;case _r:return p.key===k?c(m,h,p,v):null;case xt:return k=p._init,g(m,h,k(p._payload),v)}if(hn(p)||rn(p))return k!==null?null:d(m,h,p,v,null);hs(m,p)}return null}function w(m,h,p,v,k){if(typeof v=="string"&&v!==""||typeof v=="number")return m=m.get(p)||null,l(h,m,""+v,k);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case rs:return m=m.get(v.key===null?p:v.key)||null,u(h,m,v,k);case _r:return m=m.get(v.key===null?p:v.key)||null,c(h,m,v,k);case xt:var x=v._init;return w(m,h,p,x(v._payload),k)}if(hn(v)||rn(v))return m=m.get(p)||null,d(h,m,v,k,null);hs(h,v)}return null}function y(m,h,p,v){for(var k=null,x=null,b=h,N=h=0,O=null;b!==null&&N<p.length;N++){b.index>N?(O=b,b=null):O=b.sibling;var j=g(m,b,p[N],v);if(j===null){b===null&&(b=O);break}e&&b&&j.alternate===null&&t(m,b),h=o(j,h,N),x===null?k=j:x.sibling=j,x=j,b=O}if(N===p.length)return r(m,b),J&&Jt(m,N),k;if(b===null){for(;N<p.length;N++)b=f(m,p[N],v),b!==null&&(h=o(b,h,N),x===null?k=b:x.sibling=b,x=b);return J&&Jt(m,N),k}for(b=n(m,b);N<p.length;N++)O=w(b,m,N,p[N],v),O!==null&&(e&&O.alternate!==null&&b.delete(O.key===null?N:O.key),h=o(O,h,N),x===null?k=O:x.sibling=O,x=O);return e&&b.forEach(function(A){return t(m,A)}),J&&Jt(m,N),k}function E(m,h,p,v){var k=rn(p);if(typeof k!="function")throw Error(S(150));if(p=k.call(p),p==null)throw Error(S(151));for(var x=k=null,b=h,N=h=0,O=null,j=p.next();b!==null&&!j.done;N++,j=p.next()){b.index>N?(O=b,b=null):O=b.sibling;var A=g(m,b,j.value,v);if(A===null){b===null&&(b=O);break}e&&b&&A.alternate===null&&t(m,b),h=o(A,h,N),x===null?k=A:x.sibling=A,x=A,b=O}if(j.done)return r(m,b),J&&Jt(m,N),k;if(b===null){for(;!j.done;N++,j=p.next())j=f(m,j.value,v),j!==null&&(h=o(j,h,N),x===null?k=j:x.sibling=j,x=j);return J&&Jt(m,N),k}for(b=n(m,b);!j.done;N++,j=p.next())j=w(b,m,N,j.value,v),j!==null&&(e&&j.alternate!==null&&b.delete(j.key===null?N:j.key),h=o(j,h,N),x===null?k=j:x.sibling=j,x=j);return e&&b.forEach(function(ue){return t(m,ue)}),J&&Jt(m,N),k}function _(m,h,p,v){if(typeof p=="object"&&p!==null&&p.type===kr&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case rs:e:{for(var k=p.key,x=h;x!==null;){if(x.key===k){if(k=p.type,k===kr){if(x.tag===7){r(m,x.sibling),h=s(x,p.props.children),h.return=m,m=h;break e}}else if(x.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===xt&&Gl(k)===x.type){r(m,x.sibling),h=s(x,p.props),h.ref=ln(m,x,p),h.return=m,m=h;break e}r(m,x);break}else t(m,x);x=x.sibling}p.type===kr?(h=rr(p.props.children,m.mode,v,p.key),h.return=m,m=h):(v=As(p.type,p.key,p.props,null,m.mode,v),v.ref=ln(m,h,p),v.return=m,m=v)}return i(m);case _r:e:{for(x=p.key;h!==null;){if(h.key===x)if(h.tag===4&&h.stateNode.containerInfo===p.containerInfo&&h.stateNode.implementation===p.implementation){r(m,h.sibling),h=s(h,p.children||[]),h.return=m,m=h;break e}else{r(m,h);break}else t(m,h);h=h.sibling}h=ri(p,m.mode,v),h.return=m,m=h}return i(m);case xt:return x=p._init,_(m,h,x(p._payload),v)}if(hn(p))return y(m,h,p,v);if(rn(p))return E(m,h,p,v);hs(m,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,h!==null&&h.tag===6?(r(m,h.sibling),h=s(h,p),h.return=m,m=h):(r(m,h),h=ti(p,m.mode,v),h.return=m,m=h),i(m)):r(m,h)}return _}var Br=Xc(!0),Zc=Xc(!1),qs=Bt(null),Js=null,jr=null,$a=null;function Ra(){$a=jr=Js=null}function Ma(e){var t=qs.current;K(qs),e._currentValue=t}function Fi(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Mr(e,t){Js=e,$a=jr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ce=!0),e.firstContext=null)}function Be(e){var t=e._currentValue;if($a!==e)if(e={context:e,memoizedValue:t,next:null},jr===null){if(Js===null)throw Error(S(308));jr=e,Js.dependencies={lanes:0,firstContext:e}}else jr=jr.next=e;return t}var Zt=null;function Da(e){Zt===null?Zt=[e]:Zt.push(e)}function ed(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Da(t)):(r.next=s.next,s.next=r),t.interleaved=r,gt(e,n)}function gt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var St=!1;function Ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function td(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ht(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $t(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,U&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,gt(e,r)}return s=n.interleaved,s===null?(t.next=t,Da(n)):(t.next=s.next,s.next=t),n.interleaved=t,gt(e,r)}function Cs(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Sa(e,r)}}function Ql(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=i:o=o.next=i,r=r.next}while(r!==null);o===null?s=o=t:o=o.next=t}else s=o=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Gs(e,t,r,n){var s=e.updateQueue;St=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,i===null?o=c:i.next=c,i=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(o!==null){var f=s.baseState;i=0,d=c=u=null,l=o;do{var g=l.lane,w=l.eventTime;if((n&g)===g){d!==null&&(d=d.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,E=l;switch(g=t,w=r,E.tag){case 1:if(y=E.payload,typeof y=="function"){f=y.call(w,f,g);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=E.payload,g=typeof y=="function"?y.call(w,f,g):y,g==null)break e;f=X({},f,g);break e;case 2:St=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else w={eventTime:w,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=w,u=f):d=d.next=w,i|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(d===null&&(u=f),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);ir|=i,e.lanes=i,e.memoizedState=f}}function Yl(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(S(191,s));s.call(n)}}}var Qn={},st=Bt(Qn),Un=Bt(Qn),Fn=Bt(Qn);function er(e){if(e===Qn)throw Error(S(174));return e}function Fa(e,t){switch(W(Fn,t),W(Un,e),W(st,Qn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ei(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ei(t,e)}K(st),W(st,t)}function Wr(){K(st),K(Un),K(Fn)}function rd(e){er(Fn.current);var t=er(st.current),r=Ei(t,e.type);t!==r&&(W(Un,e),W(st,r))}function za(e){Un.current===e&&(K(st),K(Un))}var Q=Bt(0);function Qs(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Go=[];function Ba(){for(var e=0;e<Go.length;e++)Go[e]._workInProgressVersionPrimary=null;Go.length=0}var Ts=yt.ReactCurrentDispatcher,Qo=yt.ReactCurrentBatchConfig,or=0,Y=null,se=null,ae=null,Ys=!1,kn=!1,zn=0,mm=0;function me(){throw Error(S(321))}function Wa(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ze(e[r],t[r]))return!1;return!0}function Ha(e,t,r,n,s,o){if(or=o,Y=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ts.current=e===null||e.memoizedState===null?ym:wm,e=r(n,s),kn){o=0;do{if(kn=!1,zn=0,25<=o)throw Error(S(301));o+=1,ae=se=null,t.updateQueue=null,Ts.current=Em,e=r(n,s)}while(kn)}if(Ts.current=Xs,t=se!==null&&se.next!==null,or=0,ae=se=Y=null,Ys=!1,t)throw Error(S(300));return e}function Va(){var e=zn!==0;return zn=0,e}function tt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ae===null?Y.memoizedState=ae=e:ae=ae.next=e,ae}function We(){if(se===null){var e=Y.alternate;e=e!==null?e.memoizedState:null}else e=se.next;var t=ae===null?Y.memoizedState:ae.next;if(t!==null)ae=t,se=e;else{if(e===null)throw Error(S(310));se=e,e={memoizedState:se.memoizedState,baseState:se.baseState,baseQueue:se.baseQueue,queue:se.queue,next:null},ae===null?Y.memoizedState=ae=e:ae=ae.next=e}return ae}function Bn(e,t){return typeof t=="function"?t(e):t}function Yo(e){var t=We(),r=t.queue;if(r===null)throw Error(S(311));r.lastRenderedReducer=e;var n=se,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var l=i=null,u=null,c=o;do{var d=c.lane;if((or&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=f,i=n):u=u.next=f,Y.lanes|=d,ir|=d}c=c.next}while(c!==null&&c!==o);u===null?i=n:u.next=l,Ze(n,t.memoizedState)||(Ce=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=u,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do o=s.lane,Y.lanes|=o,ir|=o,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Xo(e){var t=We(),r=t.queue;if(r===null)throw Error(S(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,o=t.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do o=e(o,i.action),i=i.next;while(i!==s);Ze(o,t.memoizedState)||(Ce=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function nd(){}function sd(e,t){var r=Y,n=We(),s=t(),o=!Ze(n.memoizedState,s);if(o&&(n.memoizedState=s,Ce=!0),n=n.queue,Ka(ad.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||ae!==null&&ae.memoizedState.tag&1){if(r.flags|=2048,Wn(9,id.bind(null,r,n,s,t),void 0,null),le===null)throw Error(S(349));or&30||od(r,t,s)}return s}function od(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Y.updateQueue,t===null?(t={lastEffect:null,stores:null},Y.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function id(e,t,r,n){t.value=r,t.getSnapshot=n,ld(t)&&ud(e)}function ad(e,t,r){return r(function(){ld(t)&&ud(e)})}function ld(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ze(e,r)}catch{return!0}}function ud(e){var t=gt(e,1);t!==null&&Xe(t,e,1,-1)}function Xl(e){var t=tt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bn,lastRenderedState:e},t.queue=e,e=e.dispatch=vm.bind(null,Y,e),[t.memoizedState,e]}function Wn(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Y.updateQueue,t===null?(t={lastEffect:null,stores:null},Y.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function cd(){return We().memoizedState}function Ps(e,t,r,n){var s=tt();Y.flags|=e,s.memoizedState=Wn(1|t,r,void 0,n===void 0?null:n)}function ho(e,t,r,n){var s=We();n=n===void 0?null:n;var o=void 0;if(se!==null){var i=se.memoizedState;if(o=i.destroy,n!==null&&Wa(n,i.deps)){s.memoizedState=Wn(t,r,o,n);return}}Y.flags|=e,s.memoizedState=Wn(1|t,r,o,n)}function Zl(e,t){return Ps(8390656,8,e,t)}function Ka(e,t){return ho(2048,8,e,t)}function dd(e,t){return ho(4,2,e,t)}function fd(e,t){return ho(4,4,e,t)}function hd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function md(e,t,r){return r=r!=null?r.concat([e]):null,ho(4,4,hd.bind(null,t,e),r)}function qa(){}function pd(e,t){var r=We();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Wa(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function gd(e,t){var r=We();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Wa(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function vd(e,t,r){return or&21?(Ze(r,t)||(r=kc(),Y.lanes|=r,ir|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ce=!0),e.memoizedState=r)}function pm(e,t){var r=F;F=r!==0&&4>r?r:4,e(!0);var n=Qo.transition;Qo.transition={};try{e(!1),t()}finally{F=r,Qo.transition=n}}function yd(){return We().memoizedState}function gm(e,t,r){var n=Mt(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},wd(e))Ed(t,r);else if(r=ed(e,t,r,n),r!==null){var s=_e();Xe(r,e,n,s),_d(r,t,n)}}function vm(e,t,r){var n=Mt(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(wd(e))Ed(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,r);if(s.hasEagerState=!0,s.eagerState=l,Ze(l,i)){var u=t.interleaved;u===null?(s.next=s,Da(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}r=ed(e,t,s,n),r!==null&&(s=_e(),Xe(r,e,n,s),_d(r,t,n))}}function wd(e){var t=e.alternate;return e===Y||t!==null&&t===Y}function Ed(e,t){kn=Ys=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function _d(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Sa(e,r)}}var Xs={readContext:Be,useCallback:me,useContext:me,useEffect:me,useImperativeHandle:me,useInsertionEffect:me,useLayoutEffect:me,useMemo:me,useReducer:me,useRef:me,useState:me,useDebugValue:me,useDeferredValue:me,useTransition:me,useMutableSource:me,useSyncExternalStore:me,useId:me,unstable_isNewReconciler:!1},ym={readContext:Be,useCallback:function(e,t){return tt().memoizedState=[e,t===void 0?null:t],e},useContext:Be,useEffect:Zl,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ps(4194308,4,hd.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ps(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ps(4,2,e,t)},useMemo:function(e,t){var r=tt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=tt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=gm.bind(null,Y,e),[n.memoizedState,e]},useRef:function(e){var t=tt();return e={current:e},t.memoizedState=e},useState:Xl,useDebugValue:qa,useDeferredValue:function(e){return tt().memoizedState=e},useTransition:function(){var e=Xl(!1),t=e[0];return e=pm.bind(null,e[1]),tt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Y,s=tt();if(J){if(r===void 0)throw Error(S(407));r=r()}else{if(r=t(),le===null)throw Error(S(349));or&30||od(n,t,r)}s.memoizedState=r;var o={value:r,getSnapshot:t};return s.queue=o,Zl(ad.bind(null,n,o,e),[e]),n.flags|=2048,Wn(9,id.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=tt(),t=le.identifierPrefix;if(J){var r=ft,n=dt;r=(n&~(1<<32-Ye(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=zn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=mm++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},wm={readContext:Be,useCallback:pd,useContext:Be,useEffect:Ka,useImperativeHandle:md,useInsertionEffect:dd,useLayoutEffect:fd,useMemo:gd,useReducer:Yo,useRef:cd,useState:function(){return Yo(Bn)},useDebugValue:qa,useDeferredValue:function(e){var t=We();return vd(t,se.memoizedState,e)},useTransition:function(){var e=Yo(Bn)[0],t=We().memoizedState;return[e,t]},useMutableSource:nd,useSyncExternalStore:sd,useId:yd,unstable_isNewReconciler:!1},Em={readContext:Be,useCallback:pd,useContext:Be,useEffect:Ka,useImperativeHandle:md,useInsertionEffect:dd,useLayoutEffect:fd,useMemo:gd,useReducer:Xo,useRef:cd,useState:function(){return Xo(Bn)},useDebugValue:qa,useDeferredValue:function(e){var t=We();return se===null?t.memoizedState=e:vd(t,se.memoizedState,e)},useTransition:function(){var e=Xo(Bn)[0],t=We().memoizedState;return[e,t]},useMutableSource:nd,useSyncExternalStore:sd,useId:yd,unstable_isNewReconciler:!1};function qe(e,t){if(e&&e.defaultProps){t=X({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function zi(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:X({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var mo={isMounted:function(e){return(e=e._reactInternals)?cr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=_e(),s=Mt(e),o=ht(n,s);o.payload=t,r!=null&&(o.callback=r),t=$t(e,o,s),t!==null&&(Xe(t,e,s,n),Cs(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=_e(),s=Mt(e),o=ht(n,s);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=$t(e,o,s),t!==null&&(Xe(t,e,s,n),Cs(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=_e(),n=Mt(e),s=ht(r,n);s.tag=2,t!=null&&(s.callback=t),t=$t(e,s,n),t!==null&&(Xe(t,e,n,r),Cs(t,e,n))}};function eu(e,t,r,n,s,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,i):t.prototype&&t.prototype.isPureReactComponent?!$n(r,n)||!$n(s,o):!0}function kd(e,t,r){var n=!1,s=Ft,o=t.contextType;return typeof o=="object"&&o!==null?o=Be(o):(s=Pe(t)?nr:ye.current,n=t.contextTypes,o=(n=n!=null)?Fr(e,s):Ft),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=mo,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function tu(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function Bi(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Ua(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Be(o):(o=Pe(t)?nr:ye.current,s.context=Fr(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(zi(e,t,o,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&mo.enqueueReplaceState(s,s.state,null),Gs(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Hr(e,t){try{var r="",n=t;do r+=Jf(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Zo(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Wi(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var _m=typeof WeakMap=="function"?WeakMap:Map;function xd(e,t,r){r=ht(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){eo||(eo=!0,Zi=n),Wi(e,t)},r}function Sd(e,t,r){r=ht(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Wi(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Wi(e,t),typeof n!="function"&&(Rt===null?Rt=new Set([this]):Rt.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function ru(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new _m;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=$m.bind(null,e,t,r),t.then(e,e))}function nu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function su(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ht(-1,1),t.tag=2,$t(r,t,1))),r.lanes|=1),e)}var km=yt.ReactCurrentOwner,Ce=!1;function Ee(e,t,r,n){t.child=e===null?Zc(t,null,r,n):Br(t,e.child,r,n)}function ou(e,t,r,n,s){r=r.render;var o=t.ref;return Mr(t,s),n=Ha(e,t,r,n,o,s),r=Va(),e!==null&&!Ce?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,vt(e,t,s)):(J&&r&&La(t),t.flags|=1,Ee(e,t,n,s),t.child)}function iu(e,t,r,n,s){if(e===null){var o=r.type;return typeof o=="function"&&!tl(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,bd(e,t,o,n,s)):(e=As(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var i=o.memoizedProps;if(r=r.compare,r=r!==null?r:$n,r(i,n)&&e.ref===t.ref)return vt(e,t,s)}return t.flags|=1,e=Dt(o,n),e.ref=t.ref,e.return=t,t.child=e}function bd(e,t,r,n,s){if(e!==null){var o=e.memoizedProps;if($n(o,n)&&e.ref===t.ref)if(Ce=!1,t.pendingProps=n=o,(e.lanes&s)!==0)e.flags&131072&&(Ce=!0);else return t.lanes=e.lanes,vt(e,t,s)}return Hi(e,t,r,n,s)}function Nd(e,t,r){var n=t.pendingProps,s=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},W(Lr,Oe),Oe|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,W(Lr,Oe),Oe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,W(Lr,Oe),Oe|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,W(Lr,Oe),Oe|=n;return Ee(e,t,s,r),t.child}function Cd(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Hi(e,t,r,n,s){var o=Pe(r)?nr:ye.current;return o=Fr(t,o),Mr(t,s),r=Ha(e,t,r,n,o,s),n=Va(),e!==null&&!Ce?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,vt(e,t,s)):(J&&n&&La(t),t.flags|=1,Ee(e,t,r,s),t.child)}function au(e,t,r,n,s){if(Pe(r)){var o=!0;Hs(t)}else o=!1;if(Mr(t,s),t.stateNode===null)js(e,t),kd(t,r,n),Bi(t,r,n,s),n=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var u=i.context,c=r.contextType;typeof c=="object"&&c!==null?c=Be(c):(c=Pe(r)?nr:ye.current,c=Fr(t,c));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||u!==c)&&tu(t,i,n,c),St=!1;var g=t.memoizedState;i.state=g,Gs(t,n,i,s),u=t.memoizedState,l!==n||g!==u||Te.current||St?(typeof d=="function"&&(zi(t,r,d,n),u=t.memoizedState),(l=St||eu(t,r,l,n,g,u,c))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=u),i.props=n,i.state=u,i.context=c,n=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,td(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:qe(t.type,l),i.props=c,f=t.pendingProps,g=i.context,u=r.contextType,typeof u=="object"&&u!==null?u=Be(u):(u=Pe(r)?nr:ye.current,u=Fr(t,u));var w=r.getDerivedStateFromProps;(d=typeof w=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==f||g!==u)&&tu(t,i,n,u),St=!1,g=t.memoizedState,i.state=g,Gs(t,n,i,s);var y=t.memoizedState;l!==f||g!==y||Te.current||St?(typeof w=="function"&&(zi(t,r,w,n),y=t.memoizedState),(c=St||eu(t,r,c,n,g,y,u)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,y,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,y,u)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),i.props=n,i.state=y,i.context=u,n=c):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),n=!1)}return Vi(e,t,r,n,o,s)}function Vi(e,t,r,n,s,o){Cd(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return s&&Kl(t,r,!1),vt(e,t,o);n=t.stateNode,km.current=t;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=Br(t,e.child,null,o),t.child=Br(t,null,l,o)):Ee(e,t,l,o),t.memoizedState=n.state,s&&Kl(t,r,!0),t.child}function Td(e){var t=e.stateNode;t.pendingContext?Vl(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vl(e,t.context,!1),Fa(e,t.containerInfo)}function lu(e,t,r,n,s){return zr(),Ia(s),t.flags|=256,Ee(e,t,r,n),t.child}var Ki={dehydrated:null,treeContext:null,retryLane:0};function qi(e){return{baseLanes:e,cachePool:null,transitions:null}}function Pd(e,t,r){var n=t.pendingProps,s=Q.current,o=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),W(Q,s&1),e===null)return Ui(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,o?(n=t.mode,o=t.child,i={mode:"hidden",children:i},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=vo(i,n,0,null),e=rr(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=qi(r),t.memoizedState=Ki,e):Ja(t,i));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return xm(e,t,i,n,l,s,r);if(o){o=n.fallback,i=t.mode,s=e.child,l=s.sibling;var u={mode:"hidden",children:n.children};return!(i&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=u,t.deletions=null):(n=Dt(s,u),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=Dt(l,o):(o=rr(o,i,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,i=e.child.memoizedState,i=i===null?qi(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~r,t.memoizedState=Ki,n}return o=e.child,e=o.sibling,n=Dt(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Ja(e,t){return t=vo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ms(e,t,r,n){return n!==null&&Ia(n),Br(t,e.child,null,r),e=Ja(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xm(e,t,r,n,s,o,i){if(r)return t.flags&256?(t.flags&=-257,n=Zo(Error(S(422))),ms(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,s=t.mode,n=vo({mode:"visible",children:n.children},s,0,null),o=rr(o,s,i,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Br(t,e.child,null,i),t.child.memoizedState=qi(i),t.memoizedState=Ki,o);if(!(t.mode&1))return ms(e,t,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,o=Error(S(419)),n=Zo(o,n,void 0),ms(e,t,i,n)}if(l=(i&e.childLanes)!==0,Ce||l){if(n=le,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,gt(e,s),Xe(n,e,s,-1))}return el(),n=Zo(Error(S(421))),ms(e,t,i,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Rm.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,Le=It(s.nextSibling),Ae=t,J=!0,Qe=null,e!==null&&(Me[De++]=dt,Me[De++]=ft,Me[De++]=sr,dt=e.id,ft=e.overflow,sr=t),t=Ja(t,n.children),t.flags|=4096,t)}function uu(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Fi(e.return,t,r)}function ei(e,t,r,n,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function jd(e,t,r){var n=t.pendingProps,s=n.revealOrder,o=n.tail;if(Ee(e,t,n.children,r),n=Q.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uu(e,r,t);else if(e.tag===19)uu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(W(Q,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Qs(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),ei(t,!1,s,r,o);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Qs(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}ei(t,!0,r,null,o);break;case"together":ei(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function js(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function vt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ir|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(S(153));if(t.child!==null){for(e=t.child,r=Dt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Dt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Sm(e,t,r){switch(t.tag){case 3:Td(t),zr();break;case 5:rd(t);break;case 1:Pe(t.type)&&Hs(t);break;case 4:Fa(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;W(qs,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(W(Q,Q.current&1),t.flags|=128,null):r&t.child.childLanes?Pd(e,t,r):(W(Q,Q.current&1),e=vt(e,t,r),e!==null?e.sibling:null);W(Q,Q.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return jd(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),W(Q,Q.current),n)break;return null;case 22:case 23:return t.lanes=0,Nd(e,t,r)}return vt(e,t,r)}var Od,Ji,Ld,Ad;Od=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ji=function(){};Ld=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,er(st.current);var o=null;switch(r){case"input":s=gi(e,s),n=gi(e,n),o=[];break;case"select":s=X({},s,{value:void 0}),n=X({},n,{value:void 0}),o=[];break;case"textarea":s=wi(e,s),n=wi(e,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Bs)}_i(r,n);var i;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Tn.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in n){var u=n[c];if(l=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(i in l)!l.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in u)u.hasOwnProperty(i)&&l[i]!==u[i]&&(r||(r={}),r[i]=u[i])}else r||(o||(o=[]),o.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Tn.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&V("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}r&&(o=o||[]).push("style",r);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};Ad=function(e,t,r,n){r!==n&&(t.flags|=4)};function un(e,t){if(!J)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function pe(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function bm(e,t,r){var n=t.pendingProps;switch(Aa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pe(t),null;case 1:return Pe(t.type)&&Ws(),pe(t),null;case 3:return n=t.stateNode,Wr(),K(Te),K(ye),Ba(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(fs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qe!==null&&(ra(Qe),Qe=null))),Ji(e,t),pe(t),null;case 5:za(t);var s=er(Fn.current);if(r=t.type,e!==null&&t.stateNode!=null)Ld(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(S(166));return pe(t),null}if(e=er(st.current),fs(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[rt]=t,n[Dn]=o,e=(t.mode&1)!==0,r){case"dialog":V("cancel",n),V("close",n);break;case"iframe":case"object":case"embed":V("load",n);break;case"video":case"audio":for(s=0;s<pn.length;s++)V(pn[s],n);break;case"source":V("error",n);break;case"img":case"image":case"link":V("error",n),V("load",n);break;case"details":V("toggle",n);break;case"input":yl(n,o),V("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},V("invalid",n);break;case"textarea":El(n,o),V("invalid",n)}_i(r,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?n.textContent!==l&&(o.suppressHydrationWarning!==!0&&ds(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&ds(n.textContent,l,e),s=["children",""+l]):Tn.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&V("scroll",n)}switch(r){case"input":ns(n),wl(n,o,!0);break;case"textarea":ns(n),_l(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Bs)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ac(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[rt]=t,e[Dn]=n,Od(e,t,!1,!1),t.stateNode=e;e:{switch(i=ki(r,n),r){case"dialog":V("cancel",e),V("close",e),s=n;break;case"iframe":case"object":case"embed":V("load",e),s=n;break;case"video":case"audio":for(s=0;s<pn.length;s++)V(pn[s],e);s=n;break;case"source":V("error",e),s=n;break;case"img":case"image":case"link":V("error",e),V("load",e),s=n;break;case"details":V("toggle",e),s=n;break;case"input":yl(e,n),s=gi(e,n),V("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=X({},n,{value:void 0}),V("invalid",e);break;case"textarea":El(e,n),s=wi(e,n),V("invalid",e);break;default:s=n}_i(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?cc(e,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&lc(e,u)):o==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Pn(e,u):typeof u=="number"&&Pn(e,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Tn.hasOwnProperty(o)?u!=null&&o==="onScroll"&&V("scroll",e):u!=null&&ya(e,o,u,i))}switch(r){case"input":ns(e),wl(e,n,!1);break;case"textarea":ns(e),_l(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ut(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Ar(e,!!n.multiple,o,!1):n.defaultValue!=null&&Ar(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Bs)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pe(t),null;case 6:if(e&&t.stateNode!=null)Ad(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(S(166));if(r=er(Fn.current),er(st.current),fs(t)){if(n=t.stateNode,r=t.memoizedProps,n[rt]=t,(o=n.nodeValue!==r)&&(e=Ae,e!==null))switch(e.tag){case 3:ds(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ds(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[rt]=t,t.stateNode=n}return pe(t),null;case 13:if(K(Q),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(J&&Le!==null&&t.mode&1&&!(t.flags&128))Yc(),zr(),t.flags|=98560,o=!1;else if(o=fs(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(S(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(S(317));o[rt]=t}else zr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pe(t),o=!1}else Qe!==null&&(ra(Qe),Qe=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Q.current&1?oe===0&&(oe=3):el())),t.updateQueue!==null&&(t.flags|=4),pe(t),null);case 4:return Wr(),Ji(e,t),e===null&&Rn(t.stateNode.containerInfo),pe(t),null;case 10:return Ma(t.type._context),pe(t),null;case 17:return Pe(t.type)&&Ws(),pe(t),null;case 19:if(K(Q),o=t.memoizedState,o===null)return pe(t),null;if(n=(t.flags&128)!==0,i=o.rendering,i===null)if(n)un(o,!1);else{if(oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Qs(e),i!==null){for(t.flags|=128,un(o,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return W(Q,Q.current&1|2),t.child}e=e.sibling}o.tail!==null&&ee()>Vr&&(t.flags|=128,n=!0,un(o,!1),t.lanes=4194304)}else{if(!n)if(e=Qs(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),un(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!J)return pe(t),null}else 2*ee()-o.renderingStartTime>Vr&&r!==1073741824&&(t.flags|=128,n=!0,un(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(r=o.last,r!==null?r.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ee(),t.sibling=null,r=Q.current,W(Q,n?r&1|2:r&1),t):(pe(t),null);case 22:case 23:return Za(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Oe&1073741824&&(pe(t),t.subtreeFlags&6&&(t.flags|=8192)):pe(t),null;case 24:return null;case 25:return null}throw Error(S(156,t.tag))}function Nm(e,t){switch(Aa(t),t.tag){case 1:return Pe(t.type)&&Ws(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wr(),K(Te),K(ye),Ba(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return za(t),null;case 13:if(K(Q),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(S(340));zr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return K(Q),null;case 4:return Wr(),null;case 10:return Ma(t.type._context),null;case 22:case 23:return Za(),null;case 24:return null;default:return null}}var ps=!1,ve=!1,Cm=typeof WeakSet=="function"?WeakSet:Set,P=null;function Or(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Z(e,t,n)}else r.current=null}function Gi(e,t,r){try{r()}catch(n){Z(e,t,n)}}var cu=!1;function Tm(e,t){if(Li=Us,e=Dc(),Oa(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var i=0,l=-1,u=-1,c=0,d=0,f=e,g=null;t:for(;;){for(var w;f!==r||s!==0&&f.nodeType!==3||(l=i+s),f!==o||n!==0&&f.nodeType!==3||(u=i+n),f.nodeType===3&&(i+=f.nodeValue.length),(w=f.firstChild)!==null;)g=f,f=w;for(;;){if(f===e)break t;if(g===r&&++c===s&&(l=i),g===o&&++d===n&&(u=i),(w=f.nextSibling)!==null)break;f=g,g=f.parentNode}f=w}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ai={focusedElem:e,selectionRange:r},Us=!1,P=t;P!==null;)if(t=P,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,P=e;else for(;P!==null;){t=P;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var E=y.memoizedProps,_=y.memoizedState,m=t.stateNode,h=m.getSnapshotBeforeUpdate(t.elementType===t.type?E:qe(t.type,E),_);m.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(S(163))}}catch(v){Z(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,P=e;break}P=t.return}return y=cu,cu=!1,y}function xn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Gi(t,r,o)}s=s.next}while(s!==n)}}function po(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Qi(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Id(e){var t=e.alternate;t!==null&&(e.alternate=null,Id(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rt],delete t[Dn],delete t[Ri],delete t[cm],delete t[dm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $d(e){return e.tag===5||e.tag===3||e.tag===4}function du(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$d(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yi(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Bs));else if(n!==4&&(e=e.child,e!==null))for(Yi(e,t,r),e=e.sibling;e!==null;)Yi(e,t,r),e=e.sibling}function Xi(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Xi(e,t,r),e=e.sibling;e!==null;)Xi(e,t,r),e=e.sibling}var ce=null,Je=!1;function Et(e,t,r){for(r=r.child;r!==null;)Rd(e,t,r),r=r.sibling}function Rd(e,t,r){if(nt&&typeof nt.onCommitFiberUnmount=="function")try{nt.onCommitFiberUnmount(io,r)}catch{}switch(r.tag){case 5:ve||Or(r,t);case 6:var n=ce,s=Je;ce=null,Et(e,t,r),ce=n,Je=s,ce!==null&&(Je?(e=ce,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ce.removeChild(r.stateNode));break;case 18:ce!==null&&(Je?(e=ce,r=r.stateNode,e.nodeType===8?qo(e.parentNode,r):e.nodeType===1&&qo(e,r),An(e)):qo(ce,r.stateNode));break;case 4:n=ce,s=Je,ce=r.stateNode.containerInfo,Je=!0,Et(e,t,r),ce=n,Je=s;break;case 0:case 11:case 14:case 15:if(!ve&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Gi(r,t,i),s=s.next}while(s!==n)}Et(e,t,r);break;case 1:if(!ve&&(Or(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Z(r,t,l)}Et(e,t,r);break;case 21:Et(e,t,r);break;case 22:r.mode&1?(ve=(n=ve)||r.memoizedState!==null,Et(e,t,r),ve=n):Et(e,t,r);break;default:Et(e,t,r)}}function fu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Cm),t.forEach(function(n){var s=Mm.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Ve(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:ce=l.stateNode,Je=!1;break e;case 3:ce=l.stateNode.containerInfo,Je=!0;break e;case 4:ce=l.stateNode.containerInfo,Je=!0;break e}l=l.return}if(ce===null)throw Error(S(160));Rd(o,i,s),ce=null,Je=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Z(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Md(t,e),t=t.sibling}function Md(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ve(t,e),et(e),n&4){try{xn(3,e,e.return),po(3,e)}catch(E){Z(e,e.return,E)}try{xn(5,e,e.return)}catch(E){Z(e,e.return,E)}}break;case 1:Ve(t,e),et(e),n&512&&r!==null&&Or(r,r.return);break;case 5:if(Ve(t,e),et(e),n&512&&r!==null&&Or(r,r.return),e.flags&32){var s=e.stateNode;try{Pn(s,"")}catch(E){Z(e,e.return,E)}}if(n&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,i=r!==null?r.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&oc(s,o),ki(l,i);var c=ki(l,o);for(i=0;i<u.length;i+=2){var d=u[i],f=u[i+1];d==="style"?cc(s,f):d==="dangerouslySetInnerHTML"?lc(s,f):d==="children"?Pn(s,f):ya(s,d,f,c)}switch(l){case"input":vi(s,o);break;case"textarea":ic(s,o);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var w=o.value;w!=null?Ar(s,!!o.multiple,w,!1):g!==!!o.multiple&&(o.defaultValue!=null?Ar(s,!!o.multiple,o.defaultValue,!0):Ar(s,!!o.multiple,o.multiple?[]:"",!1))}s[Dn]=o}catch(E){Z(e,e.return,E)}}break;case 6:if(Ve(t,e),et(e),n&4){if(e.stateNode===null)throw Error(S(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(E){Z(e,e.return,E)}}break;case 3:if(Ve(t,e),et(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{An(t.containerInfo)}catch(E){Z(e,e.return,E)}break;case 4:Ve(t,e),et(e);break;case 13:Ve(t,e),et(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Ya=ee())),n&4&&fu(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(ve=(c=ve)||d,Ve(t,e),ve=c):Ve(t,e),et(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(P=e,d=e.child;d!==null;){for(f=P=d;P!==null;){switch(g=P,w=g.child,g.tag){case 0:case 11:case 14:case 15:xn(4,g,g.return);break;case 1:Or(g,g.return);var y=g.stateNode;if(typeof y.componentWillUnmount=="function"){n=g,r=g.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(E){Z(n,r,E)}}break;case 5:Or(g,g.return);break;case 22:if(g.memoizedState!==null){mu(f);continue}}w!==null?(w.return=g,P=w):mu(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,c?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,u=f.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=uc("display",i))}catch(E){Z(e,e.return,E)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(E){Z(e,e.return,E)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ve(t,e),et(e),n&4&&fu(e);break;case 21:break;default:Ve(t,e),et(e)}}function et(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if($d(r)){var n=r;break e}r=r.return}throw Error(S(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Pn(s,""),n.flags&=-33);var o=du(e);Xi(e,o,s);break;case 3:case 4:var i=n.stateNode.containerInfo,l=du(e);Yi(e,l,i);break;default:throw Error(S(161))}}catch(u){Z(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Pm(e,t,r){P=e,Dd(e)}function Dd(e,t,r){for(var n=(e.mode&1)!==0;P!==null;){var s=P,o=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||ps;if(!i){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ve;l=ps;var c=ve;if(ps=i,(ve=u)&&!c)for(P=s;P!==null;)i=P,u=i.child,i.tag===22&&i.memoizedState!==null?pu(s):u!==null?(u.return=i,P=u):pu(s);for(;o!==null;)P=o,Dd(o),o=o.sibling;P=s,ps=l,ve=c}hu(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,P=o):hu(e)}}function hu(e){for(;P!==null;){var t=P;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ve||po(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ve)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:qe(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Yl(t,o,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Yl(t,i,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&An(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(S(163))}ve||t.flags&512&&Qi(t)}catch(g){Z(t,t.return,g)}}if(t===e){P=null;break}if(r=t.sibling,r!==null){r.return=t.return,P=r;break}P=t.return}}function mu(e){for(;P!==null;){var t=P;if(t===e){P=null;break}var r=t.sibling;if(r!==null){r.return=t.return,P=r;break}P=t.return}}function pu(e){for(;P!==null;){var t=P;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{po(4,t)}catch(u){Z(t,r,u)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(u){Z(t,s,u)}}var o=t.return;try{Qi(t)}catch(u){Z(t,o,u)}break;case 5:var i=t.return;try{Qi(t)}catch(u){Z(t,i,u)}}}catch(u){Z(t,t.return,u)}if(t===e){P=null;break}var l=t.sibling;if(l!==null){l.return=t.return,P=l;break}P=t.return}}var jm=Math.ceil,Zs=yt.ReactCurrentDispatcher,Ga=yt.ReactCurrentOwner,Fe=yt.ReactCurrentBatchConfig,U=0,le=null,ne=null,de=0,Oe=0,Lr=Bt(0),oe=0,Hn=null,ir=0,go=0,Qa=0,Sn=null,be=null,Ya=0,Vr=1/0,lt=null,eo=!1,Zi=null,Rt=null,gs=!1,jt=null,to=0,bn=0,ea=null,Os=-1,Ls=0;function _e(){return U&6?ee():Os!==-1?Os:Os=ee()}function Mt(e){return e.mode&1?U&2&&de!==0?de&-de:hm.transition!==null?(Ls===0&&(Ls=kc()),Ls):(e=F,e!==0||(e=window.event,e=e===void 0?16:Pc(e.type)),e):1}function Xe(e,t,r,n){if(50<bn)throw bn=0,ea=null,Error(S(185));qn(e,r,n),(!(U&2)||e!==le)&&(e===le&&(!(U&2)&&(go|=r),oe===4&&Ct(e,de)),je(e,n),r===1&&U===0&&!(t.mode&1)&&(Vr=ee()+500,fo&&Wt()))}function je(e,t){var r=e.callbackNode;hh(e,t);var n=Ds(e,e===le?de:0);if(n===0)r!==null&&Sl(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Sl(r),t===1)e.tag===0?fm(gu.bind(null,e)):Jc(gu.bind(null,e)),lm(function(){!(U&6)&&Wt()}),r=null;else{switch(xc(n)){case 1:r=xa;break;case 4:r=Ec;break;case 16:r=Ms;break;case 536870912:r=_c;break;default:r=Ms}r=Kd(r,Ud.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Ud(e,t){if(Os=-1,Ls=0,U&6)throw Error(S(327));var r=e.callbackNode;if(Dr()&&e.callbackNode!==r)return null;var n=Ds(e,e===le?de:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=ro(e,n);else{t=n;var s=U;U|=2;var o=zd();(le!==e||de!==t)&&(lt=null,Vr=ee()+500,tr(e,t));do try{Am();break}catch(l){Fd(e,l)}while(!0);Ra(),Zs.current=o,U=s,ne!==null?t=0:(le=null,de=0,t=oe)}if(t!==0){if(t===2&&(s=Ci(e),s!==0&&(n=s,t=ta(e,s))),t===1)throw r=Hn,tr(e,0),Ct(e,n),je(e,ee()),r;if(t===6)Ct(e,n);else{if(s=e.current.alternate,!(n&30)&&!Om(s)&&(t=ro(e,n),t===2&&(o=Ci(e),o!==0&&(n=o,t=ta(e,o))),t===1))throw r=Hn,tr(e,0),Ct(e,n),je(e,ee()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(S(345));case 2:Gt(e,be,lt);break;case 3:if(Ct(e,n),(n&130023424)===n&&(t=Ya+500-ee(),10<t)){if(Ds(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){_e(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=$i(Gt.bind(null,e,be,lt),t);break}Gt(e,be,lt);break;case 4:if(Ct(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var i=31-Ye(n);o=1<<i,i=t[i],i>s&&(s=i),n&=~o}if(n=s,n=ee()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*jm(n/1960))-n,10<n){e.timeoutHandle=$i(Gt.bind(null,e,be,lt),n);break}Gt(e,be,lt);break;case 5:Gt(e,be,lt);break;default:throw Error(S(329))}}}return je(e,ee()),e.callbackNode===r?Ud.bind(null,e):null}function ta(e,t){var r=Sn;return e.current.memoizedState.isDehydrated&&(tr(e,t).flags|=256),e=ro(e,t),e!==2&&(t=be,be=r,t!==null&&ra(t)),e}function ra(e){be===null?be=e:be.push.apply(be,e)}function Om(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!Ze(o(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ct(e,t){for(t&=~Qa,t&=~go,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ye(t),n=1<<r;e[r]=-1,t&=~n}}function gu(e){if(U&6)throw Error(S(327));Dr();var t=Ds(e,0);if(!(t&1))return je(e,ee()),null;var r=ro(e,t);if(e.tag!==0&&r===2){var n=Ci(e);n!==0&&(t=n,r=ta(e,n))}if(r===1)throw r=Hn,tr(e,0),Ct(e,t),je(e,ee()),r;if(r===6)throw Error(S(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gt(e,be,lt),je(e,ee()),null}function Xa(e,t){var r=U;U|=1;try{return e(t)}finally{U=r,U===0&&(Vr=ee()+500,fo&&Wt())}}function ar(e){jt!==null&&jt.tag===0&&!(U&6)&&Dr();var t=U;U|=1;var r=Fe.transition,n=F;try{if(Fe.transition=null,F=1,e)return e()}finally{F=n,Fe.transition=r,U=t,!(U&6)&&Wt()}}function Za(){Oe=Lr.current,K(Lr)}function tr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,am(r)),ne!==null)for(r=ne.return;r!==null;){var n=r;switch(Aa(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ws();break;case 3:Wr(),K(Te),K(ye),Ba();break;case 5:za(n);break;case 4:Wr();break;case 13:K(Q);break;case 19:K(Q);break;case 10:Ma(n.type._context);break;case 22:case 23:Za()}r=r.return}if(le=e,ne=e=Dt(e.current,null),de=Oe=t,oe=0,Hn=null,Qa=go=ir=0,be=Sn=null,Zt!==null){for(t=0;t<Zt.length;t++)if(r=Zt[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var i=o.next;o.next=s,n.next=i}r.pending=n}Zt=null}return e}function Fd(e,t){do{var r=ne;try{if(Ra(),Ts.current=Xs,Ys){for(var n=Y.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ys=!1}if(or=0,ae=se=Y=null,kn=!1,zn=0,Ga.current=null,r===null||r.return===null){oe=1,Hn=t,ne=null;break}e:{var o=e,i=r.return,l=r,u=t;if(t=de,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=nu(i);if(w!==null){w.flags&=-257,su(w,i,l,o,t),w.mode&1&&ru(o,c,t),t=w,u=c;var y=t.updateQueue;if(y===null){var E=new Set;E.add(u),t.updateQueue=E}else y.add(u);break e}else{if(!(t&1)){ru(o,c,t),el();break e}u=Error(S(426))}}else if(J&&l.mode&1){var _=nu(i);if(_!==null){!(_.flags&65536)&&(_.flags|=256),su(_,i,l,o,t),Ia(Hr(u,l));break e}}o=u=Hr(u,l),oe!==4&&(oe=2),Sn===null?Sn=[o]:Sn.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var m=xd(o,u,t);Ql(o,m);break e;case 1:l=u;var h=o.type,p=o.stateNode;if(!(o.flags&128)&&(typeof h.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Rt===null||!Rt.has(p)))){o.flags|=65536,t&=-t,o.lanes|=t;var v=Sd(o,l,t);Ql(o,v);break e}}o=o.return}while(o!==null)}Wd(r)}catch(k){t=k,ne===r&&r!==null&&(ne=r=r.return);continue}break}while(!0)}function zd(){var e=Zs.current;return Zs.current=Xs,e===null?Xs:e}function el(){(oe===0||oe===3||oe===2)&&(oe=4),le===null||!(ir&268435455)&&!(go&268435455)||Ct(le,de)}function ro(e,t){var r=U;U|=2;var n=zd();(le!==e||de!==t)&&(lt=null,tr(e,t));do try{Lm();break}catch(s){Fd(e,s)}while(!0);if(Ra(),U=r,Zs.current=n,ne!==null)throw Error(S(261));return le=null,de=0,oe}function Lm(){for(;ne!==null;)Bd(ne)}function Am(){for(;ne!==null&&!sh();)Bd(ne)}function Bd(e){var t=Vd(e.alternate,e,Oe);e.memoizedProps=e.pendingProps,t===null?Wd(e):ne=t,Ga.current=null}function Wd(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Nm(r,t),r!==null){r.flags&=32767,ne=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{oe=6,ne=null;return}}else if(r=bm(r,t,Oe),r!==null){ne=r;return}if(t=t.sibling,t!==null){ne=t;return}ne=t=e}while(t!==null);oe===0&&(oe=5)}function Gt(e,t,r){var n=F,s=Fe.transition;try{Fe.transition=null,F=1,Im(e,t,r,n)}finally{Fe.transition=s,F=n}return null}function Im(e,t,r,n){do Dr();while(jt!==null);if(U&6)throw Error(S(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(S(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(mh(e,o),e===le&&(ne=le=null,de=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||gs||(gs=!0,Kd(Ms,function(){return Dr(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Fe.transition,Fe.transition=null;var i=F;F=1;var l=U;U|=4,Ga.current=null,Tm(e,r),Md(r,e),em(Ai),Us=!!Li,Ai=Li=null,e.current=r,Pm(r),oh(),U=l,F=i,Fe.transition=o}else e.current=r;if(gs&&(gs=!1,jt=e,to=s),o=e.pendingLanes,o===0&&(Rt=null),lh(r.stateNode),je(e,ee()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(eo)throw eo=!1,e=Zi,Zi=null,e;return to&1&&e.tag!==0&&Dr(),o=e.pendingLanes,o&1?e===ea?bn++:(bn=0,ea=e):bn=0,Wt(),null}function Dr(){if(jt!==null){var e=xc(to),t=Fe.transition,r=F;try{if(Fe.transition=null,F=16>e?16:e,jt===null)var n=!1;else{if(e=jt,jt=null,to=0,U&6)throw Error(S(331));var s=U;for(U|=4,P=e.current;P!==null;){var o=P,i=o.child;if(P.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(P=c;P!==null;){var d=P;switch(d.tag){case 0:case 11:case 15:xn(8,d,o)}var f=d.child;if(f!==null)f.return=d,P=f;else for(;P!==null;){d=P;var g=d.sibling,w=d.return;if(Id(d),d===c){P=null;break}if(g!==null){g.return=w,P=g;break}P=w}}}var y=o.alternate;if(y!==null){var E=y.child;if(E!==null){y.child=null;do{var _=E.sibling;E.sibling=null,E=_}while(E!==null)}}P=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,P=i;else e:for(;P!==null;){if(o=P,o.flags&2048)switch(o.tag){case 0:case 11:case 15:xn(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,P=m;break e}P=o.return}}var h=e.current;for(P=h;P!==null;){i=P;var p=i.child;if(i.subtreeFlags&2064&&p!==null)p.return=i,P=p;else e:for(i=h;P!==null;){if(l=P,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:po(9,l)}}catch(k){Z(l,l.return,k)}if(l===i){P=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,P=v;break e}P=l.return}}if(U=s,Wt(),nt&&typeof nt.onPostCommitFiberRoot=="function")try{nt.onPostCommitFiberRoot(io,e)}catch{}n=!0}return n}finally{F=r,Fe.transition=t}}return!1}function vu(e,t,r){t=Hr(r,t),t=xd(e,t,1),e=$t(e,t,1),t=_e(),e!==null&&(qn(e,1,t),je(e,t))}function Z(e,t,r){if(e.tag===3)vu(e,e,r);else for(;t!==null;){if(t.tag===3){vu(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Rt===null||!Rt.has(n))){e=Hr(r,e),e=Sd(t,e,1),t=$t(t,e,1),e=_e(),t!==null&&(qn(t,1,e),je(t,e));break}}t=t.return}}function $m(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=_e(),e.pingedLanes|=e.suspendedLanes&r,le===e&&(de&r)===r&&(oe===4||oe===3&&(de&130023424)===de&&500>ee()-Ya?tr(e,0):Qa|=r),je(e,t)}function Hd(e,t){t===0&&(e.mode&1?(t=is,is<<=1,!(is&130023424)&&(is=4194304)):t=1);var r=_e();e=gt(e,t),e!==null&&(qn(e,t,r),je(e,r))}function Rm(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Hd(e,r)}function Mm(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(S(314))}n!==null&&n.delete(t),Hd(e,r)}var Vd;Vd=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Te.current)Ce=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ce=!1,Sm(e,t,r);Ce=!!(e.flags&131072)}else Ce=!1,J&&t.flags&1048576&&Gc(t,Ks,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;js(e,t),e=t.pendingProps;var s=Fr(t,ye.current);Mr(t,r),s=Ha(null,t,n,e,s,r);var o=Va();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pe(n)?(o=!0,Hs(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ua(t),s.updater=mo,t.stateNode=s,s._reactInternals=t,Bi(t,n,e,r),t=Vi(null,t,n,!0,o,r)):(t.tag=0,J&&o&&La(t),Ee(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(js(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Um(n),e=qe(n,e),s){case 0:t=Hi(null,t,n,e,r);break e;case 1:t=au(null,t,n,e,r);break e;case 11:t=ou(null,t,n,e,r);break e;case 14:t=iu(null,t,n,qe(n.type,e),r);break e}throw Error(S(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:qe(n,s),Hi(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:qe(n,s),au(e,t,n,s,r);case 3:e:{if(Td(t),e===null)throw Error(S(387));n=t.pendingProps,o=t.memoizedState,s=o.element,td(e,t),Gs(t,n,null,r);var i=t.memoizedState;if(n=i.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Hr(Error(S(423)),t),t=lu(e,t,n,r,s);break e}else if(n!==s){s=Hr(Error(S(424)),t),t=lu(e,t,n,r,s);break e}else for(Le=It(t.stateNode.containerInfo.firstChild),Ae=t,J=!0,Qe=null,r=Zc(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(zr(),n===s){t=vt(e,t,r);break e}Ee(e,t,n,r)}t=t.child}return t;case 5:return rd(t),e===null&&Ui(t),n=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,Ii(n,s)?i=null:o!==null&&Ii(n,o)&&(t.flags|=32),Cd(e,t),Ee(e,t,i,r),t.child;case 6:return e===null&&Ui(t),null;case 13:return Pd(e,t,r);case 4:return Fa(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Br(t,null,n,r):Ee(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:qe(n,s),ou(e,t,n,s,r);case 7:return Ee(e,t,t.pendingProps,r),t.child;case 8:return Ee(e,t,t.pendingProps.children,r),t.child;case 12:return Ee(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,o=t.memoizedProps,i=s.value,W(qs,n._currentValue),n._currentValue=i,o!==null)if(Ze(o.value,i)){if(o.children===s.children&&!Te.current){t=vt(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var u=l.firstContext;u!==null;){if(u.context===n){if(o.tag===1){u=ht(-1,r&-r),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}o.lanes|=r,u=o.alternate,u!==null&&(u.lanes|=r),Fi(o.return,r,t),l.lanes|=r;break}u=u.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(S(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Fi(i,r,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Ee(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Mr(t,r),s=Be(s),n=n(s),t.flags|=1,Ee(e,t,n,r),t.child;case 14:return n=t.type,s=qe(n,t.pendingProps),s=qe(n.type,s),iu(e,t,n,s,r);case 15:return bd(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:qe(n,s),js(e,t),t.tag=1,Pe(n)?(e=!0,Hs(t)):e=!1,Mr(t,r),kd(t,n,s),Bi(t,n,s,r),Vi(null,t,n,!0,e,r);case 19:return jd(e,t,r);case 22:return Nd(e,t,r)}throw Error(S(156,t.tag))};function Kd(e,t){return wc(e,t)}function Dm(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ue(e,t,r,n){return new Dm(e,t,r,n)}function tl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Um(e){if(typeof e=="function")return tl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ea)return 11;if(e===_a)return 14}return 2}function Dt(e,t){var r=e.alternate;return r===null?(r=Ue(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function As(e,t,r,n,s,o){var i=2;if(n=e,typeof e=="function")tl(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case kr:return rr(r.children,s,o,t);case wa:i=8,s|=8;break;case fi:return e=Ue(12,r,t,s|2),e.elementType=fi,e.lanes=o,e;case hi:return e=Ue(13,r,t,s),e.elementType=hi,e.lanes=o,e;case mi:return e=Ue(19,r,t,s),e.elementType=mi,e.lanes=o,e;case rc:return vo(r,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ec:i=10;break e;case tc:i=9;break e;case Ea:i=11;break e;case _a:i=14;break e;case xt:i=16,n=null;break e}throw Error(S(130,e==null?e:typeof e,""))}return t=Ue(i,r,t,s),t.elementType=e,t.type=n,t.lanes=o,t}function rr(e,t,r,n){return e=Ue(7,e,n,t),e.lanes=r,e}function vo(e,t,r,n){return e=Ue(22,e,n,t),e.elementType=rc,e.lanes=r,e.stateNode={isHidden:!1},e}function ti(e,t,r){return e=Ue(6,e,null,t),e.lanes=r,e}function ri(e,t,r){return t=Ue(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fm(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ro(0),this.expirationTimes=Ro(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ro(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function rl(e,t,r,n,s,o,i,l,u){return e=new Fm(e,t,r,l,u),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Ue(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ua(o),e}function zm(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_r,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function qd(e){if(!e)return Ft;e=e._reactInternals;e:{if(cr(e)!==e||e.tag!==1)throw Error(S(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(S(171))}if(e.tag===1){var r=e.type;if(Pe(r))return qc(e,r,t)}return t}function Jd(e,t,r,n,s,o,i,l,u){return e=rl(r,n,!0,e,s,o,i,l,u),e.context=qd(null),r=e.current,n=_e(),s=Mt(r),o=ht(n,s),o.callback=t??null,$t(r,o,s),e.current.lanes=s,qn(e,s,n),je(e,n),e}function yo(e,t,r,n){var s=t.current,o=_e(),i=Mt(s);return r=qd(r),t.context===null?t.context=r:t.pendingContext=r,t=ht(o,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=$t(s,t,i),e!==null&&(Xe(e,s,i,o),Cs(e,s,i)),i}function no(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function yu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function nl(e,t){yu(e,t),(e=e.alternate)&&yu(e,t)}function Bm(){return null}var Gd=typeof reportError=="function"?reportError:function(e){console.error(e)};function sl(e){this._internalRoot=e}wo.prototype.render=sl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(S(409));yo(e,t,null,null)};wo.prototype.unmount=sl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ar(function(){yo(null,e,null,null)}),t[pt]=null}};function wo(e){this._internalRoot=e}wo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nc();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Nt.length&&t!==0&&t<Nt[r].priority;r++);Nt.splice(r,0,e),r===0&&Tc(e)}};function ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Eo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function wu(){}function Wm(e,t,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var c=no(i);o.call(c)}}var i=Jd(t,n,e,0,null,!1,!1,"",wu);return e._reactRootContainer=i,e[pt]=i.current,Rn(e.nodeType===8?e.parentNode:e),ar(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var c=no(u);l.call(c)}}var u=rl(e,0,!1,null,null,!1,!1,"",wu);return e._reactRootContainer=u,e[pt]=u.current,Rn(e.nodeType===8?e.parentNode:e),ar(function(){yo(t,u,r,n)}),u}function _o(e,t,r,n,s){var o=r._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var l=s;s=function(){var u=no(i);l.call(u)}}yo(t,i,e,s)}else i=Wm(r,t,e,s,n);return no(i)}Sc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=mn(t.pendingLanes);r!==0&&(Sa(t,r|1),je(t,ee()),!(U&6)&&(Vr=ee()+500,Wt()))}break;case 13:ar(function(){var n=gt(e,1);if(n!==null){var s=_e();Xe(n,e,1,s)}}),nl(e,1)}};ba=function(e){if(e.tag===13){var t=gt(e,134217728);if(t!==null){var r=_e();Xe(t,e,134217728,r)}nl(e,134217728)}};bc=function(e){if(e.tag===13){var t=Mt(e),r=gt(e,t);if(r!==null){var n=_e();Xe(r,e,t,n)}nl(e,t)}};Nc=function(){return F};Cc=function(e,t){var r=F;try{return F=e,t()}finally{F=r}};Si=function(e,t,r){switch(t){case"input":if(vi(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=co(n);if(!s)throw Error(S(90));sc(n),vi(n,s)}}}break;case"textarea":ic(e,r);break;case"select":t=r.value,t!=null&&Ar(e,!!r.multiple,t,!1)}};hc=Xa;mc=ar;var Hm={usingClientEntryPoint:!1,Events:[Gn,Nr,co,dc,fc,Xa]},cn={findFiberByHostInstance:Xt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vm={bundleType:cn.bundleType,version:cn.version,rendererPackageName:cn.rendererPackageName,rendererConfig:cn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vc(e),e===null?null:e.stateNode},findFiberByHostInstance:cn.findFiberByHostInstance||Bm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vs.isDisabled&&vs.supportsFiber)try{io=vs.inject(Vm),nt=vs}catch{}}$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hm;$e.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(t))throw Error(S(200));return zm(e,t,null,r)};$e.createRoot=function(e,t){if(!ol(e))throw Error(S(299));var r=!1,n="",s=Gd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=rl(e,1,!1,null,null,r,!1,n,s),e[pt]=t.current,Rn(e.nodeType===8?e.parentNode:e),new sl(t)};$e.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(S(188)):(e=Object.keys(e).join(","),Error(S(268,e)));return e=vc(t),e=e===null?null:e.stateNode,e};$e.flushSync=function(e){return ar(e)};$e.hydrate=function(e,t,r){if(!Eo(t))throw Error(S(200));return _o(null,e,t,!0,r)};$e.hydrateRoot=function(e,t,r){if(!ol(e))throw Error(S(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",i=Gd;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=Jd(t,null,e,1,r??null,s,!1,o,i),e[pt]=t.current,Rn(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new wo(t)};$e.render=function(e,t,r){if(!Eo(t))throw Error(S(200));return _o(null,e,t,!1,r)};$e.unmountComponentAtNode=function(e){if(!Eo(e))throw Error(S(40));return e._reactRootContainer?(ar(function(){_o(null,null,e,!1,function(){e._reactRootContainer=null,e[pt]=null})}),!0):!1};$e.unstable_batchedUpdates=Xa;$e.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Eo(r))throw Error(S(200));if(e==null||e._reactInternals===void 0)throw Error(S(38));return _o(e,t,r,!1,n)};$e.version="18.3.1-next-f1338f8080-20240426";function Qd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qd)}catch(e){console.error(e)}}Qd(),Qu.exports=$e;var Km=Qu.exports,Eu=Km;ci.createRoot=Eu.createRoot,ci.hydrateRoot=Eu.hydrateRoot;const qm=({children:e})=>a.createElement("div",{className:"bg-white/70 backdrop-blur-lg rounded-2xl border border-white/30 shadow-lg p-8 w-full max-w-md"},e),_u=({onClick:e,disabled:t,children:r,className:n})=>a.createElement("button",{onClick:e,disabled:t,className:`w-full bg-gradient-to-r from-pink-500 to-rose-500 text-white font-bold py-3 px-6 rounded-lg hover:from-pink-600 hover:to-rose-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 ${n}`},r),Jm="modulepreload",Gm=function(e){return"/"+e},ku={},Yn=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(u=>{if(u=Gm(u),u in ku)return;ku[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":Jm,c||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((g,w)=>{f.addEventListener("load",g),f.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},Qm=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Yn(async()=>{const{default:n}=await Promise.resolve().then(()=>Qr);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class il extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Ym extends il{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class xu extends il{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Su extends il{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var na;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(na||(na={}));var Xm=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(d){try{c(n.next(d))}catch(f){i(f)}}function u(d){try{c(n.throw(d))}catch(f){i(f)}}function c(d){d.done?o(d.value):s(d.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};class Zm{constructor(t,{headers:r={},customFetch:n,region:s=na.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=Qm(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return Xm(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:i}=r;let l={},{region:u}=r;u||(u=this.region);const c=new URL(`${this.url}/${t}`);u&&u!=="any"&&(l["x-region"]=u,c.searchParams.set("forceFunctionRegion",u));let d;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(l["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(l["Content-Type"]="application/json",d=JSON.stringify(i)));const f=yield this.fetch(c.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(E=>{throw new Ym(E)}),g=f.headers.get("x-relay-error");if(g&&g==="true")throw new xu(f);if(!f.ok)throw new Su(f);let w=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return w==="application/json"?y=yield f.json():w==="application/octet-stream"?y=yield f.blob():w==="text/event-stream"?y=f:w==="multipart/form-data"?y=yield f.formData():y=yield f.text(),{data:y,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof Su||s instanceof xu?s.context:void 0}}})}}var Ne={},al={},ko={},Xn={},xo={},So={},ep=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Kr=ep();const tp=Kr.fetch,Yd=Kr.fetch.bind(Kr),Xd=Kr.Headers,rp=Kr.Request,np=Kr.Response,Qr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Xd,Request:rp,Response:np,default:Yd,fetch:tp},Symbol.toStringTag,{value:"Module"})),sp=Nf(Qr);var bo={};Object.defineProperty(bo,"__esModule",{value:!0});let op=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};bo.default=op;var Zd=ze&&ze.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(So,"__esModule",{value:!0});const ip=Zd(sp),ap=Zd(bo);let lp=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=ip.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,l,u;let c=null,d=null,f=null,g=o.status,w=o.statusText;if(o.ok){if(this.method!=="HEAD"){const m=await o.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=m:d=JSON.parse(m))}const E=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),_=(l=o.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");E&&_&&_.length>1&&(f=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,g=406,w="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const E=await o.text();try{c=JSON.parse(E),Array.isArray(c)&&o.status===404&&(d=[],c=null,g=200,w="OK")}catch{o.status===404&&E===""?(g=204,w="No Content"):c={message:E}}if(c&&this.isMaybeSingle&&(!((u=c==null?void 0:c.details)===null||u===void 0)&&u.includes("0 rows"))&&(c=null,g=200,w="OK"),c&&this.shouldThrowOnError)throw new ap.default(c)}return{error:c,data:d,count:f,status:g,statusText:w}});return this.shouldThrowOnError||(s=s.catch(o=>{var i,l,u;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(u=o==null?void 0:o.code)!==null&&u!==void 0?u:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};So.default=lp;var up=ze&&ze.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xo,"__esModule",{value:!0});const cp=up(So);let dp=class extends cp.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:o=s}={}){const i=o?`${o}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const o=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(i,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:o=!1,format:i="text"}={}){var l;const u=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${c}"; options=${u};`,i==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};xo.default=dp;var fp=ze&&ze.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xn,"__esModule",{value:!0});const hp=fp(xo);let mp=class extends hp.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${o}fts${i}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Xn.default=mp;var pp=ze&&ze.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ko,"__esModule",{value:!0});const dn=pp(Xn);let gp=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let o=!1;const i=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new dn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),r&&o.push(`count=${r}`),n||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const i=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(i.length>0){const l=[...new Set(i)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new dn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:o=!0}={}){const i="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const u=t.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new dn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new dn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new dn.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ko.default=gp;var No={},Co={};Object.defineProperty(Co,"__esModule",{value:!0});Co.version=void 0;Co.version="0.0.0-automated";Object.defineProperty(No,"__esModule",{value:!0});No.DEFAULT_HEADERS=void 0;const vp=Co;No.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${vp.version}`};var ef=ze&&ze.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(al,"__esModule",{value:!0});const yp=ef(ko),wp=ef(Xn),Ep=No;let _p=class tf{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},Ep.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new yp.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new tf(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:o}={}){let i;const l=new URL(`${this.url}/rpc/${t}`);let u;n||s?(i=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(i="POST",u=r);const c=Object.assign({},this.headers);return o&&(c.Prefer=`count=${o}`),new wp.default({method:i,url:l,headers:c,schema:this.schemaName,body:u,fetch:this.fetch,allowEmpty:!1})}};al.default=_p;var Yr=ze&&ze.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.PostgrestError=Ne.PostgrestBuilder=Ne.PostgrestTransformBuilder=Ne.PostgrestFilterBuilder=Ne.PostgrestQueryBuilder=Ne.PostgrestClient=void 0;const rf=Yr(al);Ne.PostgrestClient=rf.default;const nf=Yr(ko);Ne.PostgrestQueryBuilder=nf.default;const sf=Yr(Xn);Ne.PostgrestFilterBuilder=sf.default;const of=Yr(xo);Ne.PostgrestTransformBuilder=of.default;const af=Yr(So);Ne.PostgrestBuilder=af.default;const lf=Yr(bo);Ne.PostgrestError=lf.default;var kp=Ne.default={PostgrestClient:rf.default,PostgrestQueryBuilder:nf.default,PostgrestFilterBuilder:sf.default,PostgrestTransformBuilder:of.default,PostgrestBuilder:af.default,PostgrestError:lf.default};const{PostgrestClient:xp,PostgrestQueryBuilder:qg,PostgrestFilterBuilder:Jg,PostgrestTransformBuilder:Gg,PostgrestBuilder:Qg,PostgrestError:Yg}=kp;function Sp(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const bp=Sp(),Np="2.11.15",Cp=`realtime-js/${Np}`,Tp="1.0.0",uf=1e4,Pp=1e3;var Nn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Nn||(Nn={}));var ge;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ge||(ge={}));var Ge;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ge||(Ge={}));var sa;(function(e){e.websocket="websocket"})(sa||(sa={}));var Yt;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Yt||(Yt={}));class jp{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),o=r.getUint8(2);let i=this.HEADER_LENGTH+2;const l=n.decode(t.slice(i,i+s));i=i+s;const u=n.decode(t.slice(i,i+o));i=i+o;const c=JSON.parse(n.decode(t.slice(i,t.byteLength)));return{ref:null,topic:l,event:u,payload:c}}}class cf{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var B;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(B||(B={}));const bu=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((o,i)=>(o[i]=Op(i,e,t,s),o),{})},Op=(e,t,r,n)=>{const s=t.find(l=>l.name===e),o=s==null?void 0:s.type,i=r[e];return o&&!n.includes(o)?df(o,i):oa(i)},df=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return $p(t,r)}switch(e){case B.bool:return Lp(t);case B.float4:case B.float8:case B.int2:case B.int4:case B.int8:case B.numeric:case B.oid:return Ap(t);case B.json:case B.jsonb:return Ip(t);case B.timestamp:return Rp(t);case B.abstime:case B.date:case B.daterange:case B.int4range:case B.int8range:case B.money:case B.reltime:case B.text:case B.time:case B.timestamptz:case B.timetz:case B.tsrange:case B.tstzrange:return oa(t);default:return oa(t)}},oa=e=>e,Lp=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Ap=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Ip=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},$p=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let o;const i=e.slice(1,r);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>df(t,l))}return e},Rp=e=>typeof e=="string"?e.replace(" ","T"):e,ff=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class ni{constructor(t,r,n={},s=uf){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Nu;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Nu||(Nu={}));class Cn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Cn.syncState(this.state,s,o,i),this.pendingDiffs.forEach(u=>{this.state=Cn.syncDiff(this.state,u,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Cn.syncDiff(this.state,s,o,i),l())}),this.onJoin((s,o,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:i})}),this.onLeave((s,o,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const o=this.cloneDeep(t),i=this.transformState(r),l={},u={};return this.map(o,(c,d)=>{i[c]||(u[c]=d)}),this.map(i,(c,d)=>{const f=o[c];if(f){const g=d.map(_=>_.presence_ref),w=f.map(_=>_.presence_ref),y=d.filter(_=>w.indexOf(_.presence_ref)<0),E=f.filter(_=>g.indexOf(_.presence_ref)<0);y.length>0&&(l[c]=y),E.length>0&&(u[c]=E)}else l[c]=d}),this.syncDiff(o,{joins:l,leaves:u},n,s)}static syncDiff(t,r,n,s){const{joins:o,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(o,(l,u)=>{var c;const d=(c=t[l])!==null&&c!==void 0?c:[];if(t[l]=this.cloneDeep(u),d.length>0){const f=t[l].map(w=>w.presence_ref),g=d.filter(w=>f.indexOf(w.presence_ref)<0);t[l].unshift(...g)}n(l,d,u)}),this.map(i,(l,u)=>{let c=t[l];if(!c)return;const d=u.map(f=>f.presence_ref);c=c.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=c,s(l,c,u),c.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Cu;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Cu||(Cu={}));var Tu;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Tu||(Tu={}));var ut;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ut||(ut={}));class ll{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ni(this,Ge.join,this.params,this.timeout),this.rejoinTimer=new cf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ge.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ge.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Cn(this),this.broadcastEndpointURL=ff(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ge.closed){const{config:{broadcast:o,presence:i,private:l}}=this.params;this._onError(d=>t==null?void 0:t(ut.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(ut.CLOSED));const u={},c={broadcast:o,presence:i,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},u)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){t==null||t(ut.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,w=(f=g==null?void 0:g.length)!==null&&f!==void 0?f:0,y=[];for(let E=0;E<w;E++){const _=g[E],{filter:{event:m,schema:h,table:p,filter:v}}=_,k=d&&d[E];if(k&&k.event===m&&k.schema===h&&k.table===p&&k.filter===v)y.push(Object.assign(Object.assign({},_),{id:k.id}));else{this.unsubscribe(),this.state=ge.errored,t==null||t(ut.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(ut.SUBSCRIBED);return}}).receive("error",d=>{this.state=ge.errored,t==null||t(ut.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ut.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:i}=t,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,u;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ge.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ge.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new ni(this,Ge.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,o=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(o),i}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ni(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,o;const i=t.toLocaleLowerCase(),{close:l,error:u,leave:c,join:d}=Ge;if(n&&[l,u,c,d].indexOf(i)>=0&&n!==this._joinRef())return;let g=this._onMessage(i,r,n);if(r&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(w=>{var y,E,_;return((y=w.filter)===null||y===void 0?void 0:y.event)==="*"||((_=(E=w.filter)===null||E===void 0?void 0:E.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===i}).map(w=>w.callback(g,n)):(o=this.bindings[i])===null||o===void 0||o.filter(w=>{var y,E,_,m,h,p;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in w){const v=w.id,k=(y=w.filter)===null||y===void 0?void 0:y.event;return v&&((E=r.ids)===null||E===void 0?void 0:E.includes(v))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const v=(h=(m=w==null?void 0:w.filter)===null||m===void 0?void 0:m.event)===null||h===void 0?void 0:h.toLocaleLowerCase();return v==="*"||v===((p=r==null?void 0:r.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===i}).map(w=>{if(typeof g=="object"&&"ids"in g){const y=g.data,{schema:E,table:_,commit_timestamp:m,type:h,errors:p}=y;g=Object.assign(Object.assign({},{schema:E,table:_,commit_timestamp:m,eventType:h,new:{},old:{},errors:p}),this._getPayloadRecords(y))}w.callback(g,n)})}_isClosed(){return this.state===ge.closed}_isJoined(){return this.state===ge.joined}_isJoining(){return this.state===ge.joining}_isLeaving(){return this.state===ge.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),o={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&ll.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ge.close,{},t)}_onError(t){this._on(Ge.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ge.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=bu(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=bu(t.columns,t.old_record)),r}}const Pu=()=>{},Mp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Dp{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=uf,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Pu,this.ref=0,this.logger=Pu,this.conn=null,this.sendBuffer=[],this.serializer=new jp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...l)=>Yn(async()=>{const{default:u}=await Promise.resolve().then(()=>Qr);return{default:u}},void 0).then(({default:u})=>u(...l)):i=fetch,(...l)=>i(...l)},this.endPoint=`${t}/${sa.websocket}`,this.httpEndpoint=ff(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(o,i)=>i(JSON.stringify(o)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new cf(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=bp),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Tp}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Nn.connecting:return Yt.Connecting;case Nn.open:return Yt.Open;case Nn.closing:return Yt.Closing;default:return Yt.Closed}}isConnected(){return this.connectionState()===Yt.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(o=>o.topic===n);if(s)return s;{const o=new ll(`realtime:${t}`,r,this);return this.channels.push(o),o}}push(t){const{topic:r,event:n,payload:s,ref:o}=t,i=()=>{this.encode(t,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${r} ${n} (${o})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:Cp};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Ge.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(Pp,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:o,ref:i}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${n} ${s} ${i&&"("+i+")"||""}`,o),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,o,i)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ge.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Mp],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class ul extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ie(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Up extends ul{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ia extends ul{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var Fp=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(d){try{c(n.next(d))}catch(f){i(f)}}function u(d){try{c(n.throw(d))}catch(f){i(f)}}function c(d){d.done?o(d.value):s(d.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};const hf=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Yn(async()=>{const{default:n}=await Promise.resolve().then(()=>Qr);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},zp=()=>Fp(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Yn(()=>Promise.resolve().then(()=>Qr),void 0)).Response:Response}),aa=e=>{if(Array.isArray(e))return e.map(r=>aa(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[s]=aa(n)}),t};var dr=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(d){try{c(n.next(d))}catch(f){i(f)}}function u(d){try{c(n.throw(d))}catch(f){i(f)}}function c(d){d.done?o(d.value):s(d.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};const si=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Bp=(e,t,r)=>dr(void 0,void 0,void 0,function*(){const n=yield zp();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{t(new Up(si(s),e.status||500))}).catch(s=>{t(new ia(si(s),s))}):t(new ia(si(e),e))}),Wp=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function Zn(e,t,r,n,s,o){return dr(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(r,Wp(t,n,s,o)).then(u=>{if(!u.ok)throw u;return n!=null&&n.noResolveJson?u:u.json()}).then(u=>i(u)).catch(u=>Bp(u,l,n))})})}function so(e,t,r,n){return dr(this,void 0,void 0,function*(){return Zn(e,"GET",t,r,n)})}function bt(e,t,r,n,s){return dr(this,void 0,void 0,function*(){return Zn(e,"POST",t,n,s,r)})}function Hp(e,t,r,n,s){return dr(this,void 0,void 0,function*(){return Zn(e,"PUT",t,n,s,r)})}function Vp(e,t,r,n){return dr(this,void 0,void 0,function*(){return Zn(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function mf(e,t,r,n,s){return dr(this,void 0,void 0,function*(){return Zn(e,"DELETE",t,n,s,r)})}var Se=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(d){try{c(n.next(d))}catch(f){i(f)}}function u(d){try{c(n.throw(d))}catch(f){i(f)}}function c(d){d.done?o(d.value):s(d.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};const Kp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ju={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class qp{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=hf(s)}uploadOrUpdate(t,r,n,s){return Se(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},ju),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const u=i.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),u&&o.append("metadata",this.encodeMetadata(u)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",i.cacheControl),u&&o.append("metadata",this.encodeMetadata(u))):(o=n,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,u&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const c=this._removeEmptyFolders(r),d=this._getFinalPath(c),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:o,headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{})),g=yield f.json();return f.ok?{data:{path:c,id:g.Id,fullPath:g.Key},error:null}:{data:null,error:g}}catch(o){if(ie(o))return{data:null,error:o};throw o}})}upload(t,r,n){return Se(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Se(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",r);try{let u;const c=Object.assign({upsert:ju.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.append("cacheControl",c.cacheControl)):(u=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:u,headers:d}),g=yield f.json();return f.ok?{data:{path:o,fullPath:g.Key},error:null}:{data:null,error:g}}catch(u){if(ie(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(t,r){return Se(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const o=yield bt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new ul("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:l},error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}})}update(t,r,n){return Se(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Se(this,void 0,void 0,function*(){try{return{data:yield bt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Se(this,void 0,void 0,function*(){try{return{data:{path:(yield bt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Se(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),o=yield bt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Se(this,void 0,void 0,function*(){try{const s=yield bt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}})}download(t,r){return Se(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=o?`?${o}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield so(this.fetch,`${this.url}/${s}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(ie(l))return{data:null,error:l};throw l}})}info(t){return Se(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield so(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:aa(n),error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}})}exists(t){return Se(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Vp(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ie(n)&&n instanceof ia){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&s.push(o);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});u!==""&&s.push(u);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${c}`)}}}remove(t){return Se(this,void 0,void 0,function*(){try{return{data:yield mf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(ie(r))return{data:null,error:r};throw r}})}list(t,r,n){return Se(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Kp),r),{prefix:t||""});return{data:yield bt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Jp="2.7.1",Gp={"X-Client-Info":`storage-js/${Jp}`};var mr=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(d){try{c(n.next(d))}catch(f){i(f)}}function u(d){try{c(n.throw(d))}catch(f){i(f)}}function c(d){d.done?o(d.value):s(d.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};class Qp{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},Gp),r),this.fetch=hf(n)}listBuckets(){return mr(this,void 0,void 0,function*(){try{return{data:yield so(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(ie(t))return{data:null,error:t};throw t}})}getBucket(t){return mr(this,void 0,void 0,function*(){try{return{data:yield so(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(ie(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return mr(this,void 0,void 0,function*(){try{return{data:yield bt(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return mr(this,void 0,void 0,function*(){try{return{data:yield Hp(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}})}emptyBucket(t){return mr(this,void 0,void 0,function*(){try{return{data:yield bt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(ie(r))return{data:null,error:r};throw r}})}deleteBucket(t){return mr(this,void 0,void 0,function*(){try{return{data:yield mf(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(ie(r))return{data:null,error:r};throw r}})}}class Yp extends Qp{constructor(t,r={},n){super(t,r,n)}from(t){return new qp(this.url,this.headers,t,this.fetch)}}const Xp="2.52.1";let gn="";typeof Deno<"u"?gn="deno":typeof document<"u"?gn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gn="react-native":gn="node";const Zp={"X-Client-Info":`supabase-js-${gn}/${Xp}`},e0={headers:Zp},t0={schema:"public"},r0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},n0={};var s0=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(d){try{c(n.next(d))}catch(f){i(f)}}function u(d){try{c(n.throw(d))}catch(f){i(f)}}function c(d){d.done?o(d.value):s(d.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};const o0=e=>{let t;return e?t=e:typeof fetch>"u"?t=Yd:t=fetch,(...r)=>t(...r)},i0=()=>typeof Headers>"u"?Xd:Headers,a0=(e,t,r)=>{const n=o0(r),s=i0();return(o,i)=>s0(void 0,void 0,void 0,function*(){var l;const u=(l=yield t())!==null&&l!==void 0?l:e;let c=new s(i==null?void 0:i.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),n(o,Object.assign(Object.assign({},i),{headers:c}))})};var l0=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(d){try{c(n.next(d))}catch(f){i(f)}}function u(d){try{c(n.throw(d))}catch(f){i(f)}}function c(d){d.done?o(d.value):s(d.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};function u0(e){return e.endsWith("/")?e:e+"/"}function c0(e,t){var r,n;const{db:s,auth:o,realtime:i,global:l}=e,{db:u,auth:c,realtime:d,global:f}=t,g={db:Object.assign(Object.assign({},u),s),auth:Object.assign(Object.assign({},c),o),realtime:Object.assign(Object.assign({},d),i),global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>l0(this,void 0,void 0,function*(){return""})};return e.accessToken?g.accessToken=e.accessToken:delete g.accessToken,g}const pf="2.71.1",wr=30*1e3,la=3,oi=la*wr,d0="http://localhost:9999",f0="supabase.auth.token",h0={"X-Client-Info":`gotrue-js/${pf}`},ua="X-Supabase-Api-Version",gf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},m0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,p0=10*60*1e3;class cl extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function $(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class g0 extends cl{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function v0(e){return $(e)&&e.name==="AuthApiError"}class vf extends cl{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ht extends cl{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class kt extends Ht{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function y0(e){return $(e)&&e.name==="AuthSessionMissingError"}class ys extends Ht{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ws extends Ht{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Es extends Ht{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function w0(e){return $(e)&&e.name==="AuthImplicitGrantRedirectError"}class Ou extends Ht{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ca extends Ht{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function ii(e){return $(e)&&e.name==="AuthRetryableFetchError"}class Lu extends Ht{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class da extends Ht{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const oo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Au=` 	
\r=`.split(""),E0=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Au.length;t+=1)e[Au[t].charCodeAt(0)]=-2;for(let t=0;t<oo.length;t+=1)e[oo[t].charCodeAt(0)]=t;return e})();function Iu(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(oo[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(oo[n]),t.queuedBits-=6}}function yf(e,t,r){const n=E0[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function $u(e){const t=[],r=i=>{t.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=i=>{x0(i,n,r)};for(let i=0;i<e.length;i+=1)yf(e.charCodeAt(i),s,o);return t.join("")}function _0(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function k0(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}_0(n,t)}}function x0(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function S0(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)yf(e.charCodeAt(s),r,n);return new Uint8Array(t)}function b0(e){const t=[];return k0(e,r=>t.push(r)),new Uint8Array(t)}function N0(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Iu(s,r,n)),Iu(null,r,n),t.join("")}function C0(e){return Math.round(Date.now()/1e3)+e}function T0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ke=()=>typeof window<"u"&&typeof document<"u",Kt={tested:!1,writable:!1},wf=()=>{if(!Ke())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Kt.tested)return Kt.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Kt.tested=!0,Kt.writable=!0}catch{Kt.tested=!0,Kt.writable=!1}return Kt.writable};function P0(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,o)=>{t[o]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Ef=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Yn(async()=>{const{default:n}=await Promise.resolve().then(()=>Qr);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},j0=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Er=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},qt=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},_t=async(e,t)=>{await e.removeItem(t)};class To{constructor(){this.promise=new To.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}To.promiseConstructor=Promise;function ai(e){const t=e.split(".");if(t.length!==3)throw new da("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!m0.test(t[n]))throw new da("JWT not in base64url format");return{header:JSON.parse($u(t[0])),payload:JSON.parse($u(t[1])),signature:S0(t[2]),raw:{header:t[0],payload:t[1]}}}async function O0(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function L0(e,t){return new Promise((n,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){n(i);return}}catch(i){if(!t(o,i)){s(i);return}}})()})}function A0(e){return("0"+e.toString(16)).substr(-2)}function I0(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let o=0;o<56;o++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,A0).join("")}async function $0(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function R0(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await $0(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function pr(e,t,r=!1){const n=I0();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Er(e,`${t}-code-verifier`,s);const o=await R0(n);return[o,n===o?"plain":"s256"]}const M0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function D0(e){const t=e.headers.get(ua);if(!t||!t.match(M0))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function U0(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function F0(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const z0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function gr(e){if(!z0.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function li(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ru(e){return JSON.parse(JSON.stringify(e))}var B0=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Qt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),W0=[502,503,504];async function Mu(e){var t;if(!j0(e))throw new ca(Qt(e),0);if(W0.includes(e.status))throw new ca(Qt(e),e.status);let r;try{r=await e.json()}catch(o){throw new vf(Qt(o),o)}let n;const s=D0(e);if(s&&s.getTime()>=gf["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Lu(Qt(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new kt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new Lu(Qt(r),e.status,r.weak_password.reasons);throw new g0(Qt(r),e.status||500,n)}const H0=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function M(e,t,r,n){var s;const o=Object.assign({},n==null?void 0:n.headers);o[ua]||(o[ua]=gf["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const i=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",u=await V0(e,t,r+l,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(u):{data:Object.assign({},u),error:null}}async function V0(e,t,r,n,s,o){const i=H0(t,n,s,o);let l;try{l=await e(r,Object.assign({},i))}catch(u){throw console.error(u),new ca(Qt(u),0)}if(l.ok||await Mu(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(u){await Mu(u)}}function at(e){var t;let r=null;G0(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=C0(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Du(e){const t=at(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Tt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function K0(e){return{data:e,error:null}}function q0(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o}=e,i=B0(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o},u=Object.assign({},i);return{data:{properties:l,user:u},error:null}}function J0(e){return e}function G0(e){return e.access_token&&e.refresh_token&&e.expires_in}const ui=["global","local","others"];var Q0=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class Y0{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Ef(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=ui[0]){if(ui.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ui.join(", ")}`);try{return await M(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if($(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await M(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Tt})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Q0(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await M(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:q0,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if($(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await M(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Tt})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,o,i,l,u;try{const c={nextPage:null,lastPage:0,total:0},d=await M(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:J0});if(d.error)throw d.error;const f=await d.json(),g=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,w=(u=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return w.length>0&&(w.forEach(y=>{const E=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(y.split(";")[1].split("=")[1]);c[`${_}Page`]=E}),c.total=parseInt(g)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if($(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){gr(t);try{return await M(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Tt})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){gr(t);try{return await M(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Tt})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){gr(t);try{return await M(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Tt})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){gr(t.userId);try{const{data:r,error:n}=await M(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if($(r))return{data:null,error:r};throw r}}async _deleteFactor(t){gr(t.userId),gr(t.id);try{return{data:await M(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if($(r))return{data:null,error:r};throw r}}}function Uu(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function X0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const vr={debug:!!(globalThis&&wf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _f extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Z0 extends _f{}async function eg(e,t,r){vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),vr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Z0(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(vr.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}X0();const tg={url:d0,storageKey:f0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:h0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Fu(e,t,r){return await r()}const yr={};class Vn{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Vn.nextInstanceID,Vn.nextInstanceID+=1,this.instanceID>0&&Ke()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},tg),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Y0({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Ef(s.fetch),this.lock=s.lock||Fu,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ke()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=eg:this.lock=Fu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:wf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Uu(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Uu(this.memoryStorage)),Ke()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=yr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){yr[this.storageKey]=Object.assign(Object.assign({},yr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=yr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){yr[this.storageKey]=Object.assign(Object.assign({},yr[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${pf}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=P0(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ke()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),w0(o)){const u=(t=o.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return $(r)?{error:r}:{error:new vf("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const o=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:at}),{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const u=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(o){if($(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var r,n,s;try{let o;if("email"in t){const{email:d,password:f,options:g}=t;let w=null,y=null;this.flowType==="pkce"&&([w,y]=await pr(this.storage,this.storageKey)),o=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:d,password:f,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:w,code_challenge_method:y},xform:at})}else if("phone"in t){const{phone:d,password:f,options:g}=t;o=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},channel:(s=g==null?void 0:g.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:at})}else throw new ws("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const u=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(o){if($(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let r;if("email"in t){const{email:o,password:i,options:l}=t;r=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Du})}else if("phone"in t){const{phone:o,password:i,options:l}=t;r=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Du})}else throw new ws("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ys}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if($(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,o,i,l,u,c,d,f,g,w;let y,E;if("message"in t)y=t.message,E=t.signature;else{const{chain:_,wallet:m,statement:h,options:p}=t;let v;if(Ke())if(typeof m=="object")v=m;else{const x=window;if("solana"in x&&typeof x.solana=="object"&&("signIn"in x.solana&&typeof x.solana.signIn=="function"||"signMessage"in x.solana&&typeof x.solana.signMessage=="function"))v=x.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=m}const k=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in v&&v.signIn){const x=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),h?{statement:h}:null));let b;if(Array.isArray(x)&&x[0]&&typeof x[0]=="object")b=x[0];else if(x&&typeof x=="object"&&"signedMessage"in x&&"signature"in x)b=x;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in b&&"signature"in b&&(typeof b.signedMessage=="string"||b.signedMessage instanceof Uint8Array)&&b.signature instanceof Uint8Array)y=typeof b.signedMessage=="string"?b.signedMessage:new TextDecoder().decode(b.signedMessage),E=b.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in v)||typeof v.signMessage!="function"||!("publicKey"in v)||typeof v!="object"||!v.publicKey||!("toBase58"in v.publicKey)||typeof v.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${k.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...h?["",h,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=p==null?void 0:p.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((i=p==null?void 0:p.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((u=p==null?void 0:p.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((c=p==null?void 0:p.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((f=(d=p==null?void 0:p.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...p.signInWithSolana.resources.map(b=>`- ${b}`)]:[]].join(`
`);const x=await v.signMessage(new TextEncoder().encode(y),"utf8");if(!x||!(x instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=x}}try{const{data:_,error:m}=await M(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:N0(E)},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(w=t.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:at});if(m)throw m;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new ys}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:m})}catch(_){if($(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(t){const r=await qt(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:o,error:i}=await M(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:at});if(await _t(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new ys}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:i})}catch(o){if($(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:o,nonce:i}=t,l=await M(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:at}),{data:u,error:c}=l;return c?{data:{user:null,session:null},error:c}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new ys}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:c})}catch(r){if($(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,o,i;try{if("email"in t){const{email:l,options:u}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await pr(this.storage,this.storageKey));const{error:f}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=u==null?void 0:u.data)!==null&&r!==void 0?r:{},create_user:(n=u==null?void 0:u.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:u}=t,{data:c,error:d}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(o=u==null?void 0:u.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(i=u==null?void 0:u.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new ws("You must provide either an email or phone number.")}catch(l){if($(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,o;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:l}=await M(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:at});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const u=i.session,c=i.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if($(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await pr(this.storage,this.storageKey)),await M(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:K0})}catch(o){if($(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new kt;const{error:s}=await M(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if($(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:o}=t,{error:i}=await M(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:n,type:s,options:o}=t,{data:i,error:l}=await M(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new ws("You must provide either an email or phone number and a type")}catch(r){if($(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await qt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<oi:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const i=await qt(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=li()}if(this.storage.isServer&&t.user){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(u,c,d)=>(!i&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,c,d))})}return{data:{session:t},error:null}}const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Tt}):await this._useSession(async r=>{var n,s,o;const{data:i,error:l}=r;if(l)throw l;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new kt}:await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Tt})})}catch(r){if($(r))return y0(r)&&(await this._removeSession(),await _t(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:o}=n;if(o)throw o;if(!s.session)throw new kt;const i=s.session;let l=null,u=null;this.flowType==="pkce"&&t.email!=null&&([l,u]=await pr(this.storage,this.storageKey));const{data:c,error:d}=await M(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:u}),jwt:i.access_token,xform:Tt});if(d)throw d;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new kt;const r=Date.now()/1e3;let n=r,s=!0,o=null;const{payload:i}=ai(t.access_token);if(i.exp&&(n=i.exp,s=n<=r),s){const{session:l,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:u}=await this._getUser(t.access_token);if(u)throw u;o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if($(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:i,error:l}=r;if(l)throw l;t=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new kt;const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if($(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Ke())throw new Es("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Es(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Ou("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Es("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ou("No code detected.");const{data:h,error:p}=await this._exchangeCodeForSession(t.code);if(p)throw p;const v=new URL(window.location.href);return v.searchParams.delete("code"),window.history.replaceState(window.history.state,"",v.toString()),{data:{session:h.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:i,expires_in:l,expires_at:u,token_type:c}=t;if(!o||!l||!i||!c)throw new Es("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let g=d+f;u&&(g=parseInt(u));const w=g-d;w*1e3<=wr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${f}s`);const y=g-f;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,g,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,g,d);const{data:E,error:_}=await this._getUser(o);if(_)throw _;const m={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:f,expires_at:g,refresh_token:i,token_type:c,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:t.type},error:null}}catch(n){if($(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await qt(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{error:o};const i=(n=s.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(v0(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await _t(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=T0(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:o},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await pr(this.storage,this.storageKey,!0));try{return await M(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if($(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if($(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async o=>{var i,l,u,c,d;const{data:f,error:g}=o;if(g)throw g;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await M(this.fetch,"GET",w,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Ke()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if($(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)throw i;return await M(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if($(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await L0(async s=>(s>0&&await O0(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await M(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:at})),(s,o)=>{const i=200*Math.pow(2,s);return o&&ii(o)&&Date.now()+i-n<wr})}catch(n){if(this._debug(r,"error",n),$(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ke()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await qt(this.storage,this.storageKey);if(s&&this.userStorage){let i=await qt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await Er(this.userStorage,this.storageKey+"-user",i)),s.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:li()}else if(s&&!s.user&&!s.user){const i=await qt(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await _t(this.storage,this.storageKey+"-user"),await Er(this.storage,this.storageKey,s)):s.user=li()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<oi;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${oi}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),ii(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(s.access_token);!l&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new kt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new To;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new kt;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),$(o)){const i={session:null,error:o};return ii(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(u){o.push(u)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Er(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const o=Ru(s);await Er(this.storage,this.storageKey,o)}else{const s=Ru(r);await Er(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await _t(this.storage,this.storageKey),await _t(this.storage,this.storageKey+"-code-verifier"),await _t(this.storage,this.storageKey+"-user"),this.userStorage&&await _t(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ke()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),wr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/wr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${wr}ms, refresh threshold is ${la} ticks`),s<=la&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof _f)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ke()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,i]=await pr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await M(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if($(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:u,error:c}=await M(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(r){if($(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{data:null,error:o};const{data:i,error:l}=await M(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(r){if($(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await M(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if($(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=n.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:n,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:o}=t;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=ai(s.access_token);let l=null;i.aal&&(l=i.aal);let u=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(u="aal2");const d=i.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+p0>s)return n;const{data:o,error:i}=await M(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,n=o.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:w,error:y}=await this.getSession();if(y||!w.session)return{data:null,error:y};n=w.session.access_token}const{header:s,payload:o,signature:i,raw:{header:l,payload:u}}=ai(n);r!=null&&r.allowExpired||U0(o.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:w}=await this.getUser(n);if(w)throw w;return{data:{claims:o,header:s,signature:i},error:null}}const d=F0(s.alg),f=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,i,b0(`${l}.${u}`)))throw new da("Invalid JWT signature");return{data:{claims:o,header:s,signature:i},error:null}}catch(n){if($(n))return{data:null,error:n};throw n}}}Vn.nextInstanceID=0;const rg=Vn;class ng extends rg{constructor(t){super(t)}}var sg=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(d){try{c(n.next(d))}catch(f){i(f)}}function u(d){try{c(n.throw(d))}catch(f){i(f)}}function c(d){d.done?o(d.value):s(d.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};class og{constructor(t,r,n){var s,o,i;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=u0(t),u=new URL(l);this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const c=`sb-${u.hostname.split(".")[0]}-auth-token`,d={db:t0,realtime:n0,auth:Object.assign(Object.assign({},r0),{storageKey:c}),global:e0},f=c0(n??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=f.global.headers)!==null&&o!==void 0?o:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(g,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=f.auth)!==null&&i!==void 0?i:{},this.headers,f.global.fetch),this.fetch=a0(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new xp(new URL("rest/v1",u).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new Zm(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Yp(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return sg(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:o,flowType:i,lock:l,debug:u},c,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ng({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),c),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:i,lock:l,debug:u,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Dp(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ig=(e,t,r)=>new og(e,t,r);function ag(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const e=process.version.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}ag()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const lg="https://lfeiscrvvizgoruydwwp.supabase.co",ug="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxmZWlzY3J2dml6Z29ydXlkd3dwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMyOTUyNzUsImV4cCI6MjA2ODg3MTI3NX0.35USfR6n3-PEbqGtUreQar4rY7Mp7Z59OS7-PcRwsGE",te=ig(lg,ug),cg=async()=>{const{data:e,error:t}=await te.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}`}});if(t)throw console.error("Error signing in:",t),t;return e},kf=async()=>{const{error:e}=await te.auth.signOut();if(e)throw console.error("Error signing out:",e),e},dg=async e=>{const{data:t,error:r}=await te.from("messages").select("*").eq("room_id",e).order("created_at",{ascending:!0});return r?(console.error("Error fetching messages:",r),[]):t},fg=async(e,t,r,n)=>{const{data:s,error:o}=await te.from("messages").insert([{room_id:e,user_id:t,user_name:r,text:n,created_at:new Date().toISOString()}]).select();if(o)throw console.error("Error sending message:",o),o;return s[0]},hg=async e=>{const{data:t,error:r}=await te.from("photo_albums").select("*").eq("room_id",e).order("created_at",{ascending:!1});return r?(console.error("Error fetching photo albums:",r),[]):t},mg=async(e,t,r)=>{const{data:n,error:s}=await te.from("photo_albums").insert([{room_id:e,album_name:t,photo_url:r.src,photo_name:r.name,upload_date:r.uploadDate,file_size:r.size||0}]).select();if(s)throw console.error("Error adding photo to album:",s),s;return n[0]},pg=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t="COUPLE-";for(let r=0;r<6;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},gg=async e=>{var n;let t=0;const r=3;for(;t<r;){const s=pg(),o=`couple_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,{data:i,error:l}=await te.from("couples").insert([{couple_id:o,user1_id:e.id,user1_email:e.email,user1_name:((n=e.user_metadata)==null?void 0:n.full_name)||e.email,invite_code:s,created_by:e.id,status:"pending"}]).select();if(!l)return i[0];if(l.code==="23505"&&l.message.includes("invite_code")){t++;continue}throw console.error("Error creating couple invite:",l),l}throw new Error("Failed to generate unique invite code after multiple attempts")},vg=async(e,t)=>{var i;const{data:r,error:n}=await te.from("couples").select("*").eq("invite_code",e).eq("status","pending").single();if(n||!r)throw new Error("Invalid or expired invite code");if(r.user1_id===t.id)throw new Error("You cannot accept your own invite");const{data:s,error:o}=await te.from("couples").update({user2_id:t.id,user2_email:t.email,user2_name:((i=t.user_metadata)==null?void 0:i.full_name)||t.email,status:"paired",paired_at:new Date().toISOString()}).eq("id",r.id).select();if(o)throw console.error("Error accepting couple invite:",o),o;return s[0]},yg=async e=>{const{data:t,error:r}=await te.from("couples").select("*").or(`user1_id.eq.${e},user2_id.eq.${e}`).eq("status","paired").single();if(r&&r.code!=="PGRST116")throw console.error("Error getting couple status:",r),r;return t},wg=async e=>{const{data:t,error:r}=await te.from("couples").select("*").eq("user1_id",e).eq("status","pending");if(r)throw console.error("Error getting pending invites:",r),r;return t},Eg=async e=>{const{data:t,error:r}=await te.from("couples").select("*").eq("invite_code",e).eq("status","pending").single();if(r&&r.code!=="PGRST116")throw console.error("Error checking invite code:",r),r;return t},_g=()=>{const[e,t]=C.useState(null),[r,n]=C.useState(!0);C.useEffect(()=>{te.auth.getSession().then(({data:{session:l}})=>{t((l==null?void 0:l.user)??null),n(!1)});const{data:{subscription:i}}=te.auth.onAuthStateChange((l,u)=>{t((u==null?void 0:u.user)??null),n(!1)});return()=>i.unsubscribe()},[]);const s=async()=>{try{await cg()}catch(i){console.error("Login error:",i)}},o=async()=>{try{await kf()}catch(i){console.error("Logout error:",i)}};return r?a.createElement("div",{className:"min-h-screen w-full bg-gradient-to-br from-rose-100 to-teal-100 flex flex-col items-center justify-center p-4"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-6xl mb-4"},""),a.createElement("p",{className:"text-gray-600"},"Loading..."))):a.createElement("div",{className:"min-h-screen w-full bg-gradient-to-br from-rose-100 to-teal-100 flex flex-col items-center justify-center p-4 relative overflow-hidden"},a.createElement("div",{className:"absolute top-0 left-0 w-72 h-72 bg-rose-300 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob"}),a.createElement("div",{className:"absolute top-0 right-0 w-72 h-72 bg-teal-300 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000"}),a.createElement("div",{className:"absolute bottom-0 left-1/4 w-72 h-72 bg-pink-300 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-4000"}),a.createElement("div",{className:"text-center mb-8 z-10"},a.createElement("h1",{className:"text-6xl font-bold text-gray-800"},"ChatChat"),a.createElement("p",{className:"text-gray-600 text-lg mt-2"},"The softest chat app ever.")),a.createElement(qm,null,a.createElement("div",{className:"w-full"},a.createElement("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-6"},"Join Your Private Room"),e?a.createElement(_u,{onClick:o},"Sign Out"):a.createElement(_u,{onClick:s},"Sign in with Google"))),a.createElement("footer",{className:"absolute bottom-4 text-gray-500 text-sm"},a.createElement("p",null," 2025 ChatChat. All rights reserved.")))},kg=({currentRoom:e,onClose:t})=>{var g,w;const[r,n]=C.useState({anniversary:[],favorites:[],memories:[],special:[]}),[s,o]=C.useState("anniversary"),[i,l]=C.useState(!1);C.useEffect(()=>{e&&u()},[e]);const u=async()=>{l(!0);const y={anniversary:[],favorites:[],memories:[],special:[]};try{const E=await hg(e);if(E.length===0){const _=localStorage.getItem(`photoAlbums_${e}`);if(_){const m=JSON.parse(_);n(m)}else n(y)}else E.forEach(_=>{const m={id:_.id,src:_.photo_url,name:_.photo_name,uploadDate:_.upload_date,size:_.file_size};y[_.album_name]&&y[_.album_name].push(m)}),n(y)}catch(E){console.error("Error loading photos from Supabase, trying localStorage: ",E);try{const _=localStorage.getItem(`photoAlbums_${e}`);if(_){const m=JSON.parse(_);n(m)}else n(y)}catch(_){console.error("Error loading from localStorage: ",_),n(y)}}l(!1)},c=async(y,E)=>{const _=y.target.files;if(_&&_.length>0){l(!0);for(const m of Array.from(_))if(m.type.startsWith("image/"))try{const h=new FileReader;h.onload=async p=>{const v={src:p.target.result,name:m.name,uploadDate:new Date().toLocaleDateString(),size:m.size};try{await mg(e,E,v),u()}catch(k){console.error("Error adding photo to Supabase:",k);const x=JSON.parse(localStorage.getItem(`photoAlbums_${e}`)||"{}");x[E]||(x[E]=[]),x[E].push({...v,id:Date.now()}),localStorage.setItem(`photoAlbums_${e}`,JSON.stringify(x)),u()}},h.readAsDataURL(m)}catch(h){console.error("Error processing file:",h)}}y.target.value="",l(!1)},d=async(y,E)=>{try{await te.from("photo_albums").delete().eq("id",E.id),u()}catch(_){console.error("Error removing photo from Supabase: ",_);try{const m=JSON.parse(localStorage.getItem(`photoAlbums_${e}`)||"{}");m[y]&&(m[y]=m[y].filter(h=>h.id!==E.id),localStorage.setItem(`photoAlbums_${e}`,JSON.stringify(m)),u())}catch(m){console.error("Error removing photo from localStorage: ",m)}}},f=[{key:"anniversary",label:"Anniversary ",icon:""},{key:"favorites",label:"Favorites ",icon:""},{key:"memories",label:"Memories ",icon:""},{key:"special",label:"Special ",icon:""}];return a.createElement("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"w-full max-w-4xl h-[90vh] bg-white/90 backdrop-blur-lg rounded-2xl border border-white/30 shadow-lg flex flex-col"},a.createElement("div",{className:"flex items-center justify-between p-6 border-b border-white/30"},a.createElement("h2",{className:"text-2xl font-bold bg-gradient-to-r from-pink-500 to-rose-500 bg-clip-text text-transparent"},"Our Photo Albums"),a.createElement("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),a.createElement("div",{className:"flex space-x-1 p-4 bg-white/40"},f.map(y=>a.createElement("button",{key:y.key,onClick:()=>o(y.key),className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all duration-300 ${s===y.key?"bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg":"bg-white/60 text-gray-700 hover:bg-white/80"}`},a.createElement("span",{className:"text-lg mr-2"},y.icon),a.createElement("span",{className:"text-sm"},y.label.split(" ")[0])))),a.createElement("div",{className:"flex-1 p-6 overflow-y-auto"},a.createElement("div",{className:"mb-4 flex items-center justify-between"},a.createElement("h3",{className:"text-lg font-semibold text-gray-800"},(g=f.find(y=>y.key===s))==null?void 0:g.label),a.createElement("div",{className:"flex space-x-2"},a.createElement("input",{type:"file",accept:"image/*",multiple:!0,onChange:y=>c(y,s),className:"hidden",id:`album-upload-${s}`}),a.createElement("label",{htmlFor:`album-upload-${s}`,className:"cursor-pointer inline-flex items-center px-4 py-2 bg-gradient-to-r from-pink-500 to-rose-500 text-white font-medium rounded-lg hover:from-pink-600 hover:to-rose-600 transition-all duration-300"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})),"Add Photos"))),i?a.createElement("div",{className:"text-center py-12"},a.createElement("div",{className:"text-6xl mb-4 animate-pulse"},""),a.createElement("p",{className:"text-gray-500 text-lg"},"Loading Photos..."),a.createElement("p",{className:"text-gray-400 text-sm mt-2"},"Fetching your beautiful moments")):r[s].length===0?a.createElement("div",{className:"text-center py-12"},a.createElement("div",{className:"text-6xl mb-4"},(w=f.find(y=>y.key===s))==null?void 0:w.icon),a.createElement("p",{className:"text-gray-500 text-lg"},"No photos yet"),a.createElement("p",{className:"text-gray-400 text-sm mt-2"},"Upload your first special moment!")):a.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},r[s].map(y=>a.createElement("div",{key:y.id,className:"group relative bg-white/60 rounded-lg overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300"},a.createElement("img",{src:y.src,alt:y.name,className:"w-full h-40 object-cover group-hover:scale-105 transition-transform duration-300"}),a.createElement("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300"},a.createElement("button",{onClick:()=>d(s,y),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 hover:bg-red-600"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})))),a.createElement("div",{className:"p-3"},a.createElement("p",{className:"text-xs text-gray-600 truncate"},y.name),a.createElement("p",{className:"text-xs text-gray-400"},y.uploadDate))))))))},xg=({onClose:e})=>a.createElement("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"w-full max-w-4xl h-[90vh] bg-white/90 backdrop-blur-lg rounded-2xl border border-white/30 shadow-lg flex flex-col"},a.createElement("div",{className:"flex items-center justify-between p-6 border-b border-white/30"},a.createElement("h2",{className:"text-2xl font-bold bg-gradient-to-r from-pink-500 to-rose-500 bg-clip-text text-transparent"},"Storage Manager"),a.createElement("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-lg transition-colors"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),a.createElement("div",{className:"p-6 border-b border-white/30"},a.createElement("h3",{className:"text-lg font-semibold mb-4"},"Storage Usage"),a.createElement("div",{className:"bg-white/60 rounded-lg p-4 text-center"},a.createElement("p",{className:"text-lg text-gray-600"},"Your storage is now managed by Supabase. You can manage your storage in the Supabase dashboard."))))),Sg=({currentRoom:e,currentUser:t,onClose:r})=>{const[n,s]=C.useState({daysTogether:0,totalMessages:0,photosShared:0,videosShared:0,pdfsShared:0,messagesFromYou:0,messagesFromThem:0}),[o,i]=C.useState(!1);C.useEffect(()=>{e&&t&&l()},[e,t]);const l=async()=>{i(!0);try{const d=new Date(2024,6,21),g=new Date().getTime()-d.getTime(),w=Math.max(1,Math.ceil(g/(1e3*3600*24))),{data:y,error:E}=await te.from("messages").select("*").eq("room_id",e).order("created_at",{ascending:!0});if(E)return console.error("Error fetching messages:",E),await u(w);let _=y.length,m=0,h=0,p=0,v=0,k=0;y.forEach(j=>{j.user_name===t?v++:k++,j.text.startsWith("data:image/")||j.text.startsWith("http")?m++:j.text.startsWith('{"type":"video"')?h++:j.text.startsWith('{"type":"pdf"')&&p++});const{data:x,error:b}=await te.from("photo_albums").select("*").eq("room_id",e);!b&&x&&(m+=x.length);const N={daysTogether:w,totalMessages:_,photosShared:m,videosShared:h,pdfsShared:p,messagesFromYou:v,messagesFromThem:k};s(N);const O=`relationshipStats_${e}`;localStorage.setItem(O,JSON.stringify({data:N,timestamp:Date.now()}))}catch(d){console.error("Error calculating stats:",d);const f=new Date(2024,6,21),w=Math.max(1,Math.ceil((new Date().getTime()-f.getTime())/(1e3*3600*24)));await u(w)}i(!1)},u=async d=>{try{const f=localStorage.getItem(`chatMessages_${e}`),g=f?JSON.parse(f):[];let w=g.length,y=0,E=0,_=0,m=0,h=0;g.forEach(v=>{v.user===t?m++:h++,v.text.startsWith("data:image/")||v.text.startsWith("http")?y++:v.text.startsWith('{"type":"video"')?E++:v.text.startsWith('{"type":"pdf"')&&_++});const p=localStorage.getItem(`photoAlbums_${e}`);if(p){const v=JSON.parse(p);Object.values(v).forEach(k=>{Array.isArray(k)&&(y+=k.length)})}s({daysTogether:d,totalMessages:w,photosShared:y,videosShared:E,pdfsShared:_,messagesFromYou:m,messagesFromThem:h})}catch(f){console.error("Error calculating stats from localStorage:",f)}},c=[{label:"Days Together",value:n.daysTogether,icon:"",color:"from-pink-500 to-rose-500"},{label:"Total Messages",value:n.totalMessages,icon:"",color:"from-blue-500 to-indigo-500"},{label:"Photos Shared",value:n.photosShared,icon:"",color:"from-green-500 to-emerald-500"},{label:"Videos Shared",value:n.videosShared,icon:"",color:"from-purple-500 to-violet-500"},{label:"PDFs Shared",value:n.pdfsShared,icon:"",color:"from-red-500 to-pink-500"}];return a.createElement("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"w-full max-w-4xl h-[90vh] bg-white/90 backdrop-blur-lg rounded-2xl border border-white/30 shadow-lg flex flex-col"},a.createElement("div",{className:"flex items-center justify-between p-6 border-b border-white/30"},a.createElement("div",null,a.createElement("h2",{className:"text-2xl font-bold bg-gradient-to-r from-pink-500 to-rose-500 bg-clip-text text-transparent"},"Our Journey Together "),a.createElement("p",{className:"text-sm text-gray-600 mt-1"},o?"Loading...":"Powered by Supabase - Real-time & Accurate")),a.createElement("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-lg transition-colors"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),a.createElement("div",{className:"flex-1 p-6 overflow-y-auto"},o?a.createElement("div",{className:"text-center py-12"},a.createElement("div",{className:"text-6xl mb-4 animate-pulse"},""),a.createElement("p",{className:"text-gray-500 text-lg"},"Calculating your journey..."),a.createElement("p",{className:"text-gray-400 text-sm"},"This should be much faster now!")):a.createElement(a.Fragment,null,a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6"},c.map((d,f)=>a.createElement("div",{key:f,className:"bg-white/60 backdrop-blur-sm rounded-xl border border-white/30 p-6 hover:bg-white/70 transition-all duration-300"},a.createElement("div",{className:"flex items-center justify-between mb-4"},a.createElement("span",{className:"text-3xl"},d.icon),a.createElement("div",{className:`w-3 h-3 rounded-full bg-gradient-to-r ${d.color}`})),a.createElement("div",{className:"text-center"},a.createElement("p",{className:"text-3xl font-bold text-gray-800 mb-2"},d.value.toLocaleString()),a.createElement("p",{className:"text-sm text-gray-600 font-medium"},d.label))))),a.createElement("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl border border-white/30 p-6 mb-6"},a.createElement("h3",{className:"text-lg font-semibold text-gray-800 mb-4"},"Message Distribution"),a.createElement("div",{className:"grid grid-cols-2 gap-4"},a.createElement("div",{className:"text-center"},a.createElement("p",{className:"text-2xl font-bold text-pink-600"},n.messagesFromYou),a.createElement("p",{className:"text-sm text-gray-600"},"Messages from You")),a.createElement("div",{className:"text-center"},a.createElement("p",{className:"text-2xl font-bold text-rose-600"},n.messagesFromThem),a.createElement("p",{className:"text-sm text-gray-600"},"Messages from Them"))),a.createElement("div",{className:"mt-4 bg-gray-200 rounded-full h-2"},a.createElement("div",{className:"bg-gradient-to-r from-pink-500 to-rose-500 h-2 rounded-full transition-all duration-500",style:{width:`${n.totalMessages>0?n.messagesFromYou/n.totalMessages*100:50}%`}}))),a.createElement("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl border border-white/30 p-6"},a.createElement("h3",{className:"text-lg font-semibold text-gray-800 mb-4"},"Fun Facts "),a.createElement("div",{className:"space-y-3"},a.createElement("div",{className:"flex items-center space-x-3"},a.createElement("span",{className:"text-xl"},""),a.createElement("p",{className:"text-sm text-gray-700"},"You've been chatting for ",a.createElement("strong",null,n.daysTogether)," beautiful days!")),a.createElement("div",{className:"flex items-center space-x-3"},a.createElement("span",{className:"text-xl"},""),a.createElement("p",{className:"text-sm text-gray-700"},"That's an average of ",a.createElement("strong",null,n.daysTogether>0?(n.totalMessages/n.daysTogether).toFixed(1):0)," messages per day!")),a.createElement("div",{className:"flex items-center space-x-3"},a.createElement("span",{className:"text-xl"},""),a.createElement("p",{className:"text-sm text-gray-700"},"You've shared ",a.createElement("strong",null,n.photosShared+n.videosShared)," precious memories together!")),a.createElement("div",{className:"flex items-center space-x-3"},a.createElement("span",{className:"text-xl"},""),a.createElement("p",{className:"text-sm text-gray-700"},a.createElement("strong",null,"Real-time sync")," - Your data is now backed up to the cloud!"))))))))},xf=C.createContext(),Sf=()=>{const e=C.useContext(xf);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},bg=({children:e})=>{const[t,r]=C.useState("default"),[n,s]=C.useState(null),[o,i]=C.useState(.3),[l,u]=C.useState(!1),c={dawn:{name:"Dawn - New Beginning",gradient:"from-orange-200 via-pink-200 to-yellow-100",time:"5:00 - 8:00 AM",mood:"",bubbleStyle:"light"},morning:{name:"Morning - Bright Energy",gradient:"from-yellow-200 via-blue-200 to-white",time:"8:00 - 11:00 AM",mood:"",bubbleStyle:"light"},midday:{name:"Midday - Pure Clarity",gradient:"from-sky-100 via-white to-cyan-100",time:"11:00 AM - 2:00 PM",mood:"",bubbleStyle:"light"},afternoon:{name:"Afternoon - Golden Calm",gradient:"from-amber-200 via-orange-100 to-yellow-50",time:"2:00 - 5:00 PM",mood:"",bubbleStyle:"light"},evening:{name:"Evening - Golden Hour Romance",gradient:"from-orange-300 via-rose-200 to-purple-200",time:"5:00 - 8:00 PM",mood:"",bubbleStyle:"mixed"},night:{name:"Night - Cozy Intimacy",gradient:"from-indigo-300 via-purple-300 to-rose-300",time:"8:00 - 11:00 PM",mood:"",bubbleStyle:"dark"},midnight:{name:"Midnight - Dreamy Blue Moon",gradient:"from-slate-400 via-indigo-400 to-blue-300",time:"11:00 PM - 5:00 AM",mood:"",bubbleStyle:"dark"}},d={name:"Default - Soft Romance",gradient:"from-rose-100 to-teal-100",mood:"",bubbleStyle:"light"};C.useEffect(()=>{const _=localStorage.getItem("chatTheme"),m=localStorage.getItem("customBackground"),h=localStorage.getItem("backgroundOpacity"),p=localStorage.getItem("autoThemeEnabled");if(_&&r(_),m&&s(m),h&&i(parseFloat(h)),p==="true"){u(!0);const v=w();r(v)}},[]),C.useEffect(()=>{if(!l)return;const _=()=>{const h=w();t!==h&&c[h]&&r(h)},m=setInterval(_,6e4);return _(),()=>clearInterval(m)},[l,t]);const f=(_,m,h)=>{_!==void 0&&(localStorage.setItem("chatTheme",_),r(_)),m!==void 0&&(m?localStorage.setItem("customBackground",m):localStorage.removeItem("customBackground"),s(m)),h!==void 0&&(localStorage.setItem("backgroundOpacity",h.toString()),i(h))},g=()=>t==="default"?d:t==="custom"?{name:"Custom Background",background:n,opacity:o,mood:"",bubbleStyle:"adaptive"}:c[t]||d,w=()=>{const m=new Date().getHours();return m>=5&&m<8?"dawn":m>=8&&m<11?"morning":m>=11&&m<14?"midday":m>=14&&m<17?"afternoon":m>=17&&m<20?"evening":m>=20&&m<23?"night":"midnight"},E={currentTheme:t,customBackground:n,backgroundOpacity:o,isAutoThemeEnabled:l,timeThemes:c,defaultTheme:d,getCurrentThemeConfig:g,getSuggestedTheme:()=>w(),setTheme:_=>f(_,void 0,void 0),setCustomBackground:_=>f(void 0,_,void 0),setBackgroundOpacity:_=>f(void 0,void 0,_),enableAutoTheme:()=>{u(!0),localStorage.setItem("autoThemeEnabled","true");const _=w();r(_)},disableAutoTheme:()=>{u(!1),localStorage.setItem("autoThemeEnabled","false")},resetToDefault:()=>{localStorage.removeItem("chatTheme"),localStorage.removeItem("customBackground"),localStorage.removeItem("backgroundOpacity"),localStorage.removeItem("autoThemeEnabled"),r("default"),s(null),i(.3),u(!1)}};return a.createElement(xf.Provider,{value:E},e)},Ng=({onClose:e})=>{const{currentTheme:t,customBackground:r,backgroundOpacity:n,isAutoThemeEnabled:s,timeThemes:o,defaultTheme:i,getCurrentThemeConfig:l,getSuggestedTheme:u,setTheme:c,setCustomBackground:d,setBackgroundOpacity:f,enableAutoTheme:g,disableAutoTheme:w,resetToDefault:y}=Sf(),[E,_]=C.useState("presets"),[m,h]=C.useState(""),p=N=>{const O=N.target.files[0];if(!O)return;if(!O.type.startsWith("image/")){h("Please select a valid image file");return}if(O.size>5*1024*1024){h("Image must be smaller than 5MB");return}const j=new FileReader;j.onload=A=>{try{d(A.target.result),c("custom"),h("")}catch(ue){h("Failed to process image"),console.error("Error processing background image:",ue)}},j.onerror=()=>{h("Failed to read image file")},j.readAsDataURL(O),N.target.value=""},v=N=>{s||c(N)},k=()=>{d(null),c("default")},x=u(),b=l();return a.createElement("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"w-full max-w-4xl h-[90vh] bg-white/90 backdrop-blur-lg rounded-2xl border border-white/30 shadow-lg flex flex-col"},a.createElement("div",{className:"flex items-center justify-between p-6 border-b border-white/30"},a.createElement("div",null,a.createElement("h2",{className:"text-2xl font-bold bg-gradient-to-r from-pink-500 to-rose-500 bg-clip-text text-transparent"},"Chat Themes"),a.createElement("p",{className:"text-sm text-gray-600 mt-1"},"Current: ",b.mood," ",b.name)),a.createElement("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-lg transition-colors"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),a.createElement("div",{className:"flex space-x-1 p-4 bg-white/40"},[{key:"presets",label:"Time Themes",icon:""},{key:"custom",label:"Custom Background",icon:""},{key:"settings",label:"Settings",icon:""}].map(N=>a.createElement("button",{key:N.key,onClick:()=>_(N.key),className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all duration-300 ${E===N.key?"bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg":"bg-white/60 text-gray-700 hover:bg-white/80"}`},a.createElement("span",{className:"text-lg mr-2"},N.icon),a.createElement("span",{className:"text-sm"},N.label)))),a.createElement("div",{className:"flex-1 p-6 overflow-y-auto"},E==="presets"&&a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"mb-6 p-4 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl border border-purple-200"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("h3",{className:"font-semibold text-gray-800"}," Adaptive Time Themes"),a.createElement("p",{className:"text-sm text-gray-600"},"Automatically change theme based on time of day")),a.createElement("button",{onClick:s?w:g,className:`px-4 py-2 rounded-lg font-medium transition-colors text-sm ${s?"bg-purple-500 text-white hover:bg-purple-600":"bg-gray-300 text-gray-700 hover:bg-gray-400"}`},s?"ON":"OFF"))),!s&&a.createElement("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border border-blue-200"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("h3",{className:"font-semibold text-gray-800"},"Suggested for Now"),a.createElement("p",{className:"text-sm text-gray-600"},o[x].mood," ",o[x].name),a.createElement("p",{className:"text-xs text-gray-500"},o[x].time)),a.createElement("button",{onClick:()=>v(x),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm"},"Apply"))),a.createElement("div",{className:`p-4 rounded-xl border-2 transition-all ${s?"border-gray-300 bg-gray-100 cursor-not-allowed opacity-60":t==="default"?"border-pink-500 bg-pink-50 cursor-pointer":"border-gray-200 bg-white/60 hover:bg-white/80 cursor-pointer"}`,onClick:()=>v("default")},a.createElement("div",{className:`h-16 rounded-lg bg-gradient-to-br ${i.gradient} mb-3`}),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("h3",{className:"font-semibold"},i.mood," ",i.name),a.createElement("p",{className:"text-sm text-gray-600"},"Original soft romance theme")),t==="default"&&a.createElement("div",{className:"text-pink-500"},a.createElement("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},a.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}))))),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},Object.entries(o).map(([N,O])=>a.createElement("div",{key:N,className:`p-4 rounded-xl border-2 transition-all ${s?"border-gray-300 bg-gray-100 cursor-not-allowed opacity-60":t===N?"border-pink-500 bg-pink-50 cursor-pointer":"border-gray-200 bg-white/60 hover:bg-white/80 cursor-pointer"}`,onClick:()=>v(N)},a.createElement("div",{className:`h-16 rounded-lg bg-gradient-to-br ${O.gradient} mb-3`}),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("h3",{className:"font-semibold"},O.mood," ",O.name.split(" - ")[1]),a.createElement("p",{className:"text-xs text-gray-500"},O.time)),t===N&&a.createElement("div",{className:"text-pink-500"},a.createElement("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},a.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})))))))),E==="custom"&&a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"text-center"},a.createElement("h3",{className:"text-lg font-semibold mb-2"},"Custom Background"),a.createElement("p",{className:"text-gray-600 text-sm mb-6"},"Upload your favorite couple photo as chat background")),r&&a.createElement("div",{className:"relative"},a.createElement("div",{className:"h-40 rounded-xl overflow-hidden relative"},a.createElement("img",{src:r,alt:"Custom background",className:"w-full h-full object-cover",style:{opacity:n}}),a.createElement("div",{className:"absolute inset-0 bg-black/10"})),a.createElement("button",{onClick:k,className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",title:"Remove background"},a.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})))),a.createElement("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-pink-400 transition-colors"},a.createElement("input",{type:"file",accept:"image/*",onChange:p,className:"hidden",id:"background-upload"}),a.createElement("label",{htmlFor:"background-upload",className:"cursor-pointer"},a.createElement("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})),a.createElement("p",{className:"text-lg font-medium text-gray-700 mb-2"},"Click to upload background"),a.createElement("p",{className:"text-sm text-gray-500"},"PNG, JPG up to 5MB"))),m&&a.createElement("div",{className:"text-center p-3 bg-red-100 border border-red-300 rounded-lg text-red-700 text-sm"},m),r&&a.createElement("div",{className:"space-y-3"},a.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Background Opacity: ",Math.round(n*100),"%"),a.createElement("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:n,onChange:N=>f(parseFloat(N.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),a.createElement("div",{className:"flex justify-between text-xs text-gray-500"},a.createElement("span",null,"Subtle"),a.createElement("span",null,"Bold")))),E==="settings"&&a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"text-center"},a.createElement("h3",{className:"text-lg font-semibold mb-2"},"Theme Settings"),a.createElement("p",{className:"text-gray-600 text-sm mb-6"},"Manage your theme preferences")),a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"p-4 bg-white/60 rounded-lg"},a.createElement("h4",{className:"font-medium mb-2"},"Current Theme"),a.createElement("p",{className:"text-sm text-gray-600"},b.mood," ",b.name)),a.createElement("button",{onClick:y,className:"w-full py-3 px-4 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"},"Reset to Default Theme"),a.createElement("div",{className:"p-4 bg-blue-50 rounded-lg"},a.createElement("h4",{className:"font-medium mb-2 text-blue-800"}," Tips"),a.createElement("ul",{className:"text-sm text-blue-700 space-y-1"},a.createElement("li",null," Time themes change the mood for different parts of the day"),a.createElement("li",null," Custom backgrounds work best with couple photos"),a.createElement("li",null," Lower opacity keeps text readable"),a.createElement("li",null," Themes are saved and sync across devices"))))))))},Cg=({theme:e})=>{const u={dawn:()=>a.createElement(a.Fragment,null,a.createElement("div",{className:"absolute bottom-0 right-10 w-32 h-32 bg-gradient-to-t from-orange-300 via-yellow-300 to-transparent rounded-full opacity-80 animate-pulse"}),a.createElement("div",{className:"absolute bottom-16 right-16 w-20 h-20"},[...Array(8)].map((c,d)=>a.createElement("div",{key:d,className:"absolute w-1 h-8 bg-gradient-to-t from-orange-400 to-transparent opacity-60",style:{transform:`rotate(${d*45}deg)`,transformOrigin:"50% 100%",left:"50%",bottom:"0"}}))),a.createElement("div",{className:"absolute top-10 left-10 w-16 h-8 bg-white/40 rounded-full blur-sm"}),a.createElement("div",{className:"absolute top-8 left-14 w-12 h-6 bg-white/30 rounded-full blur-sm"}),a.createElement("div",{className:"absolute top-20 right-20 w-20 h-10 bg-white/35 rounded-full blur-sm"})),morning:()=>a.createElement(a.Fragment,null,a.createElement("div",{className:"absolute top-10 right-10 w-24 h-24 bg-gradient-radial from-yellow-300 via-yellow-400 to-orange-400 rounded-full opacity-90 animate-spin",style:{animationDuration:"20s"}}),a.createElement("div",{className:"absolute top-16 right-16 w-16 h-16"},[...Array(12)].map((c,d)=>a.createElement("div",{key:d,className:"absolute w-0.5 h-6 bg-gradient-to-t from-yellow-400 to-transparent opacity-80",style:{transform:`rotate(${d*30}deg)`,transformOrigin:"50% 100%",left:"50%",bottom:"0"}}))),a.createElement("div",{className:"absolute top-16 left-8 w-20 h-10 bg-white/50 rounded-full blur-sm animate-float"}),a.createElement("div",{className:"absolute top-12 left-12 w-16 h-8 bg-white/40 rounded-full blur-sm"}),a.createElement("div",{className:"absolute top-8 right-40 w-24 h-12 bg-white/45 rounded-full blur-sm animate-float-delayed"})),midday:()=>a.createElement(a.Fragment,null,a.createElement("div",{className:"absolute top-6 left-1/2 transform -translate-x-1/2 w-28 h-28 bg-gradient-radial from-yellow-200 via-yellow-300 to-orange-300 rounded-full opacity-95"}),a.createElement("div",{className:"absolute top-12 left-1/2 transform -translate-x-1/2 w-20 h-20"},[...Array(16)].map((c,d)=>a.createElement("div",{key:d,className:"absolute w-0.5 h-8 bg-gradient-to-t from-yellow-300 to-transparent opacity-70",style:{transform:`rotate(${d*22.5}deg)`,transformOrigin:"50% 100%",left:"50%",bottom:"0"}}))),a.createElement("div",{className:"absolute top-20 right-12 w-18 h-9 bg-white/30 rounded-full blur-sm"}),a.createElement("div",{className:"absolute top-24 left-16 w-16 h-8 bg-white/25 rounded-full blur-sm"})),afternoon:()=>a.createElement(a.Fragment,null,a.createElement("div",{className:"absolute top-12 right-12 w-26 h-26 bg-gradient-radial from-amber-200 via-orange-300 to-red-300 rounded-full opacity-85 animate-pulse",style:{animationDuration:"3s"}}),a.createElement("div",{className:"absolute top-18 right-18 w-18 h-18"},[...Array(10)].map((c,d)=>a.createElement("div",{key:d,className:"absolute w-0.5 h-7 bg-gradient-to-t from-amber-400 to-transparent opacity-75",style:{transform:`rotate(${d*36}deg)`,transformOrigin:"50% 100%",left:"50%",bottom:"0"}}))),a.createElement("div",{className:"absolute top-8 left-10 w-22 h-11 bg-white/40 rounded-full blur-sm animate-float"}),a.createElement("div",{className:"absolute top-14 left-14 w-18 h-9 bg-white/35 rounded-full blur-sm"}),a.createElement("div",{className:"absolute top-6 right-40 w-24 h-12 bg-white/38 rounded-full blur-sm animate-float-delayed"})),evening:()=>a.createElement(a.Fragment,null,a.createElement("div",{className:"absolute bottom-8 right-8 w-32 h-32 bg-gradient-radial from-orange-400 via-red-400 to-purple-400 rounded-full opacity-90"}),a.createElement("div",{className:"absolute bottom-14 right-14 w-24 h-24"},[...Array(12)].map((c,d)=>a.createElement("div",{key:d,className:"absolute w-1 h-10 bg-gradient-to-t from-orange-500 via-yellow-400 to-transparent opacity-80",style:{transform:`rotate(${d*30}deg)`,transformOrigin:"50% 100%",left:"50%",bottom:"0"}}))),a.createElement("div",{className:"absolute top-12 left-8 w-24 h-12 bg-gradient-to-r from-orange-200/40 to-pink-200/40 rounded-full blur-sm animate-float"}),a.createElement("div",{className:"absolute top-8 left-12 w-20 h-10 bg-gradient-to-r from-yellow-200/35 to-orange-200/35 rounded-full blur-sm"}),a.createElement("div",{className:"absolute top-16 right-32 w-28 h-14 bg-gradient-to-r from-pink-200/30 to-purple-200/30 rounded-full blur-sm animate-float-delayed"})),night:()=>a.createElement(a.Fragment,null,a.createElement("div",{className:"absolute top-8 right-12 w-20 h-20 bg-gradient-radial from-yellow-100 via-gray-100 to-gray-200 rounded-full opacity-90"}),a.createElement("div",{className:"absolute top-10 right-14 w-3 h-3 bg-gray-300/50 rounded-full"}),a.createElement("div",{className:"absolute top-14 right-16 w-2 h-2 bg-gray-300/40 rounded-full"}),a.createElement("div",{className:"absolute top-12 right-18 w-2 h-2 bg-gray-300/45 rounded-full"}),[...Array(15)].map((c,d)=>a.createElement("div",{key:d,className:"absolute w-1 h-1 bg-yellow-200 rounded-full animate-twinkle",style:{top:`${10+d*7%60}%`,left:`${15+d*13%70}%`,animationDelay:`${d*.5}s`,animationDuration:"2s"}})),a.createElement("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-indigo-900/30 to-transparent"}),[...Array(8)].map((c,d)=>a.createElement("div",{key:d,className:"absolute bottom-0 w-2 h-8 bg-yellow-300/40 opacity-80 animate-pulse",style:{left:`${20+d*10}%`,animationDelay:`${d*.3}s`,animationDuration:"3s"}}))),midnight:()=>a.createElement(a.Fragment,null,a.createElement("div",{className:"absolute top-6 right-8 w-16 h-16 relative"},a.createElement("div",{className:"w-16 h-16 bg-gradient-radial from-gray-100 to-gray-300 rounded-full opacity-95"}),a.createElement("div",{className:"absolute top-0 right-2 w-12 h-16 bg-slate-900/20 rounded-full"})),[...Array(25)].map((c,d)=>a.createElement("div",{key:d,className:"absolute w-1 h-1 bg-white rounded-full animate-twinkle",style:{top:`${5+d*11%80}%`,left:`${10+d*17%80}%`,animationDelay:`${d*.4}s`,animationDuration:"3s",opacity:Math.random()*.8+.2}})),a.createElement("div",{className:"absolute top-20 left-20 w-16 h-0.5 bg-gradient-to-r from-transparent via-white to-transparent opacity-80 animate-shooting-star"}),a.createElement("div",{className:"absolute top-16 left-16 w-32 h-16 bg-slate-700/20 rounded-full blur-lg"}),a.createElement("div",{className:"absolute top-10 right-24 w-28 h-14 bg-slate-600/15 rounded-full blur-lg"}))};return a.createElement("div",{className:"absolute inset-0 pointer-events-none overflow-hidden"},u[e]&&u[e]())},Tg=(e,t="general",r=null)=>({title:e.trim(),category:t,template:r,entries:[],createdAt:new Date().toISOString(),lastModified:new Date().toISOString(),participants:["You","Them"]}),Pg=(e,t,r="text")=>({id:`entry_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,author:e,content:t.trim(),type:r,timestamp:new Date().toISOString(),formattedDate:new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}),lr={anniversary:{name:"Anniversary",emoji:"",color:"from-pink-400 to-rose-400",description:"Special milestones and anniversaries"},date:{name:"Date Night",emoji:"",color:"from-red-400 to-pink-400",description:"Romantic dates and special evenings"},travel:{name:"Adventures",emoji:"",color:"from-blue-400 to-cyan-400",description:"Trips and adventures together"},letters:{name:"Love Letters",emoji:"",color:"from-purple-400 to-pink-400",description:"Deep thoughts and love letters"},moments:{name:"Sweet Moments",emoji:"",color:"from-yellow-400 to-orange-400",description:"Funny stories and cute interactions"},dreams:{name:"Future Dreams",emoji:"",color:"from-indigo-400 to-purple-400",description:"Plans, hopes and dreams together"},photos:{name:"Photo Memories",emoji:"",color:"from-green-400 to-teal-400",description:"Pictures with stories and captions"},general:{name:"General",emoji:"",color:"from-gray-400 to-slate-400",description:"Miscellaneous memories"}},_s={anniversary:{title:"Our [Number] Year Anniversary",prompts:["How did this year feel?","What was your favorite memory from this year?","What are you looking forward to next year?"]},date:{title:"[Date Location/Activity]",prompts:["What made this date special?","Favorite moment from today","How did you feel during this date?"]},travel:{title:"Our Trip to [Destination]",prompts:["Best moment from this trip","Funniest thing that happened","What we learned about each other"]},letters:{title:"A Letter to You",prompts:["What I want you to know...","How you make me feel...","Why I love you..."]},moments:{title:"A Sweet Moment",prompts:["What happened?","What made this moment special?","How did we both react?"]},dreams:{title:"Our Future Dreams",prompts:["What do we dream about together?","Where do we see ourselves?","What are we most excited about?"]},photos:{title:"Photo Memory",prompts:["What was happening in this photo?","What do you remember about this day?","Why is this photo special to us?"]},general:{title:"A Memory Together",prompts:["What happened?","How did it make you feel?","Why is this memory important?"]}},Po=e=>`memories_${e}`,Xr=async e=>{try{const t=localStorage.getItem(Po(e));return(t?JSON.parse(t):[]).sort((n,s)=>new Date(s.createdAt)-new Date(n.createdAt))}catch(t){return console.error("Error loading memories:",t),[]}},jg=async(e,t)=>{try{const r=await Xr(e),n={...t,id:`memory_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};return r.push(n),localStorage.setItem(Po(e),JSON.stringify(r)),!0}catch(r){return console.error("Error adding memory:",r),!1}},Og=async(e,t)=>{try{const n=(await Xr(e)).filter(s=>s.id!==t);return localStorage.setItem(Po(e),JSON.stringify(n)),!0}catch(r){return console.error("Error deleting memory:",r),!1}},Lg=async(e,t,r)=>{try{const n=await Xr(e),s=n.findIndex(o=>o.id===t);return s!==-1?(n[s].entries.push(r),n[s].lastModified=new Date().toISOString(),localStorage.setItem(Po(e),JSON.stringify(n)),!0):!1}catch(n){return console.error("Error adding entry to memory:",n),!1}},Ag=async(e,t)=>{const r=await Xr(e);if(!t.trim())return r;const n=t.toLowerCase();return r.filter(s=>s.title.toLowerCase().includes(n)||s.entries.some(o=>o.content.toLowerCase().includes(n)))},Ig=async(e,t)=>{const r=await Xr(e);return t==="all"?r:r.filter(n=>n.category===t)},$g=({memory:e,onClick:t})=>{const r=lr[e.category]||lr.general,n=e.entries.length,s=e.entries[e.entries.length-1],o=()=>{if(!s)return"No entries yet...";const c=s.content;return c.length>120?c.substring(0,120)+"...":c},i=c=>new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),u=(()=>{const c=[...new Set(e.entries.map(d=>d.author))];return c.length>0?c:["No entries yet"]})();return a.createElement("div",{onClick:t,className:"group relative bg-white/80 backdrop-blur-sm rounded-2xl border border-white/50 shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer transform hover:scale-105 overflow-hidden"},a.createElement("div",{className:`h-2 bg-gradient-to-r ${r.color}`}),a.createElement("div",{className:"p-5"},a.createElement("div",{className:"flex items-start justify-between mb-4"},a.createElement("div",{className:"flex items-center space-x-2"},a.createElement("span",{className:"text-2xl"},r.emoji),a.createElement("div",null,a.createElement("h3",{className:"font-bold text-gray-800 text-lg leading-tight group-hover:text-rose-600 transition-colors"},e.title),a.createElement("p",{className:"text-xs text-gray-500 mt-1"},r.name,"  ",i(e.createdAt)))),a.createElement("div",{className:"bg-gradient-to-r from-pink-100 to-rose-100 text-rose-600 px-2 py-1 rounded-full text-xs font-medium"},n," ",n===1?"entry":"entries")),a.createElement("div",{className:"mb-4"},a.createElement("p",{className:"text-gray-600 text-sm leading-relaxed"},o())),a.createElement("div",{className:"flex items-center justify-between text-xs text-gray-500"},a.createElement("div",{className:"flex items-center space-x-1"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})),a.createElement("span",null,u.join(" & "))),s&&a.createElement("div",{className:"flex items-center space-x-1"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})),a.createElement("span",null,"Updated ",i(e.lastModified)))),a.createElement("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-rose-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})))),a.createElement("div",{className:"absolute inset-0 bg-gradient-to-r from-pink-50/0 to-rose-50/0 group-hover:from-pink-50/30 group-hover:to-rose-50/30 transition-all duration-300 pointer-events-none"}))},Rg=({currentRoom:e,currentUser:t,onClose:r,onMemoryCreated:n})=>{const[s,o]=C.useState(1),[i,l]=C.useState(""),[u,c]=C.useState(null),[d,f]=C.useState(""),[g,w]=C.useState(!1),y=v=>{l(v),o(2)},E=v=>{c(v);const k=_s[v];k&&f(k.title),o(3)},_=async()=>{if(d.trim()){w(!0);try{const v=Tg(d,i,u);await jg(e,v)?n():alert("Failed to create memory. Please try again.")}catch(v){console.error("Error creating memory:",v),alert("Error creating memory. Please try again.")}finally{w(!1)}}},m=()=>{s>1&&o(s-1)},h=i?lr[i]:null,p=u?_s[u]:null;return a.createElement("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-60"},a.createElement("div",{className:"w-full max-w-2xl bg-white/95 backdrop-blur-lg rounded-2xl border border-white/30 shadow-2xl overflow-hidden"},a.createElement("div",{className:"p-6 border-b border-gray-200/50 bg-gradient-to-r from-pink-50 to-rose-50"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("h2",{className:"text-2xl font-bold text-gray-800"}," Create New Memory"),a.createElement("p",{className:"text-gray-600 mt-1"},"Step ",s," of 3: ",s===1?"Choose Category":s===2?"Select Template":"Set Title")),a.createElement("button",{onClick:r,className:"p-2 hover:bg-white/50 rounded-xl transition-colors"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),a.createElement("div",{className:"mt-4 bg-gray-200 rounded-full h-2"},a.createElement("div",{className:"bg-gradient-to-r from-pink-500 to-rose-500 h-2 rounded-full transition-all duration-500",style:{width:`${s/3*100}%`}}))),a.createElement("div",{className:"p-6"},s===1&&a.createElement("div",null,a.createElement("h3",{className:"text-lg font-semibold text-gray-800 mb-4"},"What kind of memory would you like to create?"),a.createElement("div",{className:"grid grid-cols-2 gap-4"},Object.entries(lr).map(([v,k])=>a.createElement("button",{key:v,onClick:()=>y(v),className:"group p-4 bg-gradient-to-br from-white to-gray-50 border border-gray-200 rounded-xl hover:shadow-lg transition-all duration-300 text-left hover:scale-105"},a.createElement("div",{className:"flex items-start space-x-3"},a.createElement("span",{className:"text-3xl"},k.emoji),a.createElement("div",null,a.createElement("h4",{className:"font-semibold text-gray-800 group-hover:text-rose-600"},k.name),a.createElement("p",{className:"text-sm text-gray-500 mt-1 leading-relaxed"},k.description))))))),s===2&&h&&a.createElement("div",null,a.createElement("div",{className:"flex items-center space-x-2 mb-4"},a.createElement("span",{className:"text-2xl"},h.emoji),a.createElement("h3",{className:"text-lg font-semibold text-gray-800"},"Choose a template for your ",h.name.toLowerCase())),a.createElement("div",{className:"space-y-3"},_s[i]&&a.createElement("button",{onClick:()=>E(i),className:"w-full p-4 bg-gradient-to-r from-pink-50 to-rose-50 border border-pink-200 rounded-xl hover:shadow-lg transition-all duration-300 text-left group"},a.createElement("h4",{className:"font-semibold text-gray-800 group-hover:text-rose-600"}," ",h.name," Template"),a.createElement("p",{className:"text-sm text-gray-600 mt-1"},"Pre-made prompts: ",_s[i].prompts.join(", "))),a.createElement("button",{onClick:()=>E(null),className:"w-full p-4 bg-gradient-to-r from-gray-50 to-slate-50 border border-gray-200 rounded-xl hover:shadow-lg transition-all duration-300 text-left group"},a.createElement("h4",{className:"font-semibold text-gray-800 group-hover:text-rose-600"}," Custom Memory"),a.createElement("p",{className:"text-sm text-gray-600 mt-1"},"Create your own memory from scratch")))),s===3&&a.createElement("div",null,a.createElement("div",{className:"flex items-center space-x-2 mb-4"},a.createElement("span",{className:"text-2xl"},h.emoji),a.createElement("h3",{className:"text-lg font-semibold text-gray-800"},"Give your memory a title")),a.createElement("div",{className:"mb-6"},a.createElement("input",{type:"text",value:d,onChange:v=>f(v.target.value),placeholder:"Enter memory title...",className:"w-full p-4 bg-white border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-pink-300 text-lg",autoFocus:!0}),p&&a.createElement("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg"},a.createElement("p",{className:"text-sm font-medium text-blue-800 mb-2"},"Template prompts:"),a.createElement("ul",{className:"text-sm text-blue-600 space-y-1"},p.prompts.map((v,k)=>a.createElement("li",{key:k}," ",v))))))),a.createElement("div",{className:"p-6 border-t border-gray-200/50 bg-gray-50/50 flex justify-between"},a.createElement("div",null,s>1&&a.createElement("button",{onClick:m,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors"}," Back")),a.createElement("div",{className:"flex space-x-3"},a.createElement("button",{onClick:r,className:"px-6 py-2 text-gray-600 hover:text-gray-800 transition-colors"},"Cancel"),s===3&&a.createElement("button",{onClick:_,disabled:!d.trim()||g,className:"px-6 py-2 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl hover:from-pink-600 hover:to-rose-600 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"},g?"Creating...":"Create Memory")))))},Mg=({memory:e,currentRoom:t,currentUser:r,onClose:n,onMemoryUpdated:s,onMemoryDeleted:o})=>{const[i,l]=C.useState(""),[u,c]=C.useState(!1),[d,f]=C.useState(!1),g=C.useRef(null),w=C.useRef(null),y=lr[e.category]||lr.general;C.useEffect(()=>{u&&g.current&&g.current.focus()},[u]),C.useEffect(()=>{E()},[e.entries]);const E=()=>{var v;(v=w.current)==null||v.scrollIntoView({behavior:"smooth"})},_=async()=>{if(!i.trim())return;const v=Pg(r,i);await Lg(t,e.id,v)?(l(""),c(!1),s()):alert("Failed to add entry. Please try again.")},m=async()=>{await Og(t,e.id)?o():alert("Failed to delete memory. Please try again.")},h=v=>{const k=new Date(v),x=new Date,b=x-k,N=Math.floor(b/(1e3*60)),O=Math.floor(b/(1e3*60*60)),j=Math.floor(b/(1e3*60*60*24));return N<1?"Just now":N<60?`${N}m ago`:O<24?`${O}h ago`:j<7?`${j}d ago`:k.toLocaleDateString("en-US",{month:"short",day:"numeric",year:k.getFullYear()!==x.getFullYear()?"numeric":void 0})},p=v=>{v.key==="Enter"&&(v.ctrlKey||v.metaKey)?(v.preventDefault(),_()):v.key==="Escape"&&(c(!1),l(""))};return a.createElement("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"w-full max-w-4xl h-[95vh] bg-white/95 backdrop-blur-lg rounded-2xl border border-white/30 shadow-2xl flex flex-col overflow-hidden"},a.createElement("div",{className:`p-6 border-b border-white/30 bg-gradient-to-r ${y.color} text-white`},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"flex items-center space-x-3"},a.createElement("span",{className:"text-3xl"},y.emoji),a.createElement("div",null,a.createElement("h1",{className:"text-2xl font-bold"},e.title),a.createElement("p",{className:"text-white/80 text-sm"},e.entries.length," ",e.entries.length===1?"entry":"entries","  Created ",new Date(e.createdAt).toLocaleDateString()))),a.createElement("div",{className:"flex items-center space-x-2"},a.createElement("button",{onClick:()=>f(!0),className:"p-2 hover:bg-white/20 rounded-xl transition-colors",title:"Delete Memory"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}))),a.createElement("button",{onClick:n,className:"p-2 hover:bg-white/20 rounded-xl transition-colors"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))))),a.createElement("div",{className:"flex-1 p-6 overflow-y-auto bg-gradient-to-b from-rose-25 to-pink-25"},e.entries.length===0?a.createElement("div",{className:"flex flex-col items-center justify-center h-full text-center"},a.createElement("div",{className:"text-6xl mb-4"},y.emoji),a.createElement("h3",{className:"text-xl font-semibold text-gray-600 mb-2"},"Start Your Memory"),a.createElement("p",{className:"text-gray-500 mb-6 max-w-md"},'This memory is waiting for its first entry. Share your thoughts, feelings, or experiences about "',e.title,'".'),a.createElement("button",{onClick:()=>c(!0),className:"px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl hover:from-pink-600 hover:to-rose-600 transition-all duration-300 font-medium shadow-lg"}," Write First Entry")):a.createElement("div",{className:"space-y-6"},e.entries.map((v,k)=>a.createElement("div",{key:v.id,className:"relative"},a.createElement("div",{className:`p-4 rounded-2xl shadow-sm ${v.author===r?"bg-gradient-to-r from-pink-50 to-rose-50 border-l-4 border-pink-400 ml-8":"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-400 mr-8"}`},a.createElement("div",{className:"flex items-center justify-between mb-3"},a.createElement("div",{className:"flex items-center space-x-2"},a.createElement("span",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-medium text-sm ${v.author===r?"bg-pink-500":"bg-blue-500"}`},v.author==="You"?"":""),a.createElement("span",{className:"font-medium text-gray-800"},v.author)),a.createElement("span",{className:"text-xs text-gray-500"},h(v.timestamp))),a.createElement("div",{className:"prose prose-sm max-w-none"},a.createElement("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap m-0"},v.content))),k<e.entries.length-1&&a.createElement("div",{className:"flex justify-center my-4"},a.createElement("div",{className:"w-px h-4 bg-gradient-to-b from-pink-300 to-rose-300"})))),a.createElement("div",{ref:w}))),a.createElement("div",{className:"p-6 border-t border-gray-200/50 bg-white/80"},u?a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"flex items-center space-x-2 mb-2"},a.createElement("span",{className:"w-8 h-8 bg-pink-500 rounded-full flex items-center justify-center text-white font-medium text-sm"},""),a.createElement("span",{className:"font-medium text-gray-800"},r)),a.createElement("textarea",{ref:g,value:i,onChange:v=>l(v.target.value),onKeyDown:p,placeholder:"Share your thoughts about this memory... (Ctrl/Cmd + Enter to save)",className:"w-full p-4 bg-white border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-pink-300 resize-none min-h-[100px]",rows:4}),a.createElement("div",{className:"flex justify-between items-center"},a.createElement("p",{className:"text-xs text-gray-500"},"Press Ctrl/Cmd + Enter to save, Escape to cancel"),a.createElement("div",{className:"flex space-x-2"},a.createElement("button",{onClick:()=>{c(!1),l("")},className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors"},"Cancel"),a.createElement("button",{onClick:_,disabled:!i.trim(),className:"px-6 py-2 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl hover:from-pink-600 hover:to-rose-600 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"},"Add Entry")))):a.createElement("button",{onClick:()=>c(!0),className:"w-full p-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-pink-400 hover:bg-pink-50 transition-all duration-300 text-gray-600 hover:text-pink-600"},a.createElement("div",{className:"flex items-center justify-center space-x-2"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})),a.createElement("span",null,"Add your thoughts to this memory...")))),d&&a.createElement("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-10"},a.createElement("div",{className:"bg-white rounded-2xl p-6 max-w-md mx-4 shadow-2xl"},a.createElement("h3",{className:"text-lg font-semibold text-gray-800 mb-2"},"Delete Memory?"),a.createElement("p",{className:"text-gray-600 mb-6"},'Are you sure you want to delete "',e.title,'"? This will permanently remove all entries and cannot be undone.'),a.createElement("div",{className:"flex space-x-3 justify-end"},a.createElement("button",{onClick:()=>f(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors"},"Cancel"),a.createElement("button",{onClick:m,className:"px-6 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors"},"Delete"))))))},Dg=({currentRoom:e,currentUser:t,onClose:r})=>{const[n,s]=C.useState([]),[o,i]=C.useState([]),[l,u]=C.useState(""),[c,d]=C.useState("all"),[f,g]=C.useState(!1),[w,y]=C.useState(null),[E,_]=C.useState("gallery"),[m,h]=C.useState(!1);C.useEffect(()=>{e&&p()},[e]),C.useEffect(()=>{v()},[n,l,c]);const p=async()=>{try{h(!0);const A=await Xr(e);s(A)}catch(A){console.error("Error loading memories:",A),s([])}finally{h(!1)}},v=async()=>{try{let A=n;c!=="all"&&(A=await Ig(e,c)),l.trim()&&(A=await Ag(e,l),c!=="all"&&(A=A.filter(ue=>ue.category===c))),i(A)}catch(A){console.error("Error filtering memories:",A),i([])}},k=()=>{p(),g(!1)},x=A=>{y(A),_("editor")},b=()=>{p(),y(null),_("gallery")},N=()=>{p(),y(null),_("gallery")},j=(()=>{const A={};return n.forEach(ue=>{A[ue.category]=(A[ue.category]||0)+1}),A})();return E==="editor"&&w?a.createElement(Mg,{memory:w,currentRoom:e,currentUser:t,onClose:()=>_("gallery"),onMemoryUpdated:b,onMemoryDeleted:N}):a.createElement("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"w-full max-w-6xl h-[95vh] bg-gradient-to-br from-rose-50 to-pink-50 backdrop-blur-lg rounded-2xl border border-white/30 shadow-2xl flex flex-col overflow-hidden"},a.createElement("div",{className:"flex items-center justify-between p-6 border-b border-rose-200/50 bg-white/30"},a.createElement("div",null,a.createElement("h1",{className:"text-3xl font-bold bg-gradient-to-r from-pink-600 to-rose-600 bg-clip-text text-transparent"}," Our Memory Book"),a.createElement("p",{className:"text-rose-600/70 mt-1"},n.length," precious ",n.length===1?"memory":"memories"," together")),a.createElement("div",{className:"flex items-center space-x-3"},a.createElement("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl hover:from-pink-600 hover:to-rose-600 transition-all duration-300 font-medium shadow-lg"}," Create Memory"),a.createElement("button",{onClick:r,className:"p-2 hover:bg-rose-100 rounded-xl transition-colors"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-rose-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))))),a.createElement("div",{className:"p-6 border-b border-rose-200/50 bg-white/20"},a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"relative"},a.createElement("input",{type:"text",value:l,onChange:A=>u(A.target.value),placeholder:"Search memories...",className:"w-full pl-10 pr-4 py-3 bg-white/80 border border-rose-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-pink-300 transition-all duration-300"}),a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-rose-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}))),a.createElement("div",{className:"flex flex-wrap gap-2 justify-center sm:justify-start"},a.createElement("button",{onClick:()=>d("all"),className:`px-4 py-2 rounded-xl font-medium transition-all duration-300 whitespace-nowrap ${c==="all"?"bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg":"bg-white/60 text-rose-700 hover:bg-white/80"}`},"All (",n.length,")"),Object.entries(lr).map(([A,ue])=>{const He=j[A]||0;return He===0?null:a.createElement("button",{key:A,onClick:()=>d(A),className:`px-4 py-2 rounded-xl font-medium transition-all duration-300 whitespace-nowrap ${c===A?"bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg":"bg-white/60 text-rose-700 hover:bg-white/80"}`},ue.emoji," ",ue.name," (",He,")")})))),a.createElement("div",{className:"flex-1 p-6 overflow-y-auto"},m?a.createElement("div",{className:"flex flex-col items-center justify-center h-full text-center"},a.createElement("div",{className:"text-8xl mb-4 animate-pulse"},""),a.createElement("h3",{className:"text-2xl font-semibold text-rose-600 mb-2"},"Loading Memories..."),a.createElement("p",{className:"text-rose-500"},"Fetching your precious moments together")):o.length===0?a.createElement("div",{className:"flex flex-col items-center justify-center h-full text-center"},a.createElement("div",{className:"text-8xl mb-4"},""),a.createElement("h3",{className:"text-2xl font-semibold text-rose-600 mb-2"},n.length===0?"Your First Memory Awaits":"No Memories Found"),a.createElement("p",{className:"text-rose-500 mb-6 max-w-md"},n.length===0?"Create your first shared memory together. Document your journey, feelings, and special moments.":"Try adjusting your search or filter to find the memory you're looking for."),n.length===0&&a.createElement("button",{onClick:()=>g(!0),className:"px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl hover:from-pink-600 hover:to-rose-600 transition-all duration-300 font-medium shadow-lg"}," Create Your First Memory")):a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},o.map(A=>a.createElement($g,{key:A.id,memory:A,onClick:()=>x(A)})))),f&&a.createElement(Rg,{currentRoom:e,currentUser:t,onClose:()=>g(!1),onMemoryCreated:k})))},Ug=({user:e,couple:t,messages:r,onSendMessage:n})=>{var Vt,dl;const[s,o]=C.useState(""),[i,l]=C.useState(!1),[u,c]=C.useState([]),[d,f]=C.useState(!1),[g,w]=C.useState(null),[y,E]=C.useState(!1),[_,m]=C.useState(!1),[h,p]=C.useState(!1),[v,k]=C.useState(null),[x,b]=C.useState([]),[N,O]=C.useState(!1),[j,A]=C.useState(!1),[ue,He]=C.useState(!1),{getCurrentThemeConfig:es,currentTheme:Zr}=Sf(),we=es(),en=()=>t?t.user1_id===e.id?t.user2_name||"Your Partner":t.user1_name||"Your Partner":"Partner",T=()=>we.background?{backgroundImage:`url(${we.background})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",opacity:we.opacity||.3}:{},I=()=>we.background?"bg-gray-100":`bg-gradient-to-br ${we.gradient||"from-rose-100 to-teal-100"}`,R=L=>{const G="p-3 rounded-lg max-w-xs";return we.background||we.bubbleStyle==="adaptive"?L?`${G} bg-pink-600 text-white shadow-lg`:`${G} bg-white text-gray-800 shadow-lg border border-gray-200`:we.bubbleStyle==="dark"?L?`${G} bg-pink-500 text-white`:`${G} bg-gray-700 text-white`:L?`${G} bg-gradient-to-r from-pink-500 to-rose-500 text-white`:`${G} bg-gray-200 text-gray-800`};C.useEffect(()=>{const L=localStorage.getItem("messageDraft");L&&o(L)},[]),C.useEffect(()=>{const L=setTimeout(()=>{s.trim()?localStorage.setItem("messageDraft",s):localStorage.removeItem("messageDraft")},500);return()=>clearTimeout(L)},[s]);const q=L=>{L.preventDefault(),s.trim()&&(n(s),o(""),localStorage.removeItem("messageDraft"))},re=L=>{L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),q(L))},fr=L=>{n(L)},ot=L=>{const G=L.target.files;!G||G.length===0||(Array.from(G).forEach(z=>{if(z.size>10*1024*1024){alert(`File "${z.name}" is too large. Maximum size is 10MB.`);return}const H=new FileReader;H.onerror=()=>{console.error("Error reading file:",z.name),alert(`Error uploading "${z.name}". Please try again.`)},z.type.startsWith("image/")?(H.onload=wt=>{try{const he=wt.target.result;c(jo=>[...jo,he]),n(he)}catch(he){console.error("Error processing image:",he),alert(`Error uploading image "${z.name}".`)}},H.readAsDataURL(z)):z.type==="application/pdf"?(H.onload=wt=>{try{const he={type:"pdf",name:z.name,data:wt.target.result,size:z.size};n(JSON.stringify(he))}catch(he){console.error("Error processing PDF:",he),alert(`Error uploading PDF "${z.name}".`)}},H.readAsDataURL(z)):z.type.startsWith("video/")?(H.onload=wt=>{try{const he={type:"video",name:z.name,data:wt.target.result,size:z.size};n(JSON.stringify(he))}catch(he){console.error("Error processing video:",he),alert(`Error uploading video "${z.name}".`)}},H.readAsDataURL(z)):alert(`File type not supported: ${z.type}`)}),L.target.value="")},tn=async()=>{try{const L=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480},audio:!0}),G=new MediaRecorder(L),z=[];G.ondataavailable=H=>{H.data.size>0&&z.push(H.data)},G.onstop=()=>{const H=new Blob(z,{type:"video/webm"}),wt=new FileReader;wt.onload=he=>{const jo={type:"video",name:`video_${Date.now()}.webm`,data:he.target.result,size:H.size};n(JSON.stringify(jo))},wt.readAsDataURL(H),L.getTracks().forEach(he=>he.stop()),p(!1),m(!1),b([])},k(G),b(z),G.start(),p(!0)}catch(L){console.error("Error accessing camera:",L),alert("Could not access camera. Please check permissions.")}},it=()=>{v&&h&&v.stop()};return a.createElement("div",{className:`min-h-screen w-full ${I()} flex flex-col items-center justify-center p-4 relative transition-all duration-1000 ease-in-out`},we.background&&a.createElement("div",{className:"absolute inset-0 z-0",style:T()}),!we.background&&we.gradient&&Zr!=="default"&&Zr!=="custom"&&a.createElement(Cg,{theme:Zr}),a.createElement("div",{className:"w-full max-w-2xl h-[80vh] bg-white/70 backdrop-blur-lg rounded-2xl border border-white/30 shadow-lg flex flex-col relative z-10"},a.createElement("header",{className:"p-4 border-b border-white/30"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("h1",{className:"text-2xl font-bold text-gray-800"}," ",en()),a.createElement("p",{className:"text-sm text-gray-600 mt-1"},"Your private couple chat")),a.createElement("div",{className:"flex items-center space-x-2"},a.createElement("button",{onClick:()=>E(!0),className:"p-2 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-300",title:"Storage Manager"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"}))),a.createElement("button",{onClick:()=>f(!0),className:"p-2 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-lg hover:from-pink-600 hover:to-rose-600 transition-all duration-300",title:"Photo Albums"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"}))),a.createElement("button",{onClick:()=>O(!0),className:"p-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-lg hover:from-cyan-600 hover:to-blue-600 transition-all duration-300",title:"Relationship Stats"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v4a2 2 0 01-2 2h-2a2 2 0 00-2-2z"}))),a.createElement("button",{onClick:()=>A(!0),className:"p-2 bg-gradient-to-r from-violet-500 to-purple-500 text-white rounded-lg hover:from-violet-600 hover:to-purple-600 transition-all duration-300",title:"Theme Settings"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"}))),a.createElement("button",{onClick:()=>He(!0),className:"p-2 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-lg hover:from-emerald-600 hover:to-teal-600 transition-all duration-300",title:"Our Memory Book"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"}))),a.createElement("button",{onClick:()=>kf(),className:"px-3 py-1.5 text-sm bg-gradient-to-r from-pink-500 to-rose-500 text-white font-medium rounded-lg hover:from-pink-600 hover:to-rose-600 transition-all duration-300"},"Logout")))),a.createElement("main",{className:"flex-1 p-4 overflow-y-auto"},a.createElement("div",{className:"space-y-4"},r.map(L=>{var G,z;return a.createElement("div",{key:L.id,className:`flex ${L.user===(((G=e.user_metadata)==null?void 0:G.full_name)||e.email)?"justify-end":"justify-start"}`},a.createElement("div",{className:R(L.user===(((z=e.user_metadata)==null?void 0:z.full_name)||e.email))},L.text.startsWith("data:image/")||L.text.startsWith("http")?a.createElement("div",{className:"group relative"},a.createElement("img",{src:L.text,alt:"sent",className:"rounded-lg max-w-full h-auto"}),a.createElement("button",{onClick:()=>w(L.text),className:"absolute top-2 right-2 p-1.5 bg-white/80 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 hover:bg-white",title:"Save to Album"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-pink-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})))):(()=>{try{if(L.text.startsWith('{"type":"pdf"')){const H=JSON.parse(L.text);return a.createElement("div",{className:"flex items-center space-x-3 p-3 bg-white/20 rounded-lg"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-red-500",fill:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"})),a.createElement("div",{className:"flex-1"},a.createElement("p",{className:"font-medium text-sm"},H.name),a.createElement("p",{className:"text-xs opacity-70"},(H.size/1024).toFixed(1)," KB")),a.createElement("a",{href:H.data,download:H.name,className:"px-3 py-1 bg-white/30 rounded text-xs hover:bg-white/50 transition-colors"},"Download"))}else if(L.text.startsWith('{"type":"video"')){const H=JSON.parse(L.text);return a.createElement("div",{className:"space-y-2"},a.createElement("video",{controls:!0,className:"w-full max-w-sm rounded-lg",preload:"metadata"},a.createElement("source",{src:H.data,type:"video/webm"}),a.createElement("source",{src:H.data,type:"video/mp4"}),"Your browser does not support video playback."),a.createElement("div",{className:"flex items-center justify-between text-xs opacity-70"},a.createElement("span",null,H.name),a.createElement("span",null,(H.size/1024).toFixed(1)," KB")))}else return a.createElement("p",{className:"whitespace-pre-wrap"},L.text)}catch(H){return console.error("Error parsing message:",H),a.createElement("p",{className:"whitespace-pre-wrap"},L.text)}})(),a.createElement("p",{className:"text-xs opacity-70 mt-1 text-right"},L.timestamp)))}))),i&&a.createElement("div",{className:"p-4 border-t border-white/30 bg-white/40"},a.createElement("div",{className:"mb-4 space-y-2"},a.createElement("input",{type:"file",accept:"image/*,application/pdf,video/*",multiple:!0,onChange:ot,className:"hidden",id:"file-upload"}),a.createElement("label",{htmlFor:"file-upload",className:"cursor-pointer inline-flex items-center justify-center w-full py-3 px-4 bg-gradient-to-r from-pink-500 to-rose-500 text-white font-medium rounded-lg hover:from-pink-600 hover:to-rose-600 transition-all duration-300"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})),"Upload Files (Photos, Videos & PDFs)")),a.createElement("div",{className:"grid grid-cols-4 gap-3 max-h-32 overflow-y-auto"},u.concat(["https://via.placeholder.com/100/FFB6C1/FFFFFF?text=","https://via.placeholder.com/100/FFC0CB/FFFFFF?text=","https://via.placeholder.com/100/FFE4E1/FFFFFF?text=","https://via.placeholder.com/100/F0E68C/FFFFFF?text=","https://via.placeholder.com/100/DDA0DD/FFFFFF?text=","https://via.placeholder.com/100/98FB98/FFFFFF?text="]).map((L,G)=>a.createElement("img",{key:G,src:L,alt:"gallery",className:"rounded-lg cursor-pointer hover:scale-105 transition-transform duration-200 aspect-square object-cover",onClick:()=>fr(L)})))),a.createElement("footer",{className:"p-4 border-t border-white/30"},a.createElement("form",{onSubmit:q,className:"flex items-center space-x-3"},a.createElement("button",{type:"button",onClick:()=>l(!i),className:"p-2 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-lg hover:from-pink-600 hover:to-rose-600 transition-all duration-300"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"}))),a.createElement("button",{type:"button",onClick:()=>m(!0),className:"p-2 bg-gradient-to-r from-purple-500 to-indigo-500 text-white rounded-lg hover:from-purple-600 hover:to-indigo-600 transition-all duration-300",title:"Record Video Message"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"}))),a.createElement("textarea",{value:s,onChange:L=>o(L.target.value),onKeyDown:re,placeholder:"Type a message... (Enter to send, Shift+Enter for new line)",className:"flex-1 bg-white/80 border border-white/30 rounded-lg py-2 px-4 text-gray-700 focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all duration-300 resize-none",rows:"1",style:{minHeight:"40px",maxHeight:"120px",overflowY:s.split(`
`).length>3?"auto":"hidden"}}),a.createElement("button",{type:"submit",className:"px-4 py-2 bg-gradient-to-r from-pink-500 to-rose-500 text-white font-medium rounded-lg hover:from-pink-600 hover:to-rose-600 transition-all duration-300"},"Send")))),y&&a.createElement(xg,{currentRoom:t.couple_id,onClose:()=>E(!1)}),d&&a.createElement(kg,{currentRoom:t.couple_id,onClose:()=>f(!1)}),N&&a.createElement(Sg,{currentRoom:t.couple_id,currentUser:((Vt=e.user_metadata)==null?void 0:Vt.full_name)||e.email,onClose:()=>O(!1)}),g&&a.createElement("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"bg-white/90 backdrop-blur-lg rounded-2xl border border-white/30 shadow-lg p-6 w-full max-w-md"},a.createElement("h3",{className:"text-lg font-bold text-center text-gray-800 mb-4"},"Save to Album"),a.createElement("div",{className:"grid grid-cols-2 gap-3 mb-4"},[{key:"anniversary",label:"Anniversary",icon:""},{key:"favorites",label:"Favorites",icon:""},{key:"memories",label:"Memories",icon:""},{key:"special",label:"Special",icon:""}].map(L=>a.createElement("button",{key:L.key,onClick:()=>{const G=JSON.parse(localStorage.getItem(`photoAlbums_${e.id}`)||'{"anniversary":[],"favorites":[],"memories":[],"special":[]}'),z={id:Date.now()+Math.random(),src:g,name:`Photo_${Date.now()}`,uploadDate:new Date().toLocaleDateString(),size:0};G[L.key].push(z),localStorage.setItem(`photoAlbums_${e.id}`,JSON.stringify(G)),w(null)},className:"flex flex-col items-center justify-center p-4 bg-white/60 hover:bg-white/80 rounded-lg transition-all duration-300 border border-white/30"},a.createElement("span",{className:"text-2xl mb-2"},L.icon),a.createElement("span",{className:"text-sm font-medium"},L.label)))),a.createElement("button",{onClick:()=>w(null),className:"w-full py-2 px-4 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded-lg transition-colors"},"Cancel"))),_&&a.createElement("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"},a.createElement("div",{className:"bg-white/90 backdrop-blur-lg rounded-2xl border border-white/30 shadow-lg p-6 w-full max-w-md"},a.createElement("h3",{className:"text-lg font-bold text-center text-gray-800 mb-4"},"Record Video Message"),a.createElement("div",{className:"text-center space-y-4"},a.createElement("div",{className:"bg-gray-100 rounded-lg p-8"},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})),h?a.createElement("p",{className:"text-sm text-red-600 mt-2 font-medium"},"Recording in progress..."):a.createElement("p",{className:"text-sm text-gray-600 mt-2"},"Ready to record")),a.createElement("div",{className:"flex space-x-3"},h?a.createElement("button",{onClick:it,className:"flex-1 py-2 px-4 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all duration-300 font-medium"},"Stop Recording"):a.createElement("button",{onClick:tn,className:"flex-1 py-2 px-4 bg-gradient-to-r from-red-500 to-pink-500 text-white rounded-lg hover:from-red-600 hover:to-pink-600 transition-all duration-300 font-medium"},"Start Recording"),a.createElement("button",{onClick:()=>m(!1),className:"flex-1 py-2 px-4 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded-lg transition-colors"},"Cancel"))))),j&&a.createElement(Ng,{onClose:()=>A(!1)}),ue&&a.createElement(Dg,{currentRoom:t.couple_id,currentUser:((dl=e.user_metadata)==null?void 0:dl.full_name)||e.email,onClose:()=>He(!1)}))},Fg=({user:e,onPairingComplete:t})=>{var p;const[r,n]=C.useState("choose"),[s,o]=C.useState(""),[i,l]=C.useState(null),[u,c]=C.useState(!1),[d,f]=C.useState(""),[g,w]=C.useState("");C.useEffect(()=>{y()},[e]);const y=async()=>{try{const v=await wg(e.id);v.length>0&&(l(v[0]),n("waiting"))}catch(v){console.error("Error checking existing invites:",v)}},E=async()=>{var v,k,x,b,N;c(!0),f("");try{const O=await gg(e);o(O.invite_code),l(O),n("waiting")}catch(O){console.error("Create invite error:",O),(v=O.message)!=null&&v.includes("duplicate key")?f("Invite code already exists. Please try again."):(k=O.message)!=null&&k.includes("permission denied")||(x=O.message)!=null&&x.includes("RLS")?f("Permission denied. Please check your database permissions."):(b=O.message)!=null&&b.includes("relation")&&((N=O.message)!=null&&N.includes("does not exist"))?f("Database table not found. Please run the database setup first."):f(`Failed to create invite: ${O.message||"Unknown error"}`)}finally{c(!1)}},_=async()=>{if(!g.trim()){f("Please enter an invite code");return}c(!0),f("");try{if(!await Eg(g.toUpperCase())){f("Invalid invite code. Please check and try again.");return}const k=await vg(g.toUpperCase(),e);t(k)}catch(v){v.message.includes("cannot accept your own invite")?f("You cannot use your own invite code!"):v.message.includes("Invalid or expired")?f("Invalid or expired invite code"):f("Failed to join. Please check the invite code and try again."),console.error("Join couple error:",v)}finally{c(!1)}},m=()=>{navigator.clipboard.writeText(s)},h=((p=e.user_metadata)==null?void 0:p.full_name)||e.email;return a.createElement("div",{className:"min-h-screen w-full bg-gradient-to-br from-rose-100 to-teal-100 flex flex-col items-center justify-center p-4"},a.createElement("div",{className:"w-full max-w-md bg-white/80 backdrop-blur-lg rounded-2xl border border-white/30 shadow-2xl overflow-hidden"},a.createElement("div",{className:"p-6 bg-gradient-to-r from-pink-500 to-rose-500 text-white text-center"},a.createElement("div",{className:"text-4xl mb-2"},""),a.createElement("h1",{className:"text-2xl font-bold"},"Connect with Your Partner"),a.createElement("p",{className:"text-pink-100 mt-1"},"Create your private couple chat space")),a.createElement("div",{className:"p-6"},r==="choose"&&a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"text-center mb-6"},a.createElement("h2",{className:"text-xl font-semibold text-gray-800 mb-2"},"Welcome ",h,"!"),a.createElement("p",{className:"text-gray-600"},"How would you like to connect with your partner?")),a.createElement("button",{onClick:()=>n("create"),className:"w-full p-4 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl hover:from-pink-600 hover:to-rose-600 transition-all duration-300 shadow-lg"},a.createElement("div",{className:"text-2xl mb-2"},""),a.createElement("div",{className:"font-semibold"},"Create Invite"),a.createElement("div",{className:"text-sm text-pink-100"},"Generate a code for your partner to join")),a.createElement("button",{onClick:()=>n("join"),className:"w-full p-4 bg-gradient-to-r from-teal-500 to-cyan-500 text-white rounded-xl hover:from-teal-600 hover:to-cyan-600 transition-all duration-300 shadow-lg"},a.createElement("div",{className:"text-2xl mb-2"},""),a.createElement("div",{className:"font-semibold"},"Join Partner"),a.createElement("div",{className:"text-sm text-teal-100"},"Enter your partner's invite code"))),r==="create"&&a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"text-center mb-6"},a.createElement("h2",{className:"text-xl font-semibold text-gray-800 mb-2"},"Create Your Invite"),a.createElement("p",{className:"text-gray-600"},"Generate a unique code for your partner to join your chat")),d&&a.createElement("div",{className:"p-3 bg-red-100 border border-red-200 rounded-lg text-red-700 text-sm"},d),a.createElement("button",{onClick:E,disabled:u,className:"w-full p-4 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl hover:from-pink-600 hover:to-rose-600 transition-all duration-300 shadow-lg disabled:opacity-50"},u?"Creating...":"Generate Invite Code"),a.createElement("button",{onClick:()=>n("choose"),className:"w-full p-2 text-gray-600 hover:text-gray-800 transition-colors"}," Back to options")),r==="join"&&a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"text-center mb-6"},a.createElement("h2",{className:"text-xl font-semibold text-gray-800 mb-2"},"Join Your Partner"),a.createElement("p",{className:"text-gray-600"},"Enter the invite code your partner shared with you")),d&&a.createElement("div",{className:"p-3 bg-red-100 border border-red-200 rounded-lg text-red-700 text-sm"},d),a.createElement("div",null,a.createElement("input",{type:"text",value:g,onChange:v=>w(v.target.value.toUpperCase()),placeholder:"COUPLE-ABC123",className:"w-full p-4 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-pink-300 text-center font-mono text-lg",maxLength:12})),a.createElement("button",{onClick:_,disabled:u||!g.trim(),className:"w-full p-4 bg-gradient-to-r from-teal-500 to-cyan-500 text-white rounded-xl hover:from-teal-600 hover:to-cyan-600 transition-all duration-300 shadow-lg disabled:opacity-50"},u?"Joining...":"Join Chat"),a.createElement("button",{onClick:()=>n("choose"),className:"w-full p-2 text-gray-600 hover:text-gray-800 transition-colors"}," Back to options")),r==="waiting"&&i&&a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"text-center mb-6"},a.createElement("div",{className:"text-4xl mb-4 animate-pulse"},""),a.createElement("h2",{className:"text-xl font-semibold text-gray-800 mb-2"},"Waiting for Your Partner"),a.createElement("p",{className:"text-gray-600"},"Share this code with your partner to connect")),a.createElement("div",{className:"p-4 bg-gradient-to-r from-pink-50 to-rose-50 border border-pink-200 rounded-xl text-center"},a.createElement("div",{className:"text-sm text-gray-600 mb-2"},"Your Invite Code"),a.createElement("div",{className:"text-2xl font-mono font-bold text-pink-600 mb-3"},i.invite_code),a.createElement("button",{onClick:m,className:"px-4 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600 transition-colors text-sm"}," Copy Code")),a.createElement("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl"},a.createElement("div",{className:"text-sm text-blue-800"},a.createElement("div",{className:"font-semibold mb-2"}," How to share:"),a.createElement("ul",{className:"text-xs space-y-1 text-blue-700"},a.createElement("li",null," Send the code via text or WhatsApp"),a.createElement("li",null," Tell them to enter it in the app"),a.createElement("li",null," Once they join, you'll both be connected!")))),a.createElement("button",{onClick:()=>{n("choose"),l(null),o("")},className:"w-full p-2 text-gray-600 hover:text-gray-800 transition-colors"}," Create a new invite")))))},zg=()=>{const[e,t]=C.useState(null),[r,n]=C.useState(null),[s,o]=C.useState([]),[i,l]=C.useState(!0),[u,c]=C.useState(!1);C.useEffect(()=>{te.auth.getSession().then(({data:{session:_}})=>{const m=(_==null?void 0:_.user)??null;t(m),m?d(m):l(!1)});const{data:{subscription:E}}=te.auth.onAuthStateChange((_,m)=>{const h=(m==null?void 0:m.user)??null;t(h),n(null),h?d(h):l(!1)});return()=>E.unsubscribe()},[]);const d=async E=>{c(!0);try{const _=await yg(E.id);n(_)}catch(_){console.error("Error checking couple status:",_),n(null)}finally{c(!1),l(!1)}};C.useEffect(()=>{e&&r&&(f(),g())},[e,r]);const f=async()=>{try{const E=r.couple_id,_=await dg(E);if(_.length>0){const m=_.map(h=>({id:h.id,user:h.user_name,text:h.text,timestamp:new Date(h.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}));o(m),localStorage.setItem(`chatMessages_${E}`,JSON.stringify(m))}else try{const m=localStorage.getItem(`chatMessages_${E}`);if(m){const h=JSON.parse(m);o(h)}else{const h=[{id:1,user:"Them",text:"Hey! How are you?",timestamp:"10:00 AM"},{id:2,user:"You",text:"I'm good, thanks! How about you?",timestamp:"10:01 AM"},{id:3,user:"Them",text:"Doing great! Just enjoying the day.",timestamp:"10:02 AM"}];o(h),localStorage.setItem(`chatMessages_${E}`,JSON.stringify(h))}}catch(m){console.error("Error loading messages from localStorage:",m),o([])}}catch(E){console.error("Error loading messages:",E);try{const _=localStorage.getItem(`chatMessages_${roomId}`);_&&o(JSON.parse(_))}catch(_){console.error("Error loading from localStorage:",_)}}},g=()=>{const E=te.channel("messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`room_id=eq.${r.couple_id}`},_=>{const m={id:_.new.id,user:_.new.user_name,text:_.new.text,timestamp:new Date(_.new.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};o(h=>h.find(p=>p.id===m.id)?h:[...h,m])}).subscribe();return()=>{te.removeChannel(E)}};C.useEffect(()=>{if(s.length>0&&e&&r)try{localStorage.setItem(`chatMessages_${r.couple_id}`,JSON.stringify(s))}catch(E){if(console.error("Error saving messages to localStorage:",E),E.name==="QuotaExceededError"){localStorage.removeItem("messageDraft");try{localStorage.setItem(`chatMessages_${r.couple_id}`,JSON.stringify(s))}catch{alert("Storage is full. Please clear some data.")}}}},[s,e,r]);const w=async E=>{var p;const _=((p=e.user_metadata)==null?void 0:p.full_name)||e.email,m=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),h={id:Date.now(),user:_,text:E,timestamp:m};o(v=>[...v,h]);try{const v=await fg(r.couple_id,e.id,_,E);o(k=>k.map(x=>x.id===h.id?{id:v.id,user:v.user_name,text:v.text,timestamp:new Date(v.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}:x))}catch(v){console.error("Error sending message to Supabase:",v)}},y=E=>{n(E)};return i||u?a.createElement("div",{className:"min-h-screen w-full bg-gradient-to-br from-rose-100 to-teal-100 flex flex-col items-center justify-center p-4"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"text-6xl mb-4"},""),a.createElement("p",{className:"text-gray-600"},u?"Checking couple status...":"Loading ChatChat..."))):a.createElement(bg,null,e?r?a.createElement(Ug,{user:e,couple:r,messages:s,onSendMessage:w}):a.createElement(Fg,{user:e,onPairingComplete:y}):a.createElement(_g,null))};ci.createRoot(document.getElementById("root")).render(a.createElement(a.StrictMode,null,a.createElement(zg,null)));
